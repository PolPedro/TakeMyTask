function cov_1m1empkqer(){var path="C:\\Users\\polpe\\bootcamp\\collab\\skylab-bootcamp-202004\\staff\\pol-pedro\\takemytask\\takemytask-client-logic\\register-worker.spec.js";var hash="d64d55931da49dca4cdf2519991ec6b63a061405";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\polpe\\bootcamp\\collab\\skylab-bootcamp-202004\\staff\\pol-pedro\\takemytask\\takemytask-client-logic\\register-worker.spec.js",statementMap:{"0":{start:{line:1,column:0},end:{line:1,column:26}},"1":{start:{line:3,column:75},end:{line:3,column:82}},"2":{start:{line:5,column:23},end:{line:5,column:51}},"3":{start:{line:6,column:19},end:{line:6,column:23}},"4":{start:{line:7,column:19},end:{line:7,column:34}},"5":{start:{line:8,column:0},end:{line:8,column:44}},"6":{start:{line:9,column:41},end:{line:9,column:67}},"7":{start:{line:10,column:15},end:{line:10,column:34}},"8":{start:{line:11,column:0},end:{line:11,column:43}},"9":{start:{line:12,column:16},end:{line:12,column:36}},"10":{start:{line:14,column:0},end:{line:14,column:25}},"11":{start:{line:16,column:0},end:{line:96,column:2}},"12":{start:{line:17,column:4},end:{line:17,column:47}},"13":{start:{line:17,column:17},end:{line:17,column:46}},"14":{start:{line:21,column:4},end:{line:35,column:6}},"15":{start:{line:22,column:8},end:{line:22,column:33}},"16":{start:{line:24,column:8},end:{line:24,column:33}},"17":{start:{line:25,column:8},end:{line:25,column:39}},"18":{start:{line:26,column:8},end:{line:26,column:40}},"19":{start:{line:27,column:8},end:{line:27,column:41}},"20":{start:{line:28,column:8},end:{line:28,column:37}},"21":{start:{line:29,column:8},end:{line:29,column:45}},"22":{start:{line:30,column:8},end:{line:30,column:47}},"23":{start:{line:31,column:8},end:{line:31,column:49}},"24":{start:{line:32,column:8},end:{line:32,column:44}},"25":{start:{line:33,column:8},end:{line:33,column:53}},"26":{start:{line:34,column:8},end:{line:34,column:48}},"27":{start:{line:37,column:4},end:{line:61,column:6}},"28":{start:{line:38,column:23},end:{line:38,column:167}},"29":{start:{line:40,column:8},end:{line:40,column:38}},"30":{start:{line:42,column:22},end:{line:42,column:41}},"31":{start:{line:44,column:8},end:{line:44,column:40}},"32":{start:{line:46,column:23},end:{line:46,column:28}},"33":{start:{line:48,column:8},end:{line:48,column:40}},"34":{start:{line:49,column:8},end:{line:49,column:46}},"35":{start:{line:50,column:8},end:{line:50,column:42}},"36":{start:{line:51,column:8},end:{line:51,column:44}},"37":{start:{line:52,column:8},end:{line:52,column:52}},"38":{start:{line:53,column:8},end:{line:53,column:54}},"39":{start:{line:54,column:8},end:{line:54,column:54}},"40":{start:{line:55,column:8},end:{line:55,column:80}},"41":{start:{line:56,column:8},end:{line:56,column:62}},"42":{start:{line:58,column:22},end:{line:58,column:67}},"43":{start:{line:60,column:8},end:{line:60,column:32}},"44":{start:{line:63,column:4},end:{line:72,column:6}},"45":{start:{line:64,column:8},end:{line:71,column:9}},"46":{start:{line:66,column:27},end:{line:66,column:92}},"47":{start:{line:67,column:12},end:{line:67,column:35}},"48":{start:{line:69,column:12},end:{line:69,column:34}},"49":{start:{line:70,column:12},end:{line:70,column:71}},"50":{start:{line:76,column:4},end:{line:91,column:6}},"51":{start:{line:77,column:8},end:{line:77,column:167}},"52":{start:{line:77,column:25},end:{line:77,column:166}},"53":{start:{line:79,column:8},end:{line:90,column:10}},"54":{start:{line:80,column:12},end:{line:89,column:13}},"55":{start:{line:81,column:16},end:{line:81,column:160}},"56":{start:{line:83,column:16},end:{line:83,column:62}},"57":{start:{line:85,column:16},end:{line:85,column:38}},"58":{start:{line:87,column:16},end:{line:87,column:56}},"59":{start:{line:88,column:16},end:{line:88,column:92}},"60":{start:{line:93,column:4},end:{line:93,column:40}},"61":{start:{line:93,column:20},end:{line:93,column:39}},"62":{start:{line:95,column:4},end:{line:95,column:30}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:16,column:36},end:{line:16,column:37}},loc:{start:{line:16,column:42},end:{line:96,column:1}},line:16},"1":{name:"(anonymous_1)",decl:{start:{line:17,column:11},end:{line:17,column:12}},loc:{start:{line:17,column:17},end:{line:17,column:46}},line:17},"2":{name:"(anonymous_2)",decl:{start:{line:21,column:15},end:{line:21,column:16}},loc:{start:{line:21,column:27},end:{line:35,column:5}},line:21},"3":{name:"(anonymous_3)",decl:{start:{line:37,column:39},end:{line:37,column:40}},loc:{start:{line:37,column:51},end:{line:61,column:5}},line:37},"4":{name:"(anonymous_4)",decl:{start:{line:63,column:42},end:{line:63,column:43}},loc:{start:{line:63,column:54},end:{line:72,column:5}},line:63},"5":{name:"(anonymous_5)",decl:{start:{line:76,column:41},end:{line:76,column:42}},loc:{start:{line:76,column:47},end:{line:91,column:5}},line:76},"6":{name:"(anonymous_6)",decl:{start:{line:77,column:19},end:{line:77,column:20}},loc:{start:{line:77,column:25},end:{line:77,column:166}},line:77},"7":{name:"(anonymous_7)",decl:{start:{line:79,column:65},end:{line:79,column:66}},loc:{start:{line:79,column:77},end:{line:90,column:9}},line:79},"8":{name:"(anonymous_8)",decl:{start:{line:93,column:14},end:{line:93,column:15}},loc:{start:{line:93,column:20},end:{line:93,column:39}},line:93}},branchMap:{},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0},b:{},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d64d55931da49dca4cdf2519991ec6b63a061405"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_1m1empkqer=function(){return actualCoverage;};}return actualCoverage;}cov_1m1empkqer();cov_1m1empkqer().s[0]++;require('dotenv').config();const{env:{TEST_MONGODB_URL:MONGODB_URL,TEST_API_URL:API_URL}}=(cov_1m1empkqer().s[1]++,process);const registerWorker=(cov_1m1empkqer().s[2]++,require('./register-worker'));const{random}=(cov_1m1empkqer().s[3]++,Math);const{expect}=(cov_1m1empkqer().s[4]++,require('chai'));cov_1m1empkqer().s[5]++;require('takemytask-commons/polyfills/json');const{mongoose,models:{Worker}}=(cov_1m1empkqer().s[6]++,require('takemytask-data'));const bcrypt=(cov_1m1empkqer().s[7]++,require('bcryptjs'));cov_1m1empkqer().s[8]++;require('takemytask-commons/ponyfills/xhr');const context=(cov_1m1empkqer().s[9]++,require('./context'));cov_1m1empkqer().s[10]++;context.API_URL=API_URL;cov_1m1empkqer().s[11]++;describe('logic - register worker',()=>{cov_1m1empkqer().f[0]++;cov_1m1empkqer().s[12]++;before(()=>{cov_1m1empkqer().f[1]++;cov_1m1empkqer().s[13]++;return mongoose.connect(MONGODB_URL);});let name,surname,email,password,adress,bankAcount,description,pricingHour,jobCategories,workingDistance;cov_1m1empkqer().s[14]++;beforeEach(async()=>{cov_1m1empkqer().f[2]++;cov_1m1empkqer().s[15]++;await Worker.deleteMany();cov_1m1empkqer().s[16]++;name=`name-${random()}`;cov_1m1empkqer().s[17]++;surname=`surname-${random()}`;cov_1m1empkqer().s[18]++;email=`e-${random()}@mail.com`;cov_1m1empkqer().s[19]++;password=`password-${random()}`;cov_1m1empkqer().s[20]++;adress=`street-${random()}`;cov_1m1empkqer().s[21]++;bankAcount=`bankAcount-${random()}`;cov_1m1empkqer().s[22]++;description=`description-${random()}`;cov_1m1empkqer().s[23]++;presentation=`presentation-${random()}`;cov_1m1empkqer().s[24]++;pricingHour=parseInt(random()*100);cov_1m1empkqer().s[25]++;jobCategories=[`jobCategories-${random()}`];cov_1m1empkqer().s[26]++;workingDistance=parseInt(random()*100);});cov_1m1empkqer().s[27]++;it('should succeed on valid data',async()=>{cov_1m1empkqer().f[3]++;const result=(cov_1m1empkqer().s[28]++,await registerWorker(name,surname,email,password,adress,bankAcount,description,presentation,pricingHour,jobCategories,workingDistance));cov_1m1empkqer().s[29]++;expect(result).to.be.undefined;const users=(cov_1m1empkqer().s[30]++,await Worker.find());cov_1m1empkqer().s[31]++;expect(users.length).to.equal(1);const[user]=(cov_1m1empkqer().s[32]++,users);cov_1m1empkqer().s[33]++;expect(user.name).to.equal(name);cov_1m1empkqer().s[34]++;expect(user.surname).to.equal(surname);cov_1m1empkqer().s[35]++;expect(user.email).to.equal(email);cov_1m1empkqer().s[36]++;expect(user.adress).to.equal(adress);cov_1m1empkqer().s[37]++;expect(user.bankAcount).to.equal(bankAcount);cov_1m1empkqer().s[38]++;expect(user.description).to.equal(description);cov_1m1empkqer().s[39]++;expect(user.pricingHour).to.equal(pricingHour);cov_1m1empkqer().s[40]++;expect(user.jobCategories.toString()).to.equal(jobCategories.toString());cov_1m1empkqer().s[41]++;expect(user.workingDistance).to.equal(workingDistance);const match=(cov_1m1empkqer().s[42]++,await bcrypt.compare(password,user.password));cov_1m1empkqer().s[43]++;expect(match).to.be.true;});cov_1m1empkqer().s[44]++;it('should fail on invalid argument',async()=>{cov_1m1empkqer().f[4]++;cov_1m1empkqer().s[45]++;try{const result=(cov_1m1empkqer().s[46]++,await registerWorker(undefined,surname,email,password,adress));cov_1m1empkqer().s[47]++;expect(result).to.exist;}catch(error){cov_1m1empkqer().s[48]++;expect(error).to.exist;cov_1m1empkqer().s[49]++;expect(error.message).to.equal('undefined is not a string');}});cov_1m1empkqer().s[50]++;describe('when user already exists',()=>{cov_1m1empkqer().f[5]++;cov_1m1empkqer().s[51]++;beforeEach(()=>{cov_1m1empkqer().f[6]++;cov_1m1empkqer().s[52]++;return Worker.create({name,surname,email,password,adress,bankAcount,description,presentation,pricingHour,jobCategories,workingDistance});});cov_1m1empkqer().s[53]++;it('should fail on trying to register an existing user',async()=>{cov_1m1empkqer().f[7]++;cov_1m1empkqer().s[54]++;try{cov_1m1empkqer().s[55]++;await registerWorker(name,surname,email,password,adress,bankAcount,description,presentation,pricingHour,jobCategories,workingDistance);cov_1m1empkqer().s[56]++;throw new Error('should not reach this point');}catch(error){cov_1m1empkqer().s[57]++;expect(error).to.exist;cov_1m1empkqer().s[58]++;expect(error).to.be.an.instanceof(Error);cov_1m1empkqer().s[59]++;expect(error.message).to.equal(`worker with e-mail ${email} already exists`);}});});cov_1m1empkqer().s[60]++;afterEach(()=>{cov_1m1empkqer().f[8]++;cov_1m1empkqer().s[61]++;return Worker.deleteMany();});cov_1m1empkqer().s[62]++;after(mongoose.disconnect);});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlZ2lzdGVyLXdvcmtlci5zcGVjLmpzIl0sIm5hbWVzIjpbInJlcXVpcmUiLCJjb25maWciLCJlbnYiLCJURVNUX01PTkdPREJfVVJMIiwiTU9OR09EQl9VUkwiLCJURVNUX0FQSV9VUkwiLCJBUElfVVJMIiwicHJvY2VzcyIsInJlZ2lzdGVyV29ya2VyIiwicmFuZG9tIiwiTWF0aCIsImV4cGVjdCIsIm1vbmdvb3NlIiwibW9kZWxzIiwiV29ya2VyIiwiYmNyeXB0IiwiY29udGV4dCIsImRlc2NyaWJlIiwiYmVmb3JlIiwiY29ubmVjdCIsIm5hbWUiLCJzdXJuYW1lIiwiZW1haWwiLCJwYXNzd29yZCIsImFkcmVzcyIsImJhbmtBY291bnQiLCJkZXNjcmlwdGlvbiIsInByaWNpbmdIb3VyIiwiam9iQ2F0ZWdvcmllcyIsIndvcmtpbmdEaXN0YW5jZSIsImJlZm9yZUVhY2giLCJkZWxldGVNYW55IiwicHJlc2VudGF0aW9uIiwicGFyc2VJbnQiLCJpdCIsInJlc3VsdCIsInRvIiwiYmUiLCJ1bmRlZmluZWQiLCJ1c2VycyIsImZpbmQiLCJsZW5ndGgiLCJlcXVhbCIsInVzZXIiLCJ0b1N0cmluZyIsIm1hdGNoIiwiY29tcGFyZSIsInRydWUiLCJleGlzdCIsImVycm9yIiwibWVzc2FnZSIsImNyZWF0ZSIsIkVycm9yIiwiYW4iLCJpbnN0YW5jZW9mIiwiYWZ0ZXJFYWNoIiwiYWZ0ZXIiLCJkaXNjb25uZWN0Il0sIm1hcHBpbmdzIjoiMDlMQWVZO21IQWZaQSxPQUFPLENBQUMsUUFBRCxDQUFQLENBQWtCQyxNQUFsQixHQUVBLEtBQU0sQ0FBRUMsR0FBRyxDQUFFLENBQUVDLGdCQUFnQixDQUFFQyxXQUFwQixDQUFpQ0MsWUFBWSxDQUFFQyxPQUEvQyxDQUFQLDJCQUFxRUMsT0FBckUsQ0FBTixDQUVBLEtBQU1DLENBQUFBLGNBQWMsMEJBQUdSLE9BQU8sQ0FBQyxtQkFBRCxDQUFWLENBQXBCLENBQ0EsS0FBTSxDQUFFUyxNQUFGLDJCQUFhQyxJQUFiLENB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TUFBakMsQ0FBeUNDLFVBQXpDLENBQXFEQyxXQUFyRCxDQUFrRU0sWUFBbEUsQ0FBZ0ZMLFdBQWhGLENBQTZGQyxhQUE3RixDQUE0R0MsZUFBNUcsQ0FBcEIsQ0FEQSx5QkFHQSxLQUFNLElBQUl1QixDQUFBQSxLQUFKLENBQVUsNkJBQVYsQ0FBTixDQUNILENBQUMsTUFBT0gsS0FBUCxDQUFjLDBCQUNadEMsTUFBTSxDQUFDc0MsS0FBRCxDQUFOLENBQWNiLEVBQWQsQ0FBaUJZLEtBQWpCLENBRFkseUJBR1pyQyxNQUFNLENBQUNzQyxLQUFELENBQU4sQ0FBY2IsRUFBZCxDQUFpQkMsRUFBakIsQ0FBb0JnQixFQUFwQixDQUF1QkMsVUFBdkIsQ0FBa0NGLEtBQWxDLEVBSFkseUJBSVp6QyxNQUFNLENBQUNzQyxLQUFLLENBQUNDLE9BQVAsQ0FBTixDQUFzQmQsRUFBdEIsQ0FBeUJNLEtBQXpCLENBQWdDLHNCQUFxQnBCLEtBQU0saUJBQTNELEVBQ0gsQ0FDSixDQVhDLENBQUYsQ0FZSCxDQWZPLENBQVIsQ0E1RHNDLHlCQTZFdENpQyxTQUFTLENBQUMsSUFBTSx3REFBQXpDLENBQUFBLE1BQU0sQ0FBQ2lCLFVBQVAsR0FBbUIsQ0FBMUIsQ0FBVCxDQTdFc0MseUJBK0V0Q3lCLEtBQUssQ0FBQzVDLFFBQVEsQ0FBQzZDLFVBQVYsQ0FBTCxDQUNILENBaEZPLENBQVIiLCJzb3VyY2VzQ29udGVudCI6WyJyZXF1aXJlKCdkb3RlbnYnKS5jb25maWcoKVxyXG5cclxuY29uc3QgeyBlbnY6IHsgVEVTVF9NT05HT0RCX1VSTDogTU9OR09EQl9VUkwsIFRFU1RfQVBJX1VSTDogQVBJX1VSTCAgfSB9ID0gcHJvY2Vzc1xyXG5cclxuY29uc3QgcmVnaXN0ZXJXb3JrZXIgPSByZXF1aXJlKCcuL3JlZ2lzdGVyLXdvcmtlcicpXHJcbmNvbnN0IHsgcmFuZG9tIH0gPSBNYXRoXHJcbmNvbnN0IHsgZXhwZWN0IH0gPSByZXF1aXJlKCdjaGFpJylcclxucmVxdWlyZSgndGFrZW15dGFzay1jb21tb25zL3BvbHlmaWxscy9qc29uJylcclxuY29uc3QgeyBtb25nb29zZSwgbW9kZWxzOiB7IFdvcmtlciB9IH0gPSByZXF1aXJlKCd0YWtlbXl0YXNrLWRhdGEnKVxyXG5jb25zdCBiY3J5cHQgPSByZXF1aXJlKCdiY3J5cHRqcycpXHJcbnJlcXVpcmUoJ3Rha2VteXRhc2stY29tbW9ucy9wb255ZmlsbHMveGhyJylcclxuY29uc3QgY29udGV4dCA9IHJlcXVpcmUoJy4vY29udGV4dCcpXHJcblxyXG5jb250ZXh0LkFQSV9VUkwgPSBBUElfVVJMXHJcblxyXG5kZXNjcmliZSgnbG9naWMgLSByZWdpc3RlciB3b3JrZXInLCAoKSA9PiB7XHJcbiAgICBiZWZvcmUoKCkgPT4gbW9uZ29vc2UuY29ubmVjdChNT05HT0RCX1VSTCkpXHJcblxyXG4gICAgbGV0IG5hbWUsIHN1cm5hbWUsIGVtYWlsLCBwYXNzd29yZCwgYWRyZXNzLCBiYW5rQWNvdW50LCBkZXNjcmlwdGlvbiwgcHJpY2luZ0hvdXIsIGpvYkNhdGVnb3JpZXMsIHdvcmtpbmdEaXN0YW5jZVxyXG5cclxuICAgIGJlZm9yZUVhY2goYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgIGF3YWl0IFdvcmtlci5kZWxldGVNYW55KClcclxuXHJcbiAgICAgICAgbmFtZSA9IGBuYW1lLSR7cmFuZG9tKCl9YFxyXG4gICAgICAgIHN1cm5hbWUgPSBgc3VybmFtZS0ke3JhbmRvbSgpfWBcclxuICAgICAgICBlbWFpbCA9IGBlLSR7cmFuZG9tKCl9QG1haWwuY29tYFxyXG4gICAgICAgIHBhc3N3b3JkID0gYHBhc3N3b3JkLSR7cmFuZG9tKCl9YFxyXG4gICAgICAgIGFkcmVzcyA9IGBzdHJlZXQtJHtyYW5kb20oKX1gXHJcbiAgICAgICAgYmFua0Fjb3VudCA9IGBiYW5rQWNvdW50LSR7cmFuZG9tKCl9YFxyXG4gICAgICAgIGRlc2NyaXB0aW9uID0gYGRlc2NyaXB0aW9uLSR7cmFuZG9tKCl9YFxyXG4gICAgICAgIHByZXNlbnRhdGlvbiA9IGBwcmVzZW50YXRpb24tJHtyYW5kb20oKX1gXHJcbiAgICAgICAgcHJpY2luZ0hvdXIgPSBwYXJzZUludChyYW5kb20oKSoxMDApXHJcbiAgICAgICAgam9iQ2F0ZWdvcmllcyA9IFtgam9iQ2F0ZWdvcmllcy0ke3JhbmRvbSgpfWBdXHJcbiAgICAgICAgd29ya2luZ0Rpc3RhbmNlID0gcGFyc2VJbnQocmFuZG9tKCkqMTAwKVxyXG4gICAgfSlcclxuXHJcbiAgICBpdCgnc2hvdWxkIHN1Y2NlZWQgb24gdmFsaWQgZGF0YScsIGFzeW5jICgpID0+IHtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZWdpc3RlcldvcmtlcihuYW1lLCBzdXJuYW1lLCBlbWFpbCwgcGFzc3dvcmQsIGFkcmVzcywgYmFua0Fjb3VudCwgZGVzY3JpcHRpb24sIHByZXNlbnRhdGlvbiwgcHJpY2luZ0hvdXIsIGpvYkNhdGVnb3JpZXMsIHdvcmtpbmdEaXN0YW5jZSlcclxuXHJcbiAgICAgICAgZXhwZWN0KHJlc3VsdCkudG8uYmUudW5kZWZpbmVkXHJcblxyXG4gICAgICAgIGNvbnN0IHVzZXJzID0gYXdhaXQgV29ya2VyLmZpbmQoKVxyXG5cclxuICAgICAgICBleHBlY3QodXNlcnMubGVuZ3RoKS50by5lcXVhbCgxKVxyXG5cclxuICAgICAgICBjb25zdCBbdXNlcl0gPSB1c2Vyc1xyXG5cclxuICAgICAgICBleHBlY3QodXNlci5uYW1lKS50by5lcXVhbChuYW1lKVxyXG4gICAgICAgIGV4cGVjdCh1c2VyLnN1cm5hbWUpLnRvLmVxdWFsKHN1cm5hbWUpXHJcbiAgICAgICAgZXhwZWN0KHVzZXIuZW1haWwpLnRvLmVxdWFsKGVtYWlsKVxyXG4gICAgICAgIGV4cGVjdCh1c2VyLmFkcmVzcykudG8uZXF1YWwoYWRyZXNzKVxyXG4gICAgICAgIGV4cGVjdCh1c2VyLmJhbmtBY291bnQpLnRvLmVxdWFsKGJhbmtBY291bnQpXHJcbiAgICAgICAgZXhwZWN0KHVzZXIuZGVzY3JpcHRpb24pLnRvLmVxdWFsKGRlc2NyaXB0aW9uKVxyXG4gICAgICAgIGV4cGVjdCh1c2VyLnByaWNpbmdIb3VyKS50by5lcXVhbChwcmljaW5nSG91cilcclxuICAgICAgICBleHBlY3QodXNlci5qb2JDYXRlZ29yaWVzLnRvU3RyaW5nKCkpLnRvLmVxdWFsKGpvYkNhdGVnb3JpZXMudG9TdHJpbmcoKSlcclxuICAgICAgICBleHBlY3QodXNlci53b3JraW5nRGlzdGFuY2UpLnRvLmVxdWFsKHdvcmtpbmdEaXN0YW5jZSlcclxuXHJcbiAgICAgICAgY29uc3QgbWF0Y2ggPSBhd2FpdCBiY3J5cHQuY29tcGFyZShwYXNzd29yZCwgdXNlci5wYXNzd29yZClcclxuXHJcbiAgICAgICAgZXhwZWN0KG1hdGNoKS50by5iZS50cnVlXHJcbiAgICB9KVxyXG5cclxuICAgIGl0KCdzaG91bGQgZmFpbCBvbiBpbnZhbGlkIGFyZ3VtZW50JywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgIHRyeXtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlZ2lzdGVyV29ya2VyKHVuZGVmaW5lZCwgc3VybmFtZSwgZW1haWwsIHBhc3N3b3JkLCBhZHJlc3MpXHJcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQpLnRvLmV4aXN0XHJcbiAgICAgICAgfWNhdGNoKGVycm9yKXtcclxuICAgICAgICAgICAgZXhwZWN0KGVycm9yKS50by5leGlzdFxyXG4gICAgICAgICAgICBleHBlY3QoZXJyb3IubWVzc2FnZSkudG8uZXF1YWwoJ3VuZGVmaW5lZCBpcyBub3QgYSBzdHJpbmcnKVxyXG4gICAgICAgIH1cclxuICAgIH0pXHJcblxyXG5cclxuXHJcbiAgICBkZXNjcmliZSgnd2hlbiB1c2VyIGFscmVhZHkgZXhpc3RzJywgKCkgPT4ge1xyXG4gICAgICAgIGJlZm9yZUVhY2goKCkgPT4gV29ya2VyLmNyZWF0ZSh7IG5hbWUsIHN1cm5hbWUsIGVtYWlsLCBwYXNzd29yZCwgYWRyZXNzLCBiYW5rQWNvdW50LCBkZXNjcmlwdGlvbiwgcHJlc2VudGF0aW9uLCBwcmljaW5nSG91ciwgam9iQ2F0ZWdvcmllcywgd29ya2luZ0Rpc3RhbmNlIH0pKVxyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIGZhaWwgb24gdHJ5aW5nIHRvIHJlZ2lzdGVyIGFuIGV4aXN0aW5nIHVzZXInLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCByZWdpc3RlcldvcmtlcihuYW1lLCBzdXJuYW1lLCBlbWFpbCwgcGFzc3dvcmQsIGFkcmVzcywgYmFua0Fjb3VudCwgZGVzY3JpcHRpb24sIHByZXNlbnRhdGlvbiwgcHJpY2luZ0hvdXIsIGpvYkNhdGVnb3JpZXMsIHdvcmtpbmdEaXN0YW5jZSlcclxuXHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3Nob3VsZCBub3QgcmVhY2ggdGhpcyBwb2ludCcpXHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICBleHBlY3QoZXJyb3IpLnRvLmV4aXN0XHJcblxyXG4gICAgICAgICAgICAgICAgZXhwZWN0KGVycm9yKS50by5iZS5hbi5pbnN0YW5jZW9mKEVycm9yKVxyXG4gICAgICAgICAgICAgICAgZXhwZWN0KGVycm9yLm1lc3NhZ2UpLnRvLmVxdWFsKGB3b3JrZXIgd2l0aCBlLW1haWwgJHtlbWFpbH0gYWxyZWFkeSBleGlzdHNgKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH0pXHJcblxyXG4gICAgYWZ0ZXJFYWNoKCgpID0+IFdvcmtlci5kZWxldGVNYW55KCkpXHJcblxyXG4gICAgYWZ0ZXIobW9uZ29vc2UuZGlzY29ubmVjdClcclxufSkiXX0=