function cov_2dovi9y1x5(){var path="C:\\Users\\polpe\\bootcamp\\collab\\skylab-bootcamp-202004\\staff\\pol-pedro\\takemytask\\takemytask-client-logic\\creat-chat.spec.js";var hash="a6b4b9af475313ebf3bcb6389aed0fa29f86e56b";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\polpe\\bootcamp\\collab\\skylab-bootcamp-202004\\staff\\pol-pedro\\takemytask\\takemytask-client-logic\\creat-chat.spec.js",statementMap:{"0":{start:{line:1,column:0},end:{line:1,column:26}},"1":{start:{line:3,column:96},end:{line:3,column:103}},"2":{start:{line:5,column:18},end:{line:5,column:41}},"3":{start:{line:6,column:19},end:{line:6,column:23}},"4":{start:{line:7,column:19},end:{line:7,column:34}},"5":{start:{line:8,column:0},end:{line:8,column:44}},"6":{start:{line:9,column:52},end:{line:9,column:78}},"7":{start:{line:10,column:15},end:{line:10,column:34}},"8":{start:{line:11,column:0},end:{line:11,column:43}},"9":{start:{line:12,column:16},end:{line:12,column:36}},"10":{start:{line:13,column:35},end:{line:13,column:64}},"11":{start:{line:15,column:0},end:{line:15,column:25}},"12":{start:{line:17,column:0},end:{line:121,column:2}},"13":{start:{line:18,column:4},end:{line:18,column:47}},"14":{start:{line:18,column:17},end:{line:18,column:46}},"15":{start:{line:22,column:4},end:{line:49,column:6}},"16":{start:{line:23,column:8},end:{line:23,column:31}},"17":{start:{line:24,column:8},end:{line:24,column:33}},"18":{start:{line:25,column:8},end:{line:25,column:31}},"19":{start:{line:27,column:8},end:{line:27,column:33}},"20":{start:{line:28,column:8},end:{line:28,column:39}},"21":{start:{line:29,column:8},end:{line:29,column:40}},"22":{start:{line:30,column:8},end:{line:30,column:41}},"23":{start:{line:31,column:8},end:{line:31,column:37}},"24":{start:{line:33,column:8},end:{line:33,column:34}},"25":{start:{line:34,column:8},end:{line:34,column:40}},"26":{start:{line:35,column:8},end:{line:35,column:41}},"27":{start:{line:36,column:8},end:{line:36,column:42}},"28":{start:{line:37,column:8},end:{line:37,column:38}},"29":{start:{line:38,column:8},end:{line:38,column:45}},"30":{start:{line:39,column:8},end:{line:39,column:47}},"31":{start:{line:40,column:8},end:{line:40,column:33}},"32":{start:{line:41,column:8},end:{line:41,column:51}},"33":{start:{line:42,column:8},end:{line:42,column:37}},"34":{start:{line:44,column:22},end:{line:44,column:53}},"35":{start:{line:46,column:23},end:{line:46,column:195}},"36":{start:{line:48,column:8},end:{line:48,column:28}},"37":{start:{line:51,column:4},end:{line:94,column:6}},"38":{start:{line:52,column:8},end:{line:59,column:14}},"39":{start:{line:53,column:25},end:{line:53,column:84}},"40":{start:{line:55,column:12},end:{line:55,column:29}},"41":{start:{line:57,column:12},end:{line:58,column:63}},"42":{start:{line:58,column:33},end:{line:58,column:62}},"43":{start:{line:61,column:12},end:{line:90,column:14}},"44":{start:{line:62,column:16},end:{line:62,column:41}},"45":{start:{line:64,column:30},end:{line:64,column:47}},"46":{start:{line:66,column:32},end:{line:66,column:49}},"47":{start:{line:68,column:31},end:{line:68,column:36}},"48":{start:{line:70,column:33},end:{line:70,column:40}},"49":{start:{line:72,column:16},end:{line:72,column:45}},"50":{start:{line:73,column:16},end:{line:73,column:47}},"51":{start:{line:75,column:30},end:{line:75,column:47}},"52":{start:{line:79,column:31},end:{line:79,column:36}},"53":{start:{line:81,column:34},end:{line:81,column:47}},"54":{start:{line:85,column:16},end:{line:85,column:62}},"55":{start:{line:86,column:16},end:{line:86,column:77}},"56":{start:{line:87,column:16},end:{line:87,column:72}},"57":{start:{line:88,column:16},end:{line:88,column:76}},"58":{start:{line:96,column:4},end:{line:114,column:6}},"59":{start:{line:98,column:8},end:{line:102,column:10}},"60":{start:{line:99,column:12},end:{line:99,column:47}},"61":{start:{line:100,column:12},end:{line:101,column:63}},"62":{start:{line:101,column:33},end:{line:101,column:62}},"63":{start:{line:104,column:8},end:{line:113,column:10}},"64":{start:{line:105,column:12},end:{line:112,column:13}},"65":{start:{line:107,column:31},end:{line:107,column:54}},"66":{start:{line:108,column:16},end:{line:108,column:39}},"67":{start:{line:110,column:16},end:{line:110,column:38}},"68":{start:{line:111,column:16},end:{line:111,column:66}},"69":{start:{line:118,column:4},end:{line:118,column:78}},"70":{start:{line:118,column:20},end:{line:118,column:37}},"71":{start:{line:120,column:4},end:{line:120,column:30}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:17,column:31},end:{line:17,column:32}},loc:{start:{line:17,column:37},end:{line:121,column:1}},line:17},"1":{name:"(anonymous_1)",decl:{start:{line:18,column:11},end:{line:18,column:12}},loc:{start:{line:18,column:17},end:{line:18,column:46}},line:18},"2":{name:"(anonymous_2)",decl:{start:{line:22,column:15},end:{line:22,column:16}},loc:{start:{line:22,column:27},end:{line:49,column:5}},line:22},"3":{name:"(anonymous_3)",decl:{start:{line:51,column:28},end:{line:51,column:29}},loc:{start:{line:51,column:34},end:{line:94,column:5}},line:51},"4":{name:"(anonymous_4)",decl:{start:{line:52,column:19},end:{line:52,column:20}},loc:{start:{line:52,column:31},end:{line:59,column:13}},line:52},"5":{name:"(anonymous_5)",decl:{start:{line:58,column:22},end:{line:58,column:23}},loc:{start:{line:58,column:33},end:{line:58,column:62}},line:58},"6":{name:"(anonymous_6)",decl:{start:{line:61,column:52},end:{line:61,column:53}},loc:{start:{line:61,column:64},end:{line:90,column:13}},line:61},"7":{name:"(anonymous_7)",decl:{start:{line:96,column:33},end:{line:96,column:34}},loc:{start:{line:96,column:39},end:{line:114,column:5}},line:96},"8":{name:"(anonymous_8)",decl:{start:{line:98,column:19},end:{line:98,column:20}},loc:{start:{line:98,column:30},end:{line:102,column:9}},line:98},"9":{name:"(anonymous_9)",decl:{start:{line:101,column:22},end:{line:101,column:23}},loc:{start:{line:101,column:33},end:{line:101,column:62}},line:101},"10":{name:"(anonymous_10)",decl:{start:{line:104,column:42},end:{line:104,column:43}},loc:{start:{line:104,column:54},end:{line:113,column:9}},line:104},"11":{name:"(anonymous_11)",decl:{start:{line:118,column:14},end:{line:118,column:15}},loc:{start:{line:118,column:20},end:{line:118,column:37}},line:118}},branchMap:{},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0},b:{},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a6b4b9af475313ebf3bcb6389aed0fa29f86e56b"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_2dovi9y1x5=function(){return actualCoverage;};}return actualCoverage;}cov_2dovi9y1x5();cov_2dovi9y1x5().s[0]++;require('dotenv').config();const{env:{TEST_MONGODB_URL:MONGODB_URL,TEST_SECRET:SECRET,TEST_API_URL:API_URL}}=(cov_2dovi9y1x5().s[1]++,process);const creatChat=(cov_2dovi9y1x5().s[2]++,require('./creat-chat'));const{random}=(cov_2dovi9y1x5().s[3]++,Math);const{expect}=(cov_2dovi9y1x5().s[4]++,require('chai'));cov_2dovi9y1x5().s[5]++;require('takemytask-commons/polyfills/json');const{mongoose,models:{User,Worker,Chat}}=(cov_2dovi9y1x5().s[6]++,require('takemytask-data'));const bcrypt=(cov_2dovi9y1x5().s[7]++,require('bcryptjs'));cov_2dovi9y1x5().s[8]++;require('takemytask-commons/ponyfills/xhr');const context=(cov_2dovi9y1x5().s[9]++,require('./context'));const{utils:{jwtPromised}}=(cov_2dovi9y1x5().s[10]++,require('takemytask-commons'));cov_2dovi9y1x5().s[11]++;context.API_URL=API_URL;cov_2dovi9y1x5().s[12]++;describe('logic - creat chat',()=>{cov_2dovi9y1x5().f[0]++;cov_2dovi9y1x5().s[13]++;before(()=>{cov_2dovi9y1x5().f[1]++;cov_2dovi9y1x5().s[14]++;return mongoose.connect(MONGODB_URL);});let name,surname,email,password,adress,nameW,surnameW,emailW,passwordW,adressW,bankAcount,description,pricingHour,jobCategories,workingDistance,userId,workerId,chatMessage;cov_2dovi9y1x5().s[15]++;beforeEach(async()=>{cov_2dovi9y1x5().f[2]++;cov_2dovi9y1x5().s[16]++;await User.deleteMany();cov_2dovi9y1x5().s[17]++;await Worker.deleteMany();cov_2dovi9y1x5().s[18]++;await Chat.deleteMany();cov_2dovi9y1x5().s[19]++;name=`name-${random()}`;cov_2dovi9y1x5().s[20]++;surname=`surname-${random()}`;cov_2dovi9y1x5().s[21]++;email=`e-${random()}@mail.com`;cov_2dovi9y1x5().s[22]++;password=`password-${random()}`;cov_2dovi9y1x5().s[23]++;adress=`street-${random()}`;cov_2dovi9y1x5().s[24]++;nameW=`name-${random()}`;cov_2dovi9y1x5().s[25]++;surnameW=`surname-${random()}`;cov_2dovi9y1x5().s[26]++;emailW=`e-${random()}@mail.com`;cov_2dovi9y1x5().s[27]++;passwordW=`password-${random()}`;cov_2dovi9y1x5().s[28]++;adressW=`street-${random()}`;cov_2dovi9y1x5().s[29]++;bankAcount=`bankAcount-${random()}`;cov_2dovi9y1x5().s[30]++;description=`description-${random()}`;cov_2dovi9y1x5().s[31]++;pricingHour=random()*10;cov_2dovi9y1x5().s[32]++;jobCategories=`jobCategories-${random()}`;cov_2dovi9y1x5().s[33]++;workingDistance=random()*10;const hashW=(cov_2dovi9y1x5().s[34]++,await bcrypt.hash(password,10));const worker=(cov_2dovi9y1x5().s[35]++,await Worker.create({name:nameW,surname:surnameW,email:emailW,password:hashW,adress,adressW,bankAcount,description,pricingHour,jobCategories,workingDistance}));cov_2dovi9y1x5().s[36]++;workerId=worker.id;});cov_2dovi9y1x5().s[37]++;describe('user exists',()=>{cov_2dovi9y1x5().f[3]++;cov_2dovi9y1x5().s[38]++;beforeEach(async()=>{cov_2dovi9y1x5().f[4]++;const user=(cov_2dovi9y1x5().s[39]++,await User.create({name,surname,email,password,adress}));cov_2dovi9y1x5().s[40]++;userId=user._id;cov_2dovi9y1x5().s[41]++;return jwtPromised.sign({sub:user.id},SECRET).then(token=>{cov_2dovi9y1x5().f[5]++;cov_2dovi9y1x5().s[42]++;return context.storage.token=token;});});cov_2dovi9y1x5().s[43]++;it('should succeed on creating a chat',async()=>{cov_2dovi9y1x5().f[6]++;cov_2dovi9y1x5().s[44]++;await creatChat(workerId);const users=(cov_2dovi9y1x5().s[45]++,await User.find());const workers=(cov_2dovi9y1x5().s[46]++,await User.find());const[user]=(cov_2dovi9y1x5().s[47]++,users);const[worker]=(cov_2dovi9y1x5().s[48]++,workers);cov_2dovi9y1x5().s[49]++;expect(user.chat[0]).to.exist;cov_2dovi9y1x5().s[50]++;expect(worker.chat[0]).to.exist;const chats=(cov_2dovi9y1x5().s[51]++,await Chat.find());// expect(chats.length).to.equal(1)
const[chat]=(cov_2dovi9y1x5().s[52]++,chats);const[coments]=(cov_2dovi9y1x5().s[53]++,chat.messages);// const chatUserId = [userId] = chat.message
cov_2dovi9y1x5().s[54]++;expect(coments.text).to.equal(`hello${nameW}`);cov_2dovi9y1x5().s[55]++;expect(coments.userId.toString()).to.equal(userId.toString());cov_2dovi9y1x5().s[56]++;expect(chat.user.toString()).to.equal(userId.toString());cov_2dovi9y1x5().s[57]++;expect(chat.worker.toString()).to.equal(workerId.toString());});});cov_2dovi9y1x5().s[58]++;describe('chat dont exists',()=>{cov_2dovi9y1x5().f[7]++;let fakeId;cov_2dovi9y1x5().s[59]++;beforeEach(async()=>{cov_2dovi9y1x5().f[8]++;cov_2dovi9y1x5().s[60]++;fakeId='5ee0ed9a603a0a4f3c650fe1';cov_2dovi9y1x5().s[61]++;return jwtPromised.sign({sub:fakeId},SECRET).then(token=>{cov_2dovi9y1x5().f[9]++;cov_2dovi9y1x5().s[62]++;return context.storage.token=token;});});cov_2dovi9y1x5().s[63]++;it('should fail on invalid user',async()=>{cov_2dovi9y1x5().f[10]++;cov_2dovi9y1x5().s[64]++;try{const result=(cov_2dovi9y1x5().s[65]++,await creatChat(fakeId));cov_2dovi9y1x5().s[66]++;expect(result).to.exist;}catch(error){cov_2dovi9y1x5().s[67]++;expect(error).to.exist;cov_2dovi9y1x5().s[68]++;expect(error.message).to.equal('user dont exists');}});});cov_2dovi9y1x5().s[69]++;afterEach(()=>{cov_2dovi9y1x5().f[11]++;cov_2dovi9y1x5().s[70]++;return User.deleteMany();},Worker.deleteMany(),Chat.deleteMany());cov_2dovi9y1x5().s[71]++;after(mongoose.disconnect);});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNyZWF0LWNoYXQuc3BlYy5qcyJdLCJuYW1lcyI6WyJyZXF1aXJlIiwiY29uZmlnIiwiZW52IiwiVEVTVF9NT05HT0RCX1VSTCIsIk1PTkdPREJfVVJMIiwiVEVTVF9TRUNSRVQiLCJTRUNSRVQiLCJURVNUX0FQSV9VUkwiLCJBUElfVVJMIiwicHJvY2VzcyIsImNyZWF0Q2hhdCIsInJhbmRvbSIsIk1hdGgiLCJleHBlY3QiLCJtb25nb29zZSIsIm1vZGVscyIsIlVzZXIiLCJXb3JrZXIiLCJDaGF0IiwiYmNyeXB0IiwiY29udGV4dCIsInV0aWxzIiwiand0UHJvbWlzZWQiLCJkZXNjcmliZSIsImJlZm9yZSIsImNvbm5lY3QiLCJuYW1lIiwic3VybmFtZSIsImVtYWlsIiwicGFzc3dvcmQiLCJhZHJlc3MiLCJuYW1lVyIsInN1cm5hbWVXIiwiZW1haWxXIiwicGFzc3dvcmRXIiwiYWRyZXNzVyIsImJhbmtBY291bnQiLCJkZXNjcmlwdGlvbiIsInByaWNpbmdIb3VyIiwiam9iQ2F0ZWdvcmllcyIsIndvcmtpbmdEaXN0YW5jZSIsInVzZXJJZCIsIndvcmtlcklkIiwiY2hhdE1lc3NhZ2UiLCJiZWZvcmVFYWNoIiwiZGVsZXRlTWFueSIsImhhc2hXIiwiaGFzaCIsIndvcmtlciIsImNyZWF0ZSIsImlkIiwidXNlciIsIl9pZCIsInNpZ24iLCJzdWIiLCJ0aGVuIiwidG9rZW4iLCJzdG9yYWdlIiwiaXQiLCJ1c2VycyIsImZpbmQiLCJ3b3JrZXJzIiwiY2hhdCIsInRvIiwiZXhpc3QiLCJjaGF0cyIsImNvbWVudHMiLCJtZXNzYWdlcyIsInRleHQiLCJlcXVhbCIsInRvU3RyaW5nIiwiZmFrZUlkIiwicmVzdWx0IiwiZXJyb3IiLCJtZXNzYWdlIiwiYWZ0ZXJFYWNoIiwiYWZ0ZXIiLCJkaXNjb25uZWN0Il0sIm1hcHBpbmdzIjoib2hPQWVZO21IQWZaQSxPQUFPLENBQUMsUUFBRCxDQUFQLENBQWtCQyxNQUFsQixHQUVBLEtBQU0sQ0FBRUMsR0FBRyxDQUFF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RUFBZCxDQUFpQkMsS0FBakIsQ0FEUyx5QkFFVG5ELE1BQU0sQ0FBQzRELEtBQUssQ0FBQ0MsT0FBUCxDQUFOLENBQXNCWCxFQUF0QixDQUF5Qk0sS0FBekIsQ0FBK0Isa0JBQS9CLEVBQ0gsQ0FDSixDQVRDLENBQUYsQ0FVSCxDQWxCTyxDQUFSLENBL0VpQyx5QkFxR2pDTSxTQUFTLENBQUMsSUFBTSx5REFBQTNELENBQUFBLElBQUksQ0FBQzZCLFVBQUwsR0FBaUIsQ0FBeEIsQ0FBMEI1QixNQUFNLENBQUM0QixVQUFQLEVBQTFCLENBQStDM0IsSUFBSSxDQUFDMkIsVUFBTCxFQUEvQyxDQUFULENBckdpQyx5QkF1R2pDK0IsS0FBSyxDQUFDOUQsUUFBUSxDQUFDK0QsVUFBVixDQUFMLENBQ0gsQ0F4R08sQ0FBUiIsInNvdXJjZXNDb250ZW50IjpbInJlcXVpcmUoJ2RvdGVudicpLmNvbmZpZygpXHJcblxyXG5jb25zdCB7IGVudjogeyBURVNUX01PTkdPREJfVVJMOiBNT05HT0RCX1VSTCwgVEVTVF9TRUNSRVQ6IFNFQ1JFVCwgVEVTVF9BUElfVVJMOiBBUElfVVJMICB9IH0gPSBwcm9jZXNzXHJcblxyXG5jb25zdCBjcmVhdENoYXQgPSByZXF1aXJlKCcuL2NyZWF0LWNoYXQnKVxyXG5jb25zdCB7IHJhbmRvbSB9ID0gTWF0aFxyXG5jb25zdCB7IGV4cGVjdCB9ID0gcmVxdWlyZSgnY2hhaScpXHJcbnJlcXVpcmUoJ3Rha2VteXRhc2stY29tbW9ucy9wb2x5ZmlsbHMvanNvbicpXHJcbmNvbnN0IHsgbW9uZ29vc2UsIG1vZGVsczogeyBVc2VyLCBXb3JrZXIsIENoYXR9IH0gPSByZXF1aXJlKCd0YWtlbXl0YXNrLWRhdGEnKVxyXG5jb25zdCBiY3J5cHQgPSByZXF1aXJlKCdiY3J5cHRqcycpXHJcbnJlcXVpcmUoJ3Rha2VteXRhc2stY29tbW9ucy9wb255ZmlsbHMveGhyJylcclxuY29uc3QgY29udGV4dCA9IHJlcXVpcmUoJy4vY29udGV4dCcpXHJcbmNvbnN0IHsgdXRpbHM6IHsgand0UHJvbWlzZWQgfSB9ID0gcmVxdWlyZSgndGFrZW15dGFzay1jb21tb25zJylcclxuXHJcbmNvbnRleHQuQVBJX1VSTCA9IEFQSV9VUkxcclxuXHJcbmRlc2NyaWJlKCdsb2dpYyAtIGNyZWF0IGNoYXQnLCAoKSA9PiB7XHJcbiAgICBiZWZvcmUoKCkgPT4gbW9uZ29vc2UuY29ubmVjdChNT05HT0RCX1VSTCkpXHJcblxyXG4gICAgbGV0IG5hbWUsIHN1cm5hbWUsIGVtYWlsLCBwYXNzd29yZCwgYWRyZXNzLCBuYW1lVywgc3VybmFtZVcsIGVtYWlsVywgcGFzc3dvcmRXLCBhZHJlc3NXLCBiYW5rQWNvdW50LCBkZXNjcmlwdGlvbiwgcHJpY2luZ0hvdXIsIGpvYkNhdGVnb3JpZXMsIHdvcmtpbmdEaXN0YW5jZSwgdXNlcklkLCB3b3JrZXJJZCwgY2hhdE1lc3NhZ2VcclxuXHJcbiAgICBiZWZvcmVFYWNoKGFzeW5jICgpID0+IHtcclxuICAgICAgICBhd2FpdCBVc2VyLmRlbGV0ZU1hbnkoKVxyXG4gICAgICAgIGF3YWl0IFdvcmtlci5kZWxldGVNYW55KClcclxuICAgICAgICBhd2FpdCBDaGF0LmRlbGV0ZU1hbnkoKVxyXG5cclxuICAgICAgICBuYW1lID0gYG5hbWUtJHtyYW5kb20oKX1gXHJcbiAgICAgICAgc3VybmFtZSA9IGBzdXJuYW1lLSR7cmFuZG9tKCl9YFxyXG4gICAgICAgIGVtYWlsID0gYGUtJHtyYW5kb20oKX1AbWFpbC5jb21gXHJcbiAgICAgICAgcGFzc3dvcmQgPSBgcGFzc3dvcmQtJHtyYW5kb20oKX1gXHJcbiAgICAgICAgYWRyZXNzID0gYHN0cmVldC0ke3JhbmRvbSgpfWBcclxuICAgIFxyXG4gICAgICAgIG5hbWVXID0gYG5hbWUtJHtyYW5kb20oKX1gXHJcbiAgICAgICAgc3VybmFtZVcgPSBgc3VybmFtZS0ke3JhbmRvbSgpfWBcclxuICAgICAgICBlbWFpbFcgPSBgZS0ke3JhbmRvbSgpfUBtYWlsLmNvbWBcclxuICAgICAgICBwYXNzd29yZFcgPSBgcGFzc3dvcmQtJHtyYW5kb20oKX1gXHJcbiAgICAgICAgYWRyZXNzVyA9IGBzdHJlZXQtJHtyYW5kb20oKX1gXHJcbiAgICAgICAgYmFua0Fjb3VudCA9IGBiYW5rQWNvdW50LSR7cmFuZG9tKCl9YFxyXG4gICAgICAgIGRlc2NyaXB0aW9uID0gYGRlc2NyaXB0aW9uLSR7cmFuZG9tKCl9YFxyXG4gICAgICAgIHByaWNpbmdIb3VyID0gcmFuZG9tKCkqMTBcclxuICAgICAgICBqb2JDYXRlZ29yaWVzID0gYGpvYkNhdGVnb3JpZXMtJHtyYW5kb20oKX1gXHJcbiAgICAgICAgd29ya2luZ0Rpc3RhbmNlID0gcmFuZG9tKCkqMTBcclxuXHJcbiAgICAgICAgY29uc3QgaGFzaFcgPSBhd2FpdCBiY3J5cHQuaGFzaChwYXNzd29yZCwgMTApXHJcblxyXG4gICAgICAgIGNvbnN0IHdvcmtlciA9IGF3YWl0IFdvcmtlci5jcmVhdGUoe25hbWU6IG5hbWVXLCBzdXJuYW1lOiBzdXJuYW1lVywgZW1haWw6IGVtYWlsVywgcGFzc3dvcmQ6IGhhc2hXLCBhZHJlc3MsIGFkcmVzc1csIGJhbmtBY291bnQsIGRlc2NyaXB0aW9uLCBwcmljaW5nSG91ciwgam9iQ2F0ZWdvcmllcywgd29ya2luZ0Rpc3RhbmNlfSlcclxuXHJcbiAgICAgICAgd29ya2VySWQgPSB3b3JrZXIuaWQgXHJcbiAgICB9KVxyXG5cclxuICAgIGRlc2NyaWJlKCd1c2VyIGV4aXN0cycsICgpID0+IHtcclxuICAgICAgICBiZWZvcmVFYWNoKGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuY3JlYXRlKHtuYW1lLCBzdXJuYW1lLCBlbWFpbCwgcGFzc3dvcmQsIGFkcmVzc30pXHJcblxyXG4gICAgICAgICAgICB1c2VySWQgPSB1c2VyLl9pZFxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGp3dFByb21pc2VkLnNpZ24oeyBzdWI6IHVzZXIuaWQgfSwgU0VDUkVUKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oKHRva2VuKSA9PiBjb250ZXh0LnN0b3JhZ2UudG9rZW4gPSB0b2tlbilcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgaXQoJ3Nob3VsZCBzdWNjZWVkIG9uIGNyZWF0aW5nIGEgY2hhdCcsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGF3YWl0IGNyZWF0Q2hhdCh3b3JrZXJJZClcclxuICAgICAgICBcclxuICAgICAgICAgICAgICAgIGNvbnN0IHVzZXJzID0gYXdhaXQgVXNlci5maW5kKClcclxuICAgICAgICBcclxuICAgICAgICAgICAgICAgIGNvbnN0IHdvcmtlcnMgPSBhd2FpdCBVc2VyLmZpbmQoKVxyXG4gICAgICAgIFxyXG4gICAgICAgICAgICAgICAgY29uc3QgW3VzZXJdID0gdXNlcnNcclxuICAgICAgICBcclxuICAgICAgICAgICAgICAgIGNvbnN0IFt3b3JrZXJdID0gd29ya2Vyc1xyXG4gICAgICAgIFxyXG4gICAgICAgICAgICAgICAgZXhwZWN0KHVzZXIuY2hhdFswXSkudG8uZXhpc3RcclxuICAgICAgICAgICAgICAgIGV4cGVjdCh3b3JrZXIuY2hhdFswXSkudG8uZXhpc3RcclxuICAgICAgICBcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNoYXRzID0gYXdhaXQgQ2hhdC5maW5kKClcclxuICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIGV4cGVjdChjaGF0cy5sZW5ndGgpLnRvLmVxdWFsKDEpXHJcbiAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBjb25zdCBbY2hhdF0gPSBjaGF0c1xyXG4gICAgICAgIFxyXG4gICAgICAgICAgICAgICAgY29uc3QgW2NvbWVudHNdID0gY2hhdC5tZXNzYWdlc1xyXG4gICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gY29uc3QgY2hhdFVzZXJJZCA9IFt1c2VySWRdID0gY2hhdC5tZXNzYWdlXHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGV4cGVjdChjb21lbnRzLnRleHQpLnRvLmVxdWFsKGBoZWxsbyR7bmFtZVd9YClcclxuICAgICAgICAgICAgICAgIGV4cGVjdChjb21lbnRzLnVzZXJJZC50b1N0cmluZygpKS50by5lcXVhbCh1c2VySWQudG9TdHJpbmcoKSlcclxuICAgICAgICAgICAgICAgIGV4cGVjdChjaGF0LnVzZXIudG9TdHJpbmcoKSkudG8uZXF1YWwodXNlcklkLnRvU3RyaW5nKCkpXHJcbiAgICAgICAgICAgICAgICBleHBlY3QoY2hhdC53b3JrZXIudG9TdHJpbmcoKSkudG8uZXF1YWwod29ya2VySWQudG9TdHJpbmcoKSlcclxuICAgICAgICBcclxuICAgICAgICAgICAgfSlcclxuXHJcbiAgICAgICBcclxuXHJcbiAgICB9KVxyXG5cclxuICAgIGRlc2NyaWJlKCdjaGF0IGRvbnQgZXhpc3RzJywgKCkgPT4ge1xyXG4gICAgICAgIGxldCBmYWtlSWRcclxuICAgICAgICBiZWZvcmVFYWNoKGFzeW5jKCkgPT4ge1xyXG4gICAgICAgICAgICBmYWtlSWQgPSAnNWVlMGVkOWE2MDNhMGE0ZjNjNjUwZmUxJ1xyXG4gICAgICAgICAgICByZXR1cm4gand0UHJvbWlzZWQuc2lnbih7IHN1YjogZmFrZUlkIH0sIFNFQ1JFVClcclxuICAgICAgICAgICAgICAgIC50aGVuKCh0b2tlbikgPT4gY29udGV4dC5zdG9yYWdlLnRva2VuID0gdG9rZW4pXHJcbiAgICAgICAgfSlcclxuICAgICAgICBcclxuICAgICAgICBpdCgnc2hvdWxkIGZhaWwgb24gaW52YWxpZCB1c2VyJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICB0cnl7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNyZWF0Q2hhdChmYWtlSWQpXHJcbiAgICAgICAgICAgICAgICBleHBlY3QocmVzdWx0KS50by5leGlzdFxyXG4gICAgICAgICAgICB9Y2F0Y2goZXJyb3Ipe1xyXG4gICAgICAgICAgICAgICAgZXhwZWN0KGVycm9yKS50by5leGlzdFxyXG4gICAgICAgICAgICAgICAgZXhwZWN0KGVycm9yLm1lc3NhZ2UpLnRvLmVxdWFsKCd1c2VyIGRvbnQgZXhpc3RzJylcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9KVxyXG5cclxuXHJcblxyXG4gICAgYWZ0ZXJFYWNoKCgpID0+IFVzZXIuZGVsZXRlTWFueSgpLCBXb3JrZXIuZGVsZXRlTWFueSgpLCBDaGF0LmRlbGV0ZU1hbnkoKSlcclxuXHJcbiAgICBhZnRlcihtb25nb29zZS5kaXNjb25uZWN0KVxyXG59KSJdfQ==