function cov_2igx95nbct(){var path="C:\\Users\\polpe\\bootcamp\\collab\\skylab-bootcamp-202004\\staff\\pol-pedro\\takemytask\\takemytask-client-logic\\add-rate.spec.js";var hash="230e31436217f70ed63516027bffcd52a0623597";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\polpe\\bootcamp\\collab\\skylab-bootcamp-202004\\staff\\pol-pedro\\takemytask\\takemytask-client-logic\\add-rate.spec.js",statementMap:{"0":{start:{line:1,column:0},end:{line:1,column:26}},"1":{start:{line:3,column:96},end:{line:3,column:103}},"2":{start:{line:5,column:16},end:{line:5,column:37}},"3":{start:{line:6,column:19},end:{line:6,column:23}},"4":{start:{line:7,column:19},end:{line:7,column:34}},"5":{start:{line:8,column:0},end:{line:8,column:44}},"6":{start:{line:9,column:35},end:{line:9,column:64}},"7":{start:{line:10,column:68},end:{line:10,column:94}},"8":{start:{line:11,column:0},end:{line:11,column:43}},"9":{start:{line:12,column:16},end:{line:12,column:36}},"10":{start:{line:14,column:0},end:{line:14,column:25}},"11":{start:{line:16,column:0},end:{line:16,column:20}},"12":{start:{line:18,column:0},end:{line:110,column:2}},"13":{start:{line:19,column:4},end:{line:19,column:47}},"14":{start:{line:19,column:17},end:{line:19,column:46}},"15":{start:{line:23,column:4},end:{line:52,column:6}},"16":{start:{line:25,column:8},end:{line:25,column:31}},"17":{start:{line:26,column:8},end:{line:26,column:33}},"18":{start:{line:28,column:8},end:{line:28,column:33}},"19":{start:{line:29,column:8},end:{line:29,column:39}},"20":{start:{line:30,column:8},end:{line:30,column:40}},"21":{start:{line:31,column:8},end:{line:31,column:41}},"22":{start:{line:32,column:8},end:{line:32,column:37}},"23":{start:{line:34,column:8},end:{line:34,column:34}},"24":{start:{line:35,column:8},end:{line:35,column:40}},"25":{start:{line:36,column:8},end:{line:36,column:41}},"26":{start:{line:37,column:8},end:{line:37,column:42}},"27":{start:{line:38,column:8},end:{line:38,column:38}},"28":{start:{line:39,column:8},end:{line:39,column:45}},"29":{start:{line:40,column:8},end:{line:40,column:49}},"30":{start:{line:41,column:8},end:{line:41,column:47}},"31":{start:{line:42,column:8},end:{line:42,column:33}},"32":{start:{line:43,column:8},end:{line:43,column:51}},"33":{start:{line:44,column:8},end:{line:44,column:37}},"34":{start:{line:46,column:23},end:{line:46,column:202}},"35":{start:{line:48,column:8},end:{line:48,column:28}},"36":{start:{line:50,column:8},end:{line:50,column:37}},"37":{start:{line:53,column:4},end:{line:86,column:6}},"38":{start:{line:54,column:8},end:{line:61,column:10}},"39":{start:{line:55,column:25},end:{line:55,column:84}},"40":{start:{line:57,column:12},end:{line:57,column:29}},"41":{start:{line:59,column:12},end:{line:60,column:63}},"42":{start:{line:60,column:33},end:{line:60,column:62}},"43":{start:{line:63,column:8},end:{line:74,column:10}},"44":{start:{line:64,column:12},end:{line:64,column:41}},"45":{start:{line:66,column:28},end:{line:66,column:47}},"46":{start:{line:68,column:29},end:{line:68,column:36}},"47":{start:{line:70,column:12},end:{line:70,column:35}},"48":{start:{line:71,column:12},end:{line:71,column:47}},"49":{start:{line:72,column:12},end:{line:72,column:90}},"50":{start:{line:73,column:12},end:{line:73,column:65}},"51":{start:{line:76,column:8},end:{line:85,column:10}},"52":{start:{line:77,column:12},end:{line:84,column:13}},"53":{start:{line:79,column:16},end:{line:79,column:43}},"54":{start:{line:82,column:16},end:{line:82,column:40}},"55":{start:{line:83,column:16},end:{line:83,column:69}},"56":{start:{line:88,column:4},end:{line:105,column:6}},"57":{start:{line:90,column:8},end:{line:94,column:10}},"58":{start:{line:91,column:12},end:{line:91,column:47}},"59":{start:{line:92,column:12},end:{line:93,column:63}},"60":{start:{line:93,column:33},end:{line:93,column:62}},"61":{start:{line:95,column:8},end:{line:104,column:10}},"62":{start:{line:97,column:27},end:{line:102,column:18}},"63":{start:{line:100,column:20},end:{line:100,column:42}},"64":{start:{line:101,column:20},end:{line:101,column:90}},"65":{start:{line:107,column:4},end:{line:107,column:59}},"66":{start:{line:107,column:20},end:{line:107,column:39}},"67":{start:{line:109,column:4},end:{line:109,column:30}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:18,column:29},end:{line:18,column:30}},loc:{start:{line:18,column:35},end:{line:110,column:1}},line:18},"1":{name:"(anonymous_1)",decl:{start:{line:19,column:11},end:{line:19,column:12}},loc:{start:{line:19,column:17},end:{line:19,column:46}},line:19},"2":{name:"(anonymous_2)",decl:{start:{line:23,column:15},end:{line:23,column:16}},loc:{start:{line:23,column:27},end:{line:52,column:5}},line:23},"3":{name:"(anonymous_3)",decl:{start:{line:53,column:28},end:{line:53,column:29}},loc:{start:{line:53,column:34},end:{line:86,column:5}},line:53},"4":{name:"(anonymous_4)",decl:{start:{line:54,column:19},end:{line:54,column:20}},loc:{start:{line:54,column:31},end:{line:61,column:9}},line:54},"5":{name:"(anonymous_5)",decl:{start:{line:60,column:22},end:{line:60,column:23}},loc:{start:{line:60,column:33},end:{line:60,column:62}},line:60},"6":{name:"(anonymous_6)",decl:{start:{line:63,column:44},end:{line:63,column:45}},loc:{start:{line:63,column:56},end:{line:74,column:9}},line:63},"7":{name:"(anonymous_7)",decl:{start:{line:76,column:41},end:{line:76,column:42}},loc:{start:{line:76,column:53},end:{line:85,column:9}},line:76},"8":{name:"(anonymous_8)",decl:{start:{line:88,column:33},end:{line:88,column:34}},loc:{start:{line:88,column:39},end:{line:105,column:5}},line:88},"9":{name:"(anonymous_9)",decl:{start:{line:90,column:19},end:{line:90,column:20}},loc:{start:{line:90,column:30},end:{line:94,column:9}},line:90},"10":{name:"(anonymous_10)",decl:{start:{line:93,column:22},end:{line:93,column:23}},loc:{start:{line:93,column:33},end:{line:93,column:62}},line:93},"11":{name:"(anonymous_11)",decl:{start:{line:95,column:50},end:{line:95,column:51}},loc:{start:{line:95,column:62},end:{line:104,column:9}},line:95},"12":{name:"(anonymous_12)",decl:{start:{line:99,column:23},end:{line:99,column:24}},loc:{start:{line:99,column:32},end:{line:102,column:17}},line:99},"13":{name:"(anonymous_13)",decl:{start:{line:107,column:14},end:{line:107,column:15}},loc:{start:{line:107,column:20},end:{line:107,column:39}},line:107}},branchMap:{},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0},b:{},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"230e31436217f70ed63516027bffcd52a0623597"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_2igx95nbct=function(){return actualCoverage;};}return actualCoverage;}cov_2igx95nbct();cov_2igx95nbct().s[0]++;require('dotenv').config();const{env:{TEST_MONGODB_URL:MONGODB_URL,TEST_SECRET:SECRET,TEST_API_URL:API_URL}}=(cov_2igx95nbct().s[1]++,process);const addRate=(cov_2igx95nbct().s[2]++,require('./add-rate'));const{random}=(cov_2igx95nbct().s[3]++,Math);const{expect}=(cov_2igx95nbct().s[4]++,require('chai'));cov_2igx95nbct().s[5]++;require('takemytask-commons/polyfills/json');const{utils:{jwtPromised}}=(cov_2igx95nbct().s[6]++,require('takemytask-commons'));const{mongoose,models:{User,Worker},mongoose:{ObjectId}}=(cov_2igx95nbct().s[7]++,require('takemytask-data'));cov_2igx95nbct().s[8]++;require('takemytask-commons/ponyfills/xhr');const context=(cov_2igx95nbct().s[9]++,require('./context'));cov_2igx95nbct().s[10]++;context.API_URL=API_URL;cov_2igx95nbct().s[11]++;context.storage={};cov_2igx95nbct().s[12]++;describe('logic - add rate',()=>{cov_2igx95nbct().f[0]++;cov_2igx95nbct().s[13]++;before(()=>{cov_2igx95nbct().f[1]++;cov_2igx95nbct().s[14]++;return mongoose.connect(MONGODB_URL);});let name,surname,email,password,adress,bankAcount,description,pricingHour,jobCategories,workingDistance,workerId,rate,userId;cov_2igx95nbct().s[15]++;beforeEach(async()=>{cov_2igx95nbct().f[2]++;cov_2igx95nbct().s[16]++;await User.deleteMany();cov_2igx95nbct().s[17]++;await Worker.deleteMany();cov_2igx95nbct().s[18]++;name=`name-${random()}`;cov_2igx95nbct().s[19]++;surname=`surname-${random()}`;cov_2igx95nbct().s[20]++;email=`e-${random()}@mail.com`;cov_2igx95nbct().s[21]++;password=`password-${random()}`;cov_2igx95nbct().s[22]++;adress=`street-${random()}`;cov_2igx95nbct().s[23]++;nameW=`name-${random()}`;cov_2igx95nbct().s[24]++;surnameW=`surname-${random()}`;cov_2igx95nbct().s[25]++;emailW=`e-${random()}@mail.com`;cov_2igx95nbct().s[26]++;passwordW=`password-${random()}`;cov_2igx95nbct().s[27]++;adressW=`street-${random()}`;cov_2igx95nbct().s[28]++;bankAcount=`bankAcount-${random()}`;cov_2igx95nbct().s[29]++;presentation=`presentation-${random()}`;cov_2igx95nbct().s[30]++;description=`description-${random()}`;cov_2igx95nbct().s[31]++;pricingHour=random()*10;cov_2igx95nbct().s[32]++;jobCategories=`jobCategories-${random()}`;cov_2igx95nbct().s[33]++;workingDistance=random()*10;const worker=(cov_2igx95nbct().s[34]++,await Worker.create({name:nameW,surname:surnameW,email:emailW,password,adress,adressW,bankAcount,description,presentation,pricingHour,jobCategories,workingDistance}));cov_2igx95nbct().s[35]++;workerId=worker.id;cov_2igx95nbct().s[36]++;rate=parseInt(random()*6);});cov_2igx95nbct().s[37]++;describe('user exists',()=>{cov_2igx95nbct().f[3]++;cov_2igx95nbct().s[38]++;beforeEach(async()=>{cov_2igx95nbct().f[4]++;const user=(cov_2igx95nbct().s[39]++,await User.create({name,surname,email,password,adress}));cov_2igx95nbct().s[40]++;userId=user._id;cov_2igx95nbct().s[41]++;return jwtPromised.sign({sub:user.id},SECRET).then(token=>{cov_2igx95nbct().f[5]++;cov_2igx95nbct().s[42]++;return context.storage.token=token;});});cov_2igx95nbct().s[43]++;it('should succeed on adding rate',async()=>{cov_2igx95nbct().f[6]++;cov_2igx95nbct().s[44]++;await addRate(workerId,rate);const results=(cov_2igx95nbct().s[45]++,await Worker.find());const[worker]=(cov_2igx95nbct().s[46]++,results);cov_2igx95nbct().s[47]++;expect(worker).to.exist;cov_2igx95nbct().s[48]++;expect(worker.ratesWorker).to.exist;cov_2igx95nbct().s[49]++;expect(worker.ratesWorker[0].userId.toString()).to.be.equal(userId.toString());cov_2igx95nbct().s[50]++;expect(worker.ratesWorker[0].stars).to.be.equal(rate);});cov_2igx95nbct().s[51]++;it('should fail on adding rate',async()=>{cov_2igx95nbct().f[7]++;cov_2igx95nbct().s[52]++;try{cov_2igx95nbct().s[53]++;await addRate(workerId,"");}catch({message}){cov_2igx95nbct().s[54]++;expect(message).to.exist;cov_2igx95nbct().s[55]++;expect(message).to.equal(' is not an integer number');}});});cov_2igx95nbct().s[56]++;describe('chat dont exists',()=>{cov_2igx95nbct().f[8]++;let fakeId;cov_2igx95nbct().s[57]++;beforeEach(async()=>{cov_2igx95nbct().f[9]++;cov_2igx95nbct().s[58]++;fakeId='5ee0ed9a603a0a4f3c650fe1';cov_2igx95nbct().s[59]++;return jwtPromised.sign({sub:fakeId},SECRET).then(token=>{cov_2igx95nbct().f[10]++;cov_2igx95nbct().s[60]++;return context.storage.token=token;});});cov_2igx95nbct().s[61]++;it('sould fail when user id has no chat',async()=>{cov_2igx95nbct().f[11]++;const result=(cov_2igx95nbct().s[62]++,await addRate(fakeId,rate).then().catch(error=>{cov_2igx95nbct().f[12]++;cov_2igx95nbct().s[63]++;expect(error).to.exist;cov_2igx95nbct().s[64]++;expect(error.message).to.equal(`worker with id ${fakeId} dont exists`);}));});});cov_2igx95nbct().s[65]++;afterEach(()=>{cov_2igx95nbct().f[13]++;cov_2igx95nbct().s[66]++;return Worker.deleteMany();},User.deleteMany());cov_2igx95nbct().s[67]++;after(mongoose.disconnect);});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFkZC1yYXRlLnNwZWMuanMiXSwibmFtZXMiOlsicmVxdWlyZSIsImNvbmZpZyIsImVudiIsIlRFU1RfTU9OR09EQl9VUkwiLCJNT05HT0RCX1VSTCIsIlRFU1RfU0VDUkVUIiwiU0VDUkVUIiwiVEVTVF9BUElfVVJMIiwiQVBJX1VSTCIsInByb2Nlc3MiLCJhZGRSYXRlIiwicmFuZG9tIiwiTWF0aCIsImV4cGVjdCIsInV0aWxzIiwiand0UHJvbWlzZWQiLCJtb25nb29zZSIsIm1vZGVscyIsIlVzZXIiLCJXb3JrZXIiLCJPYmplY3RJZCIsImNvbnRleHQiLCJzdG9yYWdlIiwiZGVzY3JpYmUiLCJiZWZvcmUiLCJjb25uZWN0IiwibmFtZSIsInN1cm5hbWUiLCJlbWFpbCIsInBhc3N3b3JkIiwiYWRyZXNzIiwiYmFua0Fjb3VudCIsImRlc2NyaXB0aW9uIiwicHJpY2luZ0hvdXIiLCJqb2JDYXRlZ29yaWVzIiwid29ya2luZ0Rpc3RhbmNlIiwid29ya2VySWQiLCJyYXRlIiwidXNlcklkIiwiYmVmb3JlRWFjaCIsImRlbGV0ZU1hbnkiLCJuYW1lVyIsInN1cm5hbWVXIiwiZW1haWxXIiwicGFzc3dvcmRXIiwiYWRyZXNzVyIsInByZXNlbnRhdGlvbiIsIndvcmtlciIsImNyZWF0ZSIsImlkIiwicGFyc2VJbnQiLCJ1c2VyIiwiX2lkIiwic2lnbiIsInN1YiIsInRoZW4iLCJ0b2tlbiIsIml0IiwicmVzdWx0cyIsImZpbmQiLCJ0byIsImV4aXN0IiwicmF0ZXNXb3JrZXIiLCJ0b1N0cmluZyIsImJlIiwiZXF1YWwiLCJzdGFycyIsIm1lc3NhZ2UiLCJmYWtlSWQiLCJyZXN1bHQiLCJjYXRjaCIsImVycm9yIiwiYWZ0ZXJFYWNoIiwiYWZ0ZXIiLCJkaXNjb25uZWN0Il0sIm1hcHBpbmdzIjoiK2lPQWVZO21IQWZaQSxPQUFPLENBQUMsUUFBRCxDQUFQLENBQWtCQyxNQUFsQixHQUVBLEtBQU0sQ0FBRUMsR0FBRyxDQUFFLENBQUVDLGdCQUFnQixDQUFFQyxX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OlsicmVxdWlyZSgnZG90ZW52JykuY29uZmlnKClcclxuXHJcbmNvbnN0IHsgZW52OiB7IFRFU1RfTU9OR09EQl9VUkw6IE1PTkdPREJfVVJMLCBURVNUX1NFQ1JFVDogU0VDUkVULCBURVNUX0FQSV9VUkw6IEFQSV9VUkwgIH0gfSA9IHByb2Nlc3NcclxuXHJcbmNvbnN0IGFkZFJhdGUgPSByZXF1aXJlKCcuL2FkZC1yYXRlJylcclxuY29uc3QgeyByYW5kb20gfSA9IE1hdGhcclxuY29uc3QgeyBleHBlY3QgfSA9IHJlcXVpcmUoJ2NoYWknKVxyXG5yZXF1aXJlKCd0YWtlbXl0YXNrLWNvbW1vbnMvcG9seWZpbGxzL2pzb24nKVxyXG5jb25zdCB7IHV0aWxzOiB7IGp3dFByb21pc2VkIH0gfSA9IHJlcXVpcmUoJ3Rha2VteXRhc2stY29tbW9ucycpXHJcbmNvbnN0IHsgbW9uZ29vc2UsIG1vZGVsczoge1VzZXIsIFdvcmtlciB9LCBtb25nb29zZToge09iamVjdElkfSB9ID0gcmVxdWlyZSgndGFrZW15dGFzay1kYXRhJylcclxucmVxdWlyZSgndGFrZW15dGFzay1jb21tb25zL3BvbnlmaWxscy94aHInKVxyXG5jb25zdCBjb250ZXh0ID0gcmVxdWlyZSgnLi9jb250ZXh0JylcclxuXHJcbmNvbnRleHQuQVBJX1VSTCA9IEFQSV9VUkxcclxuXHJcbmNvbnRleHQuc3RvcmFnZSA9IHt9XHJcblxyXG5kZXNjcmliZSgnbG9naWMgLSBhZGQgcmF0ZScsICgpID0+IHtcclxuICAgIGJlZm9yZSgoKSA9PiBtb25nb29zZS5jb25uZWN0KE1PTkdPREJfVVJMKSlcclxuXHJcbiAgICBsZXQgbmFtZSwgc3VybmFtZSwgZW1haWwsIHBhc3N3b3JkLCBhZHJlc3MsIGJhbmtBY291bnQsIGRlc2NyaXB0aW9uLCBwcmljaW5nSG91ciwgam9iQ2F0ZWdvcmllcywgd29ya2luZ0Rpc3RhbmNlLCB3b3JrZXJJZCwgcmF0ZSwgdXNlcklkXHJcblxyXG4gICAgYmVmb3JlRWFjaChhc3luYyAoKSA9PiB7XHJcblxyXG4gICAgICAgIGF3YWl0IFVzZXIuZGVsZXRlTWFueSgpXHJcbiAgICAgICAgYXdhaXQgV29ya2VyLmRlbGV0ZU1hbnkoKVxyXG5cclxuICAgICAgICBuYW1lID0gYG5hbWUtJHtyYW5kb20oKX1gXHJcbiAgICAgICAgc3VybmFtZSA9IGBzdXJuYW1lLSR7cmFuZG9tKCl9YFxyXG4gICAgICAgIGVtYWlsID0gYGUtJHtyYW5kb20oKX1AbWFpbC5jb21gXHJcbiAgICAgICAgcGFzc3dvcmQgPSBgcGFzc3dvcmQtJHtyYW5kb20oKX1gXHJcbiAgICAgICAgYWRyZXNzID0gYHN0cmVldC0ke3JhbmRvbSgpfWBcclxuICAgIFxyXG4gICAgICAgIG5hbWVXID0gYG5hbWUtJHtyYW5kb20oKX1gXHJcbiAgICAgICAgc3VybmFtZVcgPSBgc3VybmFtZS0ke3JhbmRvbSgpfWBcclxuICAgICAgICBlbWFpbFcgPSBgZS0ke3JhbmRvbSgpfUBtYWlsLmNvbWBcclxuICAgICAgICBwYXNzd29yZFcgPSBgcGFzc3dvcmQtJHtyYW5kb20oKX1gXHJcbiAgICAgICAgYWRyZXNzVyA9IGBzdHJlZXQtJHtyYW5kb20oKX1gXHJcbiAgICAgICAgYmFua0Fjb3VudCA9IGBiYW5rQWNvdW50LSR7cmFuZG9tKCl9YFxyXG4gICAgICAgIHByZXNlbnRhdGlvbiA9IGBwcmVzZW50YXRpb24tJHtyYW5kb20oKX1gXHJcbiAgICAgICAgZGVzY3JpcHRpb24gPSBgZGVzY3JpcHRpb24tJHtyYW5kb20oKX1gXHJcbiAgICAgICAgcHJpY2luZ0hvdXIgPSByYW5kb20oKSoxMFxyXG4gICAgICAgIGpvYkNhdGVnb3JpZXMgPSBgam9iQ2F0ZWdvcmllcy0ke3JhbmRvbSgpfWBcclxuICAgICAgICB3b3JraW5nRGlzdGFuY2UgPSByYW5kb20oKSoxMFxyXG5cclxuICAgICAgICBjb25zdCB3b3JrZXIgPSBhd2FpdCBXb3JrZXIuY3JlYXRlKHtuYW1lOiBuYW1lVywgc3VybmFtZTogc3VybmFtZVcsIGVtYWlsOiBlbWFpbFcsIHBhc3N3b3JkLCBhZHJlc3MsIGFkcmVzc1csIGJhbmtBY291bnQsIGRlc2NyaXB0aW9uLCBwcmVzZW50YXRpb24sIHByaWNpbmdIb3VyLCBqb2JDYXRlZ29yaWVzLCB3b3JraW5nRGlzdGFuY2V9KVxyXG5cclxuICAgICAgICB3b3JrZXJJZCA9IHdvcmtlci5pZCBcclxuXHJcbiAgICAgICAgcmF0ZSA9IHBhcnNlSW50KHJhbmRvbSgpICogNilcclxuXHJcbiAgICB9KVxyXG4gICAgZGVzY3JpYmUoJ3VzZXIgZXhpc3RzJywgKCkgPT4ge1xyXG4gICAgICAgIGJlZm9yZUVhY2goYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlci5jcmVhdGUoe25hbWUsIHN1cm5hbWUsIGVtYWlsLCBwYXNzd29yZCwgYWRyZXNzfSlcclxuXHJcbiAgICAgICAgICAgIHVzZXJJZCA9IHVzZXIuX2lkXHJcblxyXG4gICAgICAgICAgICByZXR1cm4gand0UHJvbWlzZWQuc2lnbih7IHN1YjogdXNlci5pZCB9LCBTRUNSRVQpXHJcbiAgICAgICAgICAgICAgICAudGhlbigodG9rZW4pID0+IGNvbnRleHQuc3RvcmFnZS50b2tlbiA9IHRva2VuKVxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgc3VjY2VlZCBvbiBhZGRpbmcgcmF0ZScsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgYXdhaXQgYWRkUmF0ZSh3b3JrZXJJZCwgcmF0ZSlcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBXb3JrZXIuZmluZCgpXHJcblxyXG4gICAgICAgICAgICBjb25zdCBbd29ya2VyXSA9IHJlc3VsdHNcclxuXHJcbiAgICAgICAgICAgIGV4cGVjdCh3b3JrZXIpLnRvLmV4aXN0XHJcbiAgICAgICAgICAgIGV4cGVjdCh3b3JrZXIucmF0ZXNXb3JrZXIpLnRvLmV4aXN0XHJcbiAgICAgICAgICAgIGV4cGVjdCh3b3JrZXIucmF0ZXNXb3JrZXJbMF0udXNlcklkLnRvU3RyaW5nKCkpLnRvLmJlLmVxdWFsKHVzZXJJZC50b1N0cmluZygpKVxyXG4gICAgICAgICAgICBleHBlY3Qod29ya2VyLnJhdGVzV29ya2VyWzBdLnN0YXJzKS50by5iZS5lcXVhbChyYXRlKVxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgZmFpbCBvbiBhZGRpbmcgcmF0ZScsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgdHJ5e1xyXG5cclxuICAgICAgICAgICAgICAgIGF3YWl0IGFkZFJhdGUod29ya2VySWQsIFwiXCIpXHJcblxyXG4gICAgICAgICAgICB9Y2F0Y2goe21lc3NhZ2V9KXtcclxuICAgICAgICAgICAgICAgIGV4cGVjdChtZXNzYWdlKS50by5leGlzdFxyXG4gICAgICAgICAgICAgICAgZXhwZWN0KG1lc3NhZ2UpLnRvLmVxdWFsKCcgaXMgbm90IGFuIGludGVnZXIgbnVtYmVyJylcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9KVxyXG5cclxuICAgIGRlc2NyaWJlKCdjaGF0IGRvbnQgZXhpc3RzJywgKCkgPT4ge1xyXG4gICAgICAgIGxldCBmYWtlSWRcclxuICAgICAgICBiZWZvcmVFYWNoKGFzeW5jKCkgPT4ge1xyXG4gICAgICAgICAgICBmYWtlSWQgPSAnNWVlMGVkOWE2MDNhMGE0ZjNjNjUwZmUxJ1xyXG4gICAgICAgICAgICByZXR1cm4gand0UHJvbWlzZWQuc2lnbih7IHN1YjogZmFrZUlkIH0sIFNFQ1JFVClcclxuICAgICAgICAgICAgICAgIC50aGVuKCh0b2tlbikgPT4gY29udGV4dC5zdG9yYWdlLnRva2VuID0gdG9rZW4pXHJcbiAgICAgICAgfSlcclxuICAgICAgICBpdCgnc291bGQgZmFpbCB3aGVuIHVzZXIgaWQgaGFzIG5vIGNoYXQnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGFkZFJhdGUoZmFrZUlkLCByYXRlKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oKVxyXG4gICAgICAgICAgICAgICAgLmNhdGNoKGVycm9yID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBleHBlY3QoZXJyb3IpLnRvLmV4aXN0XHJcbiAgICAgICAgICAgICAgICAgICAgZXhwZWN0KGVycm9yLm1lc3NhZ2UpLnRvLmVxdWFsKGB3b3JrZXIgd2l0aCBpZCAke2Zha2VJZH0gZG9udCBleGlzdHNgKVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgfSlcclxuICAgIH0pXHJcblxyXG4gICAgYWZ0ZXJFYWNoKCgpID0+IFdvcmtlci5kZWxldGVNYW55KCksIFVzZXIuZGVsZXRlTWFueSgpKVxyXG5cclxuICAgIGFmdGVyKG1vbmdvb3NlLmRpc2Nvbm5lY3QpXHJcbn0pIl19