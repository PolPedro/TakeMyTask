function cov_1e9lj5i423(){var path="C:\\Users\\polpe\\bootcamp\\collab\\skylab-bootcamp-202004\\staff\\pol-pedro\\takemytask\\takemytask-client-logic\\update-user.spec.js";var hash="a4ac50b2a5416221bc9ab29d3b1a6bbf3e6110c0";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\polpe\\bootcamp\\collab\\skylab-bootcamp-202004\\staff\\pol-pedro\\takemytask\\takemytask-client-logic\\update-user.spec.js",statementMap:{"0":{start:{line:1,column:0},end:{line:1,column:26}},"1":{start:{line:3,column:96},end:{line:3,column:103}},"2":{start:{line:5,column:19},end:{line:5,column:43}},"3":{start:{line:6,column:19},end:{line:6,column:23}},"4":{start:{line:7,column:19},end:{line:7,column:34}},"5":{start:{line:8,column:0},end:{line:8,column:44}},"6":{start:{line:9,column:35},end:{line:9,column:64}},"7":{start:{line:10,column:61},end:{line:10,column:87}},"8":{start:{line:11,column:15},end:{line:11,column:34}},"9":{start:{line:12,column:0},end:{line:12,column:43}},"10":{start:{line:13,column:16},end:{line:13,column:36}},"11":{start:{line:15,column:0},end:{line:15,column:25}},"12":{start:{line:17,column:0},end:{line:17,column:20}},"13":{start:{line:19,column:0},end:{line:83,column:2}},"14":{start:{line:20,column:4},end:{line:20,column:47}},"15":{start:{line:20,column:17},end:{line:20,column:46}},"16":{start:{line:24,column:4},end:{line:37,column:6}},"17":{start:{line:25,column:8},end:{line:25,column:31}},"18":{start:{line:27,column:8},end:{line:27,column:33}},"19":{start:{line:28,column:8},end:{line:28,column:39}},"20":{start:{line:29,column:8},end:{line:29,column:40}},"21":{start:{line:30,column:8},end:{line:30,column:41}},"22":{start:{line:31,column:8},end:{line:31,column:37}},"23":{start:{line:34,column:8},end:{line:34,column:47}},"24":{start:{line:35,column:8},end:{line:35,column:51}},"25":{start:{line:39,column:4},end:{line:60,column:6}},"26":{start:{line:40,column:8},end:{line:45,column:10}},"27":{start:{line:41,column:25},end:{line:41,column:84}},"28":{start:{line:43,column:12},end:{line:44,column:63}},"29":{start:{line:44,column:33},end:{line:44,column:62}},"30":{start:{line:47,column:8},end:{line:59,column:10}},"31":{start:{line:48,column:12},end:{line:48,column:72}},"32":{start:{line:50,column:28},end:{line:50,column:45}},"33":{start:{line:52,column:27},end:{line:52,column:34}},"34":{start:{line:54,column:12},end:{line:54,column:33}},"35":{start:{line:55,column:12},end:{line:55,column:54}},"36":{start:{line:56,column:12},end:{line:56,column:53}},"37":{start:{line:57,column:12},end:{line:57,column:49}},"38":{start:{line:58,column:12},end:{line:58,column:58}},"39":{start:{line:62,column:4},end:{line:76,column:6}},"40":{start:{line:64,column:8},end:{line:68,column:10}},"41":{start:{line:65,column:12},end:{line:65,column:47}},"42":{start:{line:66,column:12},end:{line:67,column:63}},"43":{start:{line:67,column:33},end:{line:67,column:62}},"44":{start:{line:69,column:8},end:{line:75,column:10}},"45":{start:{line:70,column:12},end:{line:74,column:18}},"46":{start:{line:72,column:20},end:{line:72,column:42}},"47":{start:{line:73,column:20},end:{line:73,column:101}},"48":{start:{line:80,column:4},end:{line:80,column:38}},"49":{start:{line:80,column:20},end:{line:80,column:37}},"50":{start:{line:82,column:4},end:{line:82,column:30}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:19,column:32},end:{line:19,column:33}},loc:{start:{line:19,column:38},end:{line:83,column:1}},line:19},"1":{name:"(anonymous_1)",decl:{start:{line:20,column:11},end:{line:20,column:12}},loc:{start:{line:20,column:17},end:{line:20,column:46}},line:20},"2":{name:"(anonymous_2)",decl:{start:{line:24,column:15},end:{line:24,column:16}},loc:{start:{line:24,column:27},end:{line:37,column:5}},line:24},"3":{name:"(anonymous_3)",decl:{start:{line:39,column:28},end:{line:39,column:29}},loc:{start:{line:39,column:34},end:{line:60,column:5}},line:39},"4":{name:"(anonymous_4)",decl:{start:{line:40,column:19},end:{line:40,column:20}},loc:{start:{line:40,column:31},end:{line:45,column:9}},line:40},"5":{name:"(anonymous_5)",decl:{start:{line:44,column:22},end:{line:44,column:23}},loc:{start:{line:44,column:33},end:{line:44,column:62}},line:44},"6":{name:"(anonymous_6)",decl:{start:{line:47,column:47},end:{line:47,column:48}},loc:{start:{line:47,column:59},end:{line:59,column:9}},line:47},"7":{name:"(anonymous_7)",decl:{start:{line:62,column:32},end:{line:62,column:33}},loc:{start:{line:62,column:38},end:{line:76,column:5}},line:62},"8":{name:"(anonymous_8)",decl:{start:{line:64,column:19},end:{line:64,column:20}},loc:{start:{line:64,column:30},end:{line:68,column:9}},line:64},"9":{name:"(anonymous_9)",decl:{start:{line:67,column:22},end:{line:67,column:23}},loc:{start:{line:67,column:33},end:{line:67,column:62}},line:67},"10":{name:"(anonymous_10)",decl:{start:{line:69,column:44},end:{line:69,column:45}},loc:{start:{line:69,column:56},end:{line:75,column:9}},line:69},"11":{name:"(anonymous_11)",decl:{start:{line:71,column:24},end:{line:71,column:25}},loc:{start:{line:71,column:33},end:{line:74,column:17}},line:71},"12":{name:"(anonymous_12)",decl:{start:{line:80,column:14},end:{line:80,column:15}},loc:{start:{line:80,column:20},end:{line:80,column:37}},line:80}},branchMap:{},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0},b:{},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a4ac50b2a5416221bc9ab29d3b1a6bbf3e6110c0"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_1e9lj5i423=function(){return actualCoverage;};}return actualCoverage;}cov_1e9lj5i423();cov_1e9lj5i423().s[0]++;require('dotenv').config();const{env:{TEST_MONGODB_URL:MONGODB_URL,TEST_SECRET:SECRET,TEST_API_URL:API_URL}}=(cov_1e9lj5i423().s[1]++,process);const updateUser=(cov_1e9lj5i423().s[2]++,require('./update-user'));const{random}=(cov_1e9lj5i423().s[3]++,Math);const{expect}=(cov_1e9lj5i423().s[4]++,require('chai'));cov_1e9lj5i423().s[5]++;require('takemytask-commons/polyfills/json');const{utils:{jwtPromised}}=(cov_1e9lj5i423().s[6]++,require('takemytask-commons'));const{mongoose,models:{User},mongoose:{ObjectId}}=(cov_1e9lj5i423().s[7]++,require('takemytask-data'));const bcrypt=(cov_1e9lj5i423().s[8]++,require('bcryptjs'));cov_1e9lj5i423().s[9]++;require('takemytask-commons/ponyfills/xhr');const context=(cov_1e9lj5i423().s[10]++,require('./context'));cov_1e9lj5i423().s[11]++;context.API_URL=API_URL;cov_1e9lj5i423().s[12]++;context.storage={};cov_1e9lj5i423().s[13]++;describe('logic - update user',()=>{cov_1e9lj5i423().f[0]++;cov_1e9lj5i423().s[14]++;before(()=>{cov_1e9lj5i423().f[1]++;cov_1e9lj5i423().s[15]++;return mongoose.connect(MONGODB_URL);});let name,surname,email,password,adress,body,changedName,changedAdress;cov_1e9lj5i423().s[16]++;beforeEach(async()=>{cov_1e9lj5i423().f[2]++;cov_1e9lj5i423().s[17]++;await User.deleteMany();cov_1e9lj5i423().s[18]++;name=`name-${random()}`;cov_1e9lj5i423().s[19]++;surname=`surname-${random()}`;cov_1e9lj5i423().s[20]++;email=`e-${random()}@mail.com`;cov_1e9lj5i423().s[21]++;password=`password-${random()}`;cov_1e9lj5i423().s[22]++;adress=`street-${random()}`;cov_1e9lj5i423().s[23]++;changedName=`changedname-${random()}`;cov_1e9lj5i423().s[24]++;changedAdress=`changedstreet-${random()}`;});cov_1e9lj5i423().s[25]++;describe('user exists',()=>{cov_1e9lj5i423().f[3]++;cov_1e9lj5i423().s[26]++;beforeEach(async()=>{cov_1e9lj5i423().f[4]++;const user=(cov_1e9lj5i423().s[27]++,await User.create({name,surname,email,password,adress}));cov_1e9lj5i423().s[28]++;return jwtPromised.sign({sub:user.id},SECRET).then(token=>{cov_1e9lj5i423().f[5]++;cov_1e9lj5i423().s[29]++;return context.storage.token=token;});});cov_1e9lj5i423().s[30]++;it('should succeed on retriving user',async()=>{cov_1e9lj5i423().f[6]++;cov_1e9lj5i423().s[31]++;await updateUser(changedName,surname,email,changedAdress);const results=(cov_1e9lj5i423().s[32]++,await User.find());const[user]=(cov_1e9lj5i423().s[33]++,results);cov_1e9lj5i423().s[34]++;expect(user).to.exist;cov_1e9lj5i423().s[35]++;expect(user.name).to.be.equal(changedName);cov_1e9lj5i423().s[36]++;expect(user.surname).to.be.equal(surname);cov_1e9lj5i423().s[37]++;expect(user.email).to.be.equal(email);cov_1e9lj5i423().s[38]++;expect(user.adress).to.be.equal(changedAdress);});});cov_1e9lj5i423().s[39]++;describe('user dont exist',()=>{cov_1e9lj5i423().f[7]++;let fakeId;cov_1e9lj5i423().s[40]++;beforeEach(async()=>{cov_1e9lj5i423().f[8]++;cov_1e9lj5i423().s[41]++;fakeId='5ee0ed9a603a0a4f3c650fe1';cov_1e9lj5i423().s[42]++;return jwtPromised.sign({sub:fakeId},SECRET).then(token=>{cov_1e9lj5i423().f[9]++;cov_1e9lj5i423().s[43]++;return context.storage.token=token;});});cov_1e9lj5i423().s[44]++;it('should fail on retriving user',async()=>{cov_1e9lj5i423().f[10]++;cov_1e9lj5i423().s[45]++;result=await updateUser(changedName,surname,email,changedAdress).catch(error=>{cov_1e9lj5i423().f[11]++;cov_1e9lj5i423().s[46]++;expect(error).to.exist;cov_1e9lj5i423().s[47]++;expect(error.message).to.be.equal(`user or worker with id ${fakeId} dont exists`);});});});//TODO finish test with unhappy path
cov_1e9lj5i423().s[48]++;afterEach(()=>{cov_1e9lj5i423().f[12]++;cov_1e9lj5i423().s[49]++;return User.deleteMany();});cov_1e9lj5i423().s[50]++;after(mongoose.disconnect);});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVwZGF0ZS11c2VyLnNwZWMuanMiXSwibmFtZXMiOlsicmVxdWlyZSIsImNvbmZpZyIsImVudiIsIlRFU1RfTU9OR09EQl9VUkwiLCJNT05HT0RCX1VSTCIsIlRFU1RfU0VDUkVUIiwiU0VDUkVUIiwiVEVTVF9BUElfVVJMIiwiQVBJX1VSTCIsInByb2Nlc3MiLCJ1cGRhdGVVc2VyIiwicmFuZG9tIiwiTWF0aCIsImV4cGVjdCIsInV0aWxzIiwiand0UHJvbWlzZWQiLCJtb25nb29zZSIsIm1vZGVscyIsIlVzZXIiLCJPYmplY3RJZCIsImJjcnlwdCIsImNvbnRleHQiLCJzdG9yYWdlIiwiZGVzY3JpYmUiLCJiZWZvcmUiLCJjb25uZWN0IiwibmFtZSIsInN1cm5hbWUiLCJlbWFpbCIsInBhc3N3b3JkIiwiYWRyZXNzIiwiYm9keSIsImNoYW5nZWROYW1lIiwiY2hhbmdlZEFkcmVzcyIsImJlZm9yZUVhY2giLCJkZWxldGVNYW55IiwidXNlciIsImNyZWF0ZSIsInNpZ24iLCJzdWIiLCJpZCIsInRoZW4iLCJ0b2tlbiIsIml0IiwicmVzdWx0cyIsImZpbmQiLCJ0byIsImV4aXN0IiwiYmUiLCJlcXVhbCIsImZha2VJZCIsInJlc3VsdCIsImNhdGNoIiwiZXJyb3IiLCJtZXNzYWdlIiwiYWZ0ZXJFYWNoIiwiYWZ0ZXIiLCJkaXNjb25uZWN0Il0sIm1hcHBpbmdzIjoiKzBMQWVZO21IQWZaQSxPQUFPLENBQUMsUUFBRCxDQUFQLENBQWtCQyxNQUFsQixHQUVBLEtBQU0sQ0FBRUMsR0FBRyxDQUFFLENBQUVDLGdCQUFnQixDQUFFQyxXQUFwQixDQUFpQ0MsV0FBVyxDQUFFQyxNQUE5QyxDQUFzREMsWUFBWSxDQUFFQyxPQUFwRSxDQUFQLDJCQUEwRkMsT0FBMUYsQ0FBTixDQUVBLEtBQU1DLENBQUFBLFVBQVUsMEJBQUdWLE9BQU8sQ0FBQyxlQUFELENBQVYsQ0FBaEIsQ0FDQSxLQUFNLENBQUVXLE1BQUYsMkJBQWFDLElBQWIsQ0FBTixDQUNBLEtBQU0sQ0FB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Q0FBQ3NCLFdBQUQsQ0FBY0wsT0FBZCxDQUF1QkMsS0FBdkIsQ0FBOEJLLGFBQTlCLENBQVYsQ0FDVm1CLEtBRFUsQ0FDSEMsS0FBSyxFQUFJLG1EQUNieEMsTUFBTSxDQUFDd0MsS0FBRCxDQUFOLENBQWNQLEVBQWQsQ0FBaUJDLEtBQWpCLENBRGEseUJBRWJsQyxNQUFNLENBQUN3QyxLQUFLLENBQUNDLE9BQVAsQ0FBTixDQUFzQlIsRUFBdEIsQ0FBeUJFLEVBQXpCLENBQTRCQyxLQUE1QixDQUFtQywwQkFBeUJDLE1BQU8sY0FBbkUsRUFDSCxDQUpVLENBQWYsQ0FLSCxDQU5DLENBQUYsQ0FPSCxDQWRPLENBQVIsQ0FnQkE7QUEzRGtDLHlCQTZEbENLLFNBQVMsQ0FBQyxJQUFNLHlEQUFBckMsQ0FBQUEsSUFBSSxDQUFDaUIsVUFBTCxHQUFpQixDQUF4QixDQUFULENBN0RrQyx5QkErRGxDcUIsS0FBSyxDQUFDeEMsUUFBUSxDQUFDeUMsVUFBVixDQUFMLENBQ0gsQ0FoRU8sQ0FBUiIsInNvdXJjZXNDb250ZW50IjpbInJlcXVpcmUoJ2RvdGVudicpLmNvbmZpZygpXHJcblxyXG5jb25zdCB7IGVudjogeyBURVNUX01PTkdPREJfVVJMOiBNT05HT0RCX1VSTCwgVEVTVF9TRUNSRVQ6IFNFQ1JFVCwgVEVTVF9BUElfVVJMOiBBUElfVVJMICB9IH0gPSBwcm9jZXNzXHJcblxyXG5jb25zdCB1cGRhdGVVc2VyID0gcmVxdWlyZSgnLi91cGRhdGUtdXNlcicpXHJcbmNvbnN0IHsgcmFuZG9tIH0gPSBNYXRoXHJcbmNvbnN0IHsgZXhwZWN0IH0gPSByZXF1aXJlKCdjaGFpJylcclxucmVxdWlyZSgndGFrZW15dGFzay1jb21tb25zL3BvbHlmaWxscy9qc29uJylcclxuY29uc3QgeyB1dGlsczogeyBqd3RQcm9taXNlZCB9IH0gPSByZXF1aXJlKCd0YWtlbXl0YXNrLWNvbW1vbnMnKVxyXG5jb25zdCB7IG1vbmdvb3NlLCBtb2RlbHM6IHsgVXNlciB9LCBtb25nb29zZToge09iamVjdElkfSB9ID0gcmVxdWlyZSgndGFrZW15dGFzay1kYXRhJylcclxuY29uc3QgYmNyeXB0ID0gcmVxdWlyZSgnYmNyeXB0anMnKVxyXG5yZXF1aXJlKCd0YWtlbXl0YXNrLWNvbW1vbnMvcG9ueWZpbGxzL3hocicpXHJcbmNvbnN0IGNvbnRleHQgPSByZXF1aXJlKCcuL2NvbnRleHQnKVxyXG5cclxuY29udGV4dC5BUElfVVJMID0gQVBJX1VSTFxyXG5cclxuY29udGV4dC5zdG9yYWdlID0ge31cclxuXHJcbmRlc2NyaWJlKCdsb2dpYyAtIHVwZGF0ZSB1c2VyJywgKCkgPT4ge1xyXG4gICAgYmVmb3JlKCgpID0+IG1vbmdvb3NlLmNvbm5lY3QoTU9OR09EQl9VUkwpKVxyXG4gICAgXHJcbiAgICBsZXQgbmFtZSwgc3VybmFtZSwgZW1haWwsIHBhc3N3b3JkLCBhZHJlc3MsIGJvZHksIGNoYW5nZWROYW1lLCBjaGFuZ2VkQWRyZXNzXHJcblxyXG4gICAgYmVmb3JlRWFjaChhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgYXdhaXQgVXNlci5kZWxldGVNYW55KClcclxuXHJcbiAgICAgICAgbmFtZSA9IGBuYW1lLSR7cmFuZG9tKCl9YFxyXG4gICAgICAgIHN1cm5hbWUgPSBgc3VybmFtZS0ke3JhbmRvbSgpfWBcclxuICAgICAgICBlbWFpbCA9IGBlLSR7cmFuZG9tKCl9QG1haWwuY29tYFxyXG4gICAgICAgIHBhc3N3b3JkID0gYHBhc3N3b3JkLSR7cmFuZG9tKCl9YFxyXG4gICAgICAgIGFkcmVzcyA9IGBzdHJlZXQtJHtyYW5kb20oKX1gXHJcblxyXG5cclxuICAgICAgICBjaGFuZ2VkTmFtZSA9IGBjaGFuZ2VkbmFtZS0ke3JhbmRvbSgpfWBcclxuICAgICAgICBjaGFuZ2VkQWRyZXNzID0gYGNoYW5nZWRzdHJlZXQtJHtyYW5kb20oKX1gXHJcblxyXG4gICAgfSlcclxuICAgIFxyXG4gICAgZGVzY3JpYmUoJ3VzZXIgZXhpc3RzJywgKCkgPT4ge1xyXG4gICAgICAgIGJlZm9yZUVhY2goYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlci5jcmVhdGUoe25hbWUsIHN1cm5hbWUsIGVtYWlsLCBwYXNzd29yZCwgYWRyZXNzfSlcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBqd3RQcm9taXNlZC5zaWduKHsgc3ViOiB1c2VyLmlkIH0sIFNFQ1JFVClcclxuICAgICAgICAgICAgICAgIC50aGVuKCh0b2tlbikgPT4gY29udGV4dC5zdG9yYWdlLnRva2VuID0gdG9rZW4pXHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCBzdWNjZWVkIG9uIHJldHJpdmluZyB1c2VyJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBhd2FpdCB1cGRhdGVVc2VyKGNoYW5nZWROYW1lLCBzdXJuYW1lLCBlbWFpbCwgY2hhbmdlZEFkcmVzcylcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBVc2VyLmZpbmQoKVxyXG5cclxuICAgICAgICAgICAgY29uc3QgW3VzZXJdID0gcmVzdWx0c1xyXG5cclxuICAgICAgICAgICAgZXhwZWN0KHVzZXIpLnRvLmV4aXN0XHJcbiAgICAgICAgICAgIGV4cGVjdCh1c2VyLm5hbWUpLnRvLmJlLmVxdWFsKGNoYW5nZWROYW1lKVxyXG4gICAgICAgICAgICBleHBlY3QodXNlci5zdXJuYW1lKS50by5iZS5lcXVhbChzdXJuYW1lKVxyXG4gICAgICAgICAgICBleHBlY3QodXNlci5lbWFpbCkudG8uYmUuZXF1YWwoZW1haWwpXHJcbiAgICAgICAgICAgIGV4cGVjdCh1c2VyLmFkcmVzcykudG8uYmUuZXF1YWwoY2hhbmdlZEFkcmVzcylcclxuICAgICAgICB9KVxyXG4gICAgfSlcclxuICAgICAgXHJcbiAgICBkZXNjcmliZSgndXNlciBkb250IGV4aXN0JywgKCkgPT4ge1xyXG4gICAgICAgIGxldCBmYWtlSWRcclxuICAgICAgICBiZWZvcmVFYWNoKGFzeW5jKCkgPT4ge1xyXG4gICAgICAgICAgICBmYWtlSWQgPSAnNWVlMGVkOWE2MDNhMGE0ZjNjNjUwZmUxJ1xyXG4gICAgICAgICAgICByZXR1cm4gand0UHJvbWlzZWQuc2lnbih7IHN1YjogZmFrZUlkIH0sIFNFQ1JFVClcclxuICAgICAgICAgICAgICAgIC50aGVuKCh0b2tlbikgPT4gY29udGV4dC5zdG9yYWdlLnRva2VuID0gdG9rZW4pXHJcbiAgICAgICAgfSlcclxuICAgICAgICBpdCgnc2hvdWxkIGZhaWwgb24gcmV0cml2aW5nIHVzZXInLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIHJlc3VsdCA9IGF3YWl0IHVwZGF0ZVVzZXIoY2hhbmdlZE5hbWUsIHN1cm5hbWUsIGVtYWlsLCBjaGFuZ2VkQWRyZXNzKVxyXG4gICAgICAgICAgICAgICAgLmNhdGNoKCBlcnJvciA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZXhwZWN0KGVycm9yKS50by5leGlzdFxyXG4gICAgICAgICAgICAgICAgICAgIGV4cGVjdChlcnJvci5tZXNzYWdlKS50by5iZS5lcXVhbChgdXNlciBvciB3b3JrZXIgd2l0aCBpZCAke2Zha2VJZH0gZG9udCBleGlzdHNgKVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICB9KVxyXG4gICAgfSlcclxuICAgIFxyXG4gICAgLy9UT0RPIGZpbmlzaCB0ZXN0IHdpdGggdW5oYXBweSBwYXRoXHJcblxyXG4gICAgYWZ0ZXJFYWNoKCgpID0+IFVzZXIuZGVsZXRlTWFueSgpKVxyXG5cclxuICAgIGFmdGVyKG1vbmdvb3NlLmRpc2Nvbm5lY3QpXHJcbn0pIl19