function cov_5vmvl7mpg(){var path="C:\\Users\\polpe\\bootcamp\\collab\\skylab-bootcamp-202004\\staff\\pol-pedro\\takemytask\\takemytask-client-logic\\register-user.spec.js";var hash="add6309927cb647320c1d3dc7bf45a6596c385a2";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\polpe\\bootcamp\\collab\\skylab-bootcamp-202004\\staff\\pol-pedro\\takemytask\\takemytask-client-logic\\register-user.spec.js",statementMap:{"0":{start:{line:1,column:0},end:{line:1,column:26}},"1":{start:{line:3,column:75},end:{line:3,column:82}},"2":{start:{line:5,column:21},end:{line:5,column:47}},"3":{start:{line:6,column:19},end:{line:6,column:23}},"4":{start:{line:7,column:19},end:{line:7,column:34}},"5":{start:{line:8,column:0},end:{line:8,column:44}},"6":{start:{line:9,column:39},end:{line:9,column:65}},"7":{start:{line:10,column:15},end:{line:10,column:34}},"8":{start:{line:11,column:0},end:{line:11,column:43}},"9":{start:{line:12,column:16},end:{line:12,column:36}},"10":{start:{line:14,column:0},end:{line:14,column:25}},"11":{start:{line:16,column:0},end:{line:85,column:2}},"12":{start:{line:17,column:4},end:{line:17,column:47}},"13":{start:{line:17,column:17},end:{line:17,column:46}},"14":{start:{line:21,column:4},end:{line:29,column:6}},"15":{start:{line:22,column:8},end:{line:22,column:31}},"16":{start:{line:24,column:8},end:{line:24,column:33}},"17":{start:{line:25,column:8},end:{line:25,column:39}},"18":{start:{line:26,column:8},end:{line:26,column:40}},"19":{start:{line:27,column:8},end:{line:27,column:41}},"20":{start:{line:28,column:8},end:{line:28,column:37}},"21":{start:{line:31,column:4},end:{line:50,column:6}},"22":{start:{line:32,column:23},end:{line:32,column:81}},"23":{start:{line:34,column:8},end:{line:34,column:38}},"24":{start:{line:36,column:22},end:{line:36,column:39}},"25":{start:{line:38,column:8},end:{line:38,column:40}},"26":{start:{line:40,column:23},end:{line:40,column:28}},"27":{start:{line:42,column:8},end:{line:42,column:40}},"28":{start:{line:43,column:8},end:{line:43,column:46}},"29":{start:{line:44,column:8},end:{line:44,column:42}},"30":{start:{line:45,column:8},end:{line:45,column:44}},"31":{start:{line:47,column:22},end:{line:47,column:67}},"32":{start:{line:49,column:8},end:{line:49,column:32}},"33":{start:{line:52,column:4},end:{line:61,column:6}},"34":{start:{line:53,column:8},end:{line:60,column:9}},"35":{start:{line:55,column:27},end:{line:55,column:90}},"36":{start:{line:56,column:12},end:{line:56,column:35}},"37":{start:{line:58,column:12},end:{line:58,column:34}},"38":{start:{line:59,column:12},end:{line:59,column:71}},"39":{start:{line:65,column:4},end:{line:80,column:6}},"40":{start:{line:66,column:8},end:{line:66,column:81}},"41":{start:{line:66,column:25},end:{line:66,column:80}},"42":{start:{line:68,column:8},end:{line:79,column:10}},"43":{start:{line:69,column:12},end:{line:78,column:13}},"44":{start:{line:70,column:16},end:{line:70,column:74}},"45":{start:{line:72,column:16},end:{line:72,column:62}},"46":{start:{line:74,column:16},end:{line:74,column:38}},"47":{start:{line:76,column:16},end:{line:76,column:56}},"48":{start:{line:77,column:16},end:{line:77,column:90}},"49":{start:{line:82,column:4},end:{line:82,column:38}},"50":{start:{line:82,column:20},end:{line:82,column:37}},"51":{start:{line:84,column:4},end:{line:84,column:30}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:16,column:34},end:{line:16,column:35}},loc:{start:{line:16,column:40},end:{line:85,column:1}},line:16},"1":{name:"(anonymous_1)",decl:{start:{line:17,column:11},end:{line:17,column:12}},loc:{start:{line:17,column:17},end:{line:17,column:46}},line:17},"2":{name:"(anonymous_2)",decl:{start:{line:21,column:15},end:{line:21,column:16}},loc:{start:{line:21,column:27},end:{line:29,column:5}},line:21},"3":{name:"(anonymous_3)",decl:{start:{line:31,column:39},end:{line:31,column:40}},loc:{start:{line:31,column:51},end:{line:50,column:5}},line:31},"4":{name:"(anonymous_4)",decl:{start:{line:52,column:42},end:{line:52,column:43}},loc:{start:{line:52,column:54},end:{line:61,column:5}},line:52},"5":{name:"(anonymous_5)",decl:{start:{line:65,column:41},end:{line:65,column:42}},loc:{start:{line:65,column:47},end:{line:80,column:5}},line:65},"6":{name:"(anonymous_6)",decl:{start:{line:66,column:19},end:{line:66,column:20}},loc:{start:{line:66,column:25},end:{line:66,column:80}},line:66},"7":{name:"(anonymous_7)",decl:{start:{line:68,column:65},end:{line:68,column:66}},loc:{start:{line:68,column:77},end:{line:79,column:9}},line:68},"8":{name:"(anonymous_8)",decl:{start:{line:82,column:14},end:{line:82,column:15}},loc:{start:{line:82,column:20},end:{line:82,column:37}},line:82}},branchMap:{},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0},b:{},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"add6309927cb647320c1d3dc7bf45a6596c385a2"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_5vmvl7mpg=function(){return actualCoverage;};}return actualCoverage;}cov_5vmvl7mpg();cov_5vmvl7mpg().s[0]++;require('dotenv').config();const{env:{TEST_MONGODB_URL:MONGODB_URL,TEST_API_URL:API_URL}}=(cov_5vmvl7mpg().s[1]++,process);const registerUser=(cov_5vmvl7mpg().s[2]++,require('./register-user'));const{random}=(cov_5vmvl7mpg().s[3]++,Math);const{expect}=(cov_5vmvl7mpg().s[4]++,require('chai'));cov_5vmvl7mpg().s[5]++;require('takemytask-commons/polyfills/json');const{mongoose,models:{User}}=(cov_5vmvl7mpg().s[6]++,require('takemytask-data'));const bcrypt=(cov_5vmvl7mpg().s[7]++,require('bcryptjs'));cov_5vmvl7mpg().s[8]++;require('takemytask-commons/ponyfills/xhr');const context=(cov_5vmvl7mpg().s[9]++,require('./context'));cov_5vmvl7mpg().s[10]++;context.API_URL=API_URL;cov_5vmvl7mpg().s[11]++;describe('logic - register user',()=>{cov_5vmvl7mpg().f[0]++;cov_5vmvl7mpg().s[12]++;before(()=>{cov_5vmvl7mpg().f[1]++;cov_5vmvl7mpg().s[13]++;return mongoose.connect(MONGODB_URL);});let name,surname,email,password,adress;cov_5vmvl7mpg().s[14]++;beforeEach(async()=>{cov_5vmvl7mpg().f[2]++;cov_5vmvl7mpg().s[15]++;await User.deleteMany();cov_5vmvl7mpg().s[16]++;name=`name-${random()}`;cov_5vmvl7mpg().s[17]++;surname=`surname-${random()}`;cov_5vmvl7mpg().s[18]++;email=`e-${random()}@mail.com`;cov_5vmvl7mpg().s[19]++;password=`password-${random()}`;cov_5vmvl7mpg().s[20]++;adress=`street-${random()}`;});cov_5vmvl7mpg().s[21]++;it('should succeed on valid data',async()=>{cov_5vmvl7mpg().f[3]++;const result=(cov_5vmvl7mpg().s[22]++,await registerUser(name,surname,email,password,adress));cov_5vmvl7mpg().s[23]++;expect(result).to.be.undefined;const users=(cov_5vmvl7mpg().s[24]++,await User.find());cov_5vmvl7mpg().s[25]++;expect(users.length).to.equal(1);const[user]=(cov_5vmvl7mpg().s[26]++,users);cov_5vmvl7mpg().s[27]++;expect(user.name).to.equal(name);cov_5vmvl7mpg().s[28]++;expect(user.surname).to.equal(surname);cov_5vmvl7mpg().s[29]++;expect(user.email).to.equal(email);cov_5vmvl7mpg().s[30]++;expect(user.adress).to.equal(adress);const match=(cov_5vmvl7mpg().s[31]++,await bcrypt.compare(password,user.password));cov_5vmvl7mpg().s[32]++;expect(match).to.be.true;});cov_5vmvl7mpg().s[33]++;it('should fail on invalid argument',async()=>{cov_5vmvl7mpg().f[4]++;cov_5vmvl7mpg().s[34]++;try{const result=(cov_5vmvl7mpg().s[35]++,await registerUser(undefined,surname,email,password,adress));cov_5vmvl7mpg().s[36]++;expect(result).to.exist;}catch(error){cov_5vmvl7mpg().s[37]++;expect(error).to.exist;cov_5vmvl7mpg().s[38]++;expect(error.message).to.equal('undefined is not a string');}});cov_5vmvl7mpg().s[39]++;describe('when user already exists',()=>{cov_5vmvl7mpg().f[5]++;cov_5vmvl7mpg().s[40]++;beforeEach(()=>{cov_5vmvl7mpg().f[6]++;cov_5vmvl7mpg().s[41]++;return User.create({name,surname,email,password,adress});});cov_5vmvl7mpg().s[42]++;it('should fail on trying to register an existing user',async()=>{cov_5vmvl7mpg().f[7]++;cov_5vmvl7mpg().s[43]++;try{cov_5vmvl7mpg().s[44]++;await registerUser(name,surname,email,password,adress);cov_5vmvl7mpg().s[45]++;throw new Error('should not reach this point');}catch(error){cov_5vmvl7mpg().s[46]++;expect(error).to.exist;cov_5vmvl7mpg().s[47]++;expect(error).to.be.an.instanceof(Error);cov_5vmvl7mpg().s[48]++;expect(error.message).to.equal(`user with e-mail ${email} already exists`);}});});cov_5vmvl7mpg().s[49]++;afterEach(()=>{cov_5vmvl7mpg().f[8]++;cov_5vmvl7mpg().s[50]++;return User.deleteMany();});cov_5vmvl7mpg().s[51]++;after(mongoose.disconnect);});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlZ2lzdGVyLXVzZXIuc3BlYy5qcyJdLCJuYW1lcyI6WyJyZXF1aXJlIiwiY29uZmlnIiwiZW52IiwiVEVTVF9NT05HT0RCX1VSTCIsIk1PTkdPREJfVVJMIiwiVEVTVF9BUElfVVJMIiwiQVBJX1VSTCIsInByb2Nlc3MiLCJyZWdpc3RlclVzZXIiLCJyYW5kb20iLCJNYXRoIiwiZXhwZWN0IiwibW9uZ29vc2UiLCJtb2RlbHMiLCJVc2VyIiwiYmNyeXB0IiwiY29udGV4dCIsImRlc2NyaWJlIiwiYmVmb3JlIiwiY29ubmVjdCIsIm5hbWUiLCJzdXJuYW1lIiwiZW1haWwiLCJwYXNzd29yZCIsImFkcmVzcyIsImJlZm9yZUVhY2giLCJkZWxldGVNYW55IiwiaXQiLCJyZXN1bHQiLCJ0byIsImJlIiwidW5kZWZpbmVkIiwidXNlcnMiLCJmaW5kIiwibGVuZ3RoIiwiZXF1YWwiLCJ1c2VyIiwibWF0Y2giLCJjb21wYXJlIiwidHJ1ZSIsImV4aXN0IiwiZXJyb3IiLCJtZXNzYWdlIiwiY3JlYXRlIiwiRXJyb3IiLCJhbiIsImluc3RhbmNlb2YiLCJhZnRlckVhY2giLCJhZnRlciIsImRpc2Nvbm5lY3QiXSwibWFwcGluZ3MiOiIyeEtBZVk7Z0hBZlpBLE9BQU8sQ0FBQyxRQUFELENBQVAsQ0FBa0JDLE1BQWxCLEdBRUEsS0FBTSxDQUFFQyxHQUFHLENBQUUsQ0FBRUMsZ0JBQWdCLENBQUVDLFdBQXBCLENBQWlDQyxZQUFZLENBQUVDLE9BQS9DLENBQVAsMEJBQXFFQyxPQUFyRSxDQUFOLENBRUEsS0FBTUMsQ0FBQUEsWUFBWSx5QkFBR1IsT0FBTyxDQUFDLGlCQUFELENBQVYsQ0FBbEIsQ0FDQSxLQUFNLENBQUVTLE1BQUYsMEJBQWFDLElBQWIsQ0FBTixDQUNBLEtBQU0sQ0FBRUMsTUFBRiwwQkFBYVgsT0FBTyxDQUFDLE1BQUQsQ0FBcEIsQ0FBTixDLHVCQUNBQSxPQUFPLENBQUMsbUNBQUQsQ0FBUCxDQUNBLEtBQU0sQ0FBRVksUUFBRixDQUFZQyxNQUFNLENBQUUsQ0FBRUMsSUFBRixDQUFwQiwwQkFBaUNkLE9BQU8sQ0FBQyxpQkFBRCxDQUF4QyxDQUFOLENBQ0EsS0FBTWUsQ0FBQUEsTUFBTSx5QkFBR2YsT0FBTyxDQUFDLFVBQUQsQ0FBVixDQUFaLEMsdUJBQ0FBLE9BQU8sQ0FBQyxrQ0FBRCxDQUFQLENBQ0EsS0FBTWdCLENBQUFBLE9BQU8seUJBQUdoQixPQUFPLENBQUMsV0FBRCxDQUFWLENBQWIsQyx3QkFFQWdCLE9BQU8sQ0FBQ1YsT0FBUixDQUFrQkEsT0FBbEIsQyx3QkFFQVcsUUFBUSxDQUFDLHVCQUFELENBQTBCLElBQU0sZ0RBQ3BDQyxNQUFNLENBQUMsSUFBTSxzREFBQU4sQ0FBQUEsUUFBUSxDQUFDTyxPQUFULENBQWlCZixXQUFqQixFQUE2QixDQUFwQyxDQUFOLENBRUEsR0FBSWdCLENBQUFBLElBQUosQ0FBVUMsT0FBVixDQUFtQkMsS0FBbkIsQ0FBMEJDLFFBQTFCLENBQW9DQyxNQUFwQyxDQUhvQyx3QkFLcENDLFVBQVUsQ0FBQyxTQUFZLGdEQUNuQixLQUFNWCxDQUFBQSxJQUFJLENBQUNZLFVBQUwsRUFBTixDQURtQix3QkFHbkJOLElBQUksQ0FBSSxRQUFPWCxNQUFNLEVBQUcsRUFBeEIsQ0FIbUIsd0JBSW5CWSxPQUFPLENBQUksV0FBVVosTUFBTSxFQUFHLEVBQTlCLENBSm1CLHdCQUtuQmEsS0FBSyxDQUFJLEtBQUliLE1BQU0sRUFBRyxXQUF0QixDQUxtQix3QkFNbkJjLFFBQVEsQ0FBSSxZQUFXZCxNQUFNLEVBQUcsRUFBaEMsQ0FObUIsd0JBT25CZSxNQUFNLENBQUksVUFBU2YsTUFBTSxFQUFHLEVBQTVCLENBQ0gsQ0FSUyxDQUFWLENBTG9DLHdCQWVwQ2tCLEVBQUUsQ0FBQyw4QkFBRCxDQUFpQyxTQUFZLHdCQUMzQyxLQUFNQyxDQUFBQSxNQUFNLDBCQUFHLEtBQU1wQixDQUFBQSxZQUFZLENBQUNZLElBQUQsQ0FBT0MsT0FBUCxDQUFnQkMsS0FBaEIsQ0FBdUJDLFFBQXZCLENBQWlDQyxNQUFqQyxDQUFyQixDQUFaLENBRDJDLHdCQUczQ2IsTUFBTSxDQUFDaUIsTUFBRCxDQUFOLENBQWVDLEVBQWYsQ0FBa0JDLEVBQWxCLENBQXFCQyxTQUFyQixDQUVBLEtBQU1DLENBQUFBLEtBQUssMEJBQUcsS0FBTWxCLENBQUFBLElBQUksQ0FBQ21CLElBQUwsRUFBVCxDQUFYLENBTDJDLHdCQU8zQ3RCLE1BQU0sQ0FBQ3FCLEtBQUssQ0FBQ0UsTUFBUCxDQUFOLENBQXFCTCxFQUFyQixDQUF3Qk0sS0FBeEIsQ0FBOEIsQ0FBOUIsRUFFQSxLQUFNLENBQUNDLElBQUQsMkJBQVNKLEtBQVQsQ0FBTixDQVQyQyx3QkFXM0NyQixNQUFNLENBQUN5QixJQUFJLENBQUNoQixJQUFOLENBQU4sQ0FBa0JTLEVBQWxCLENBQXFCTSxLQUFyQixDQUEyQmYsSUFBM0IsRUFYMkMsd0JBWTNDVCxNQUFNLENBQUN5QixJQUFJLENBQUNmLE9BQU4sQ0FBTixDQUFxQlEsRUFBckIsQ0FBd0JNLEtBQXhCLENBQThCZCxPQUE5QixFQVoyQyx3QkFhM0NWLE1BQU0sQ0FBQ3lCLElBQUksQ0FBQ2QsS0FBTixDQUFOLENBQW1CTyxFQUFuQixDQUFzQk0sS0FBdEIsQ0FBNEJiLEtBQTVCLEVBYjJDLHdCQWMzQ1gsTUFBTSxDQUFDeUIsSUFBSSxDQUFDWixNQUFOLENBQU4sQ0FBb0JLLEVBQXBCLENBQXVCTSxLQUF2QixDQUE2QlgsTUFBN0IsRUFFQSxLQUFNYSxDQUFBQSxLQUFLLDBCQUFHLEtBQU10QixDQUFBQSxNQUFNLENBQUN1QixPQUFQLENBQWVmLFFBQWYsQ0FBeUJhLElBQUksQ0FBQ2IsUUFBOUIsQ0FBVCxDQUFYLENBaEIyQyx3QkFrQjNDWixNQUFNLENBQUMwQixLQUFELENBQU4sQ0FBY1IsRUFBZCxDQUFpQkMsRUFBakIsQ0FBb0JTLElBQXBCLENBQ0gsQ0FuQkMsQ0FBRixDQWZvQyx3QkFvQ3BDWixFQUFFLENBQUMsaUNBQUQsQ0FBb0MsU0FBWSxnREFDOUMsR0FBRyxDQUVDLEtBQU1DLENBQUFBLE1BQU0sMEJBQUcsS0FBTXBCLENBQUFBLFlBQVksQ0FBQ3VCLFNBQUQsQ0FBWVYsT0FBWixDQUFxQkMsS0FBckIsQ0FBNEJDLFFBQTVCLENBQXNDQyxNQUF0QyxDQUFyQixDQUFaLENBRkQsd0JBR0NiLE1BQU0sQ0FBQ2lCLE1BQUQsQ0FBTixDQUFlQyxFQUFmLENBQWtCVyxLQUFsQixDQUNILE9BQU1DLEtBQU4sQ0FBWSx5QkFDVDlCLE1BQU0sQ0FBQzhCLEtBQUQsQ0FBTixDQUFjWixFQUFkLENBQWlCVyxLQUFqQixDQURTLHdCQUVUN0IsTUFBTSxDQUFDOEIsS0FBSyxDQUFDQyxPQUFQLENBQU4sQ0FBc0JiLEVBQXRCLENBQXlCTSxLQUF6QixDQUErQiwyQkFBL0IsRUFDSCxDQUNKLENBVEMsQ0FBRixDQXBDb0Msd0JBaURwQ2xCLFFBQVEsQ0FBQywwQkFBRCxDQUE2QixJQUFNLGdEQUN2Q1EsVUFBVSxDQUFDLElBQU0sc0RBQUFYLENBQUFBLElBQUksQ0FBQzZCLE1BQUwsQ0FBWSxDQUFFdkIsSUFBRixDQUFRQyxPQUFSLENBQWlCQyxLQUFqQixDQUF3QkMsUUFBeEIsQ0FBa0NDLE1BQWxDLENBQVosRUFBdUQsQ0FBOUQsQ0FBVixDQUR1Qyx3QkFHdkNHLEVBQUUsQ0FBQyxvREFBRCxDQUF1RCxTQUFZLGdEQUNqRSxHQUFJLHlCQUNBLEtBQU1uQixDQUFBQSxZQUFZLENBQUNZLElBQUQsQ0FBT0MsT0FBUCxDQUFnQkMsS0FBaEIsQ0FBdUJDLFFBQXZCLENBQWlDQyxNQUFqQyxDQUFsQixDQURBLHdCQUdBLEtBQU0sSUFBSW9CLENBQUFBLEtBQUosQ0FBVSw2QkFBVixDQUFOLENBQ0gsQ0FBQyxNQUFPSCxLQUFQLENBQWMseUJBQ1o5QixNQUFNLENBQUM4QixLQUFELENBQU4sQ0FBY1osRUFBZCxDQUFpQlcsS0FBakIsQ0FEWSx3QkFHWjdCLE1BQU0sQ0FBQzhCLEtBQUQsQ0FBTixDQUFjWixFQUFkLENBQWlCQyxFQUFqQixDQUFvQmUsRUFBcEIsQ0FBdUJDLFVBQXZCLENBQWtDRixLQUFsQyxFQUhZLHdCQUlaakMsTUFBTSxDQUFDOEIsS0FBSyxDQUFDQyxPQUFQLENBQU4sQ0FBc0JiLEVBQXRCLENBQXlCTSxLQUF6QixDQUFnQyxvQkFBbUJiLEtBQU0saUJBQXpELEVBQ0gsQ0FDSixDQVhDLENBQUYsQ0FZSCxDQWZPLENBQVIsQ0FqRG9DLHdCQWtFcEN5QixTQUFTLENBQUMsSUFBTSxzREFBQWpDLENBQUFBLElBQUksQ0FBQ1ksVUFBTCxHQUFpQixDQUF4QixDQUFULENBbEVvQyx3QkFvRXBDc0IsS0FBSyxDQUFDcEMsUUFBUSxDQUFDcUMsVUFBVixDQUFMLENBQ0gsQ0FyRU8sQ0FBUiIsInNvdXJjZXNDb250ZW50IjpbInJlcXVpcmUoJ2RvdGVudicpLmNvbmZpZygpXHJcblxyXG5jb25zdCB7IGVudjogeyBURVNUX01PTkdPREJfVVJMOiBNT05HT0RCX1VSTCwgVEVTVF9BUElfVVJMOiBBUElfVVJMICB9IH0gPSBwcm9jZXNzXHJcblxyXG5jb25zdCByZWdpc3RlclVzZXIgPSByZXF1aXJlKCcuL3JlZ2lzdGVyLXVzZXInKVxyXG5jb25zdCB7IHJhbmRvbSB9ID0gTWF0aFxyXG5jb25zdCB7IGV4cGVjdCB9ID0gcmVxdWlyZSgnY2hhaScpXHJcbnJlcXVpcmUoJ3Rha2VteXRhc2stY29tbW9ucy9wb2x5ZmlsbHMvanNvbicpXHJcbmNvbnN0IHsgbW9uZ29vc2UsIG1vZGVsczogeyBVc2VyIH0gfSA9IHJlcXVpcmUoJ3Rha2VteXRhc2stZGF0YScpXHJcbmNvbnN0IGJjcnlwdCA9IHJlcXVpcmUoJ2JjcnlwdGpzJylcclxucmVxdWlyZSgndGFrZW15dGFzay1jb21tb25zL3BvbnlmaWxscy94aHInKVxyXG5jb25zdCBjb250ZXh0ID0gcmVxdWlyZSgnLi9jb250ZXh0JylcclxuXHJcbmNvbnRleHQuQVBJX1VSTCA9IEFQSV9VUkxcclxuXHJcbmRlc2NyaWJlKCdsb2dpYyAtIHJlZ2lzdGVyIHVzZXInLCAoKSA9PiB7XHJcbiAgICBiZWZvcmUoKCkgPT4gbW9uZ29vc2UuY29ubmVjdChNT05HT0RCX1VSTCkpXHJcblxyXG4gICAgbGV0IG5hbWUsIHN1cm5hbWUsIGVtYWlsLCBwYXNzd29yZCwgYWRyZXNzXHJcblxyXG4gICAgYmVmb3JlRWFjaChhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgYXdhaXQgVXNlci5kZWxldGVNYW55KClcclxuXHJcbiAgICAgICAgbmFtZSA9IGBuYW1lLSR7cmFuZG9tKCl9YFxyXG4gICAgICAgIHN1cm5hbWUgPSBgc3VybmFtZS0ke3JhbmRvbSgpfWBcclxuICAgICAgICBlbWFpbCA9IGBlLSR7cmFuZG9tKCl9QG1haWwuY29tYFxyXG4gICAgICAgIHBhc3N3b3JkID0gYHBhc3N3b3JkLSR7cmFuZG9tKCl9YFxyXG4gICAgICAgIGFkcmVzcyA9IGBzdHJlZXQtJHtyYW5kb20oKX1gXHJcbiAgICB9KVxyXG5cclxuICAgIGl0KCdzaG91bGQgc3VjY2VlZCBvbiB2YWxpZCBkYXRhJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlZ2lzdGVyVXNlcihuYW1lLCBzdXJuYW1lLCBlbWFpbCwgcGFzc3dvcmQsIGFkcmVzcylcclxuXHJcbiAgICAgICAgZXhwZWN0KHJlc3VsdCkudG8uYmUudW5kZWZpbmVkXHJcblxyXG4gICAgICAgIGNvbnN0IHVzZXJzID0gYXdhaXQgVXNlci5maW5kKClcclxuXHJcbiAgICAgICAgZXhwZWN0KHVzZXJzLmxlbmd0aCkudG8uZXF1YWwoMSlcclxuXHJcbiAgICAgICAgY29uc3QgW3VzZXJdID0gdXNlcnNcclxuXHJcbiAgICAgICAgZXhwZWN0KHVzZXIubmFtZSkudG8uZXF1YWwobmFtZSlcclxuICAgICAgICBleHBlY3QodXNlci5zdXJuYW1lKS50by5lcXVhbChzdXJuYW1lKVxyXG4gICAgICAgIGV4cGVjdCh1c2VyLmVtYWlsKS50by5lcXVhbChlbWFpbClcclxuICAgICAgICBleHBlY3QodXNlci5hZHJlc3MpLnRvLmVxdWFsKGFkcmVzcylcclxuXHJcbiAgICAgICAgY29uc3QgbWF0Y2ggPSBhd2FpdCBiY3J5cHQuY29tcGFyZShwYXNzd29yZCwgdXNlci5wYXNzd29yZClcclxuXHJcbiAgICAgICAgZXhwZWN0KG1hdGNoKS50by5iZS50cnVlXHJcbiAgICB9KVxyXG5cclxuICAgIGl0KCdzaG91bGQgZmFpbCBvbiBpbnZhbGlkIGFyZ3VtZW50JywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgIHRyeXtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlZ2lzdGVyVXNlcih1bmRlZmluZWQsIHN1cm5hbWUsIGVtYWlsLCBwYXNzd29yZCwgYWRyZXNzKVxyXG4gICAgICAgICAgICBleHBlY3QocmVzdWx0KS50by5leGlzdFxyXG4gICAgICAgIH1jYXRjaChlcnJvcil7XHJcbiAgICAgICAgICAgIGV4cGVjdChlcnJvcikudG8uZXhpc3RcclxuICAgICAgICAgICAgZXhwZWN0KGVycm9yLm1lc3NhZ2UpLnRvLmVxdWFsKCd1bmRlZmluZWQgaXMgbm90IGEgc3RyaW5nJylcclxuICAgICAgICB9XHJcbiAgICB9KVxyXG5cclxuXHJcblxyXG4gICAgZGVzY3JpYmUoJ3doZW4gdXNlciBhbHJlYWR5IGV4aXN0cycsICgpID0+IHtcclxuICAgICAgICBiZWZvcmVFYWNoKCgpID0+IFVzZXIuY3JlYXRlKHsgbmFtZSwgc3VybmFtZSwgZW1haWwsIHBhc3N3b3JkLCBhZHJlc3MgfSkpXHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgZmFpbCBvbiB0cnlpbmcgdG8gcmVnaXN0ZXIgYW4gZXhpc3RpbmcgdXNlcicsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGF3YWl0IHJlZ2lzdGVyVXNlcihuYW1lLCBzdXJuYW1lLCBlbWFpbCwgcGFzc3dvcmQsIGFkcmVzcylcclxuXHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3Nob3VsZCBub3QgcmVhY2ggdGhpcyBwb2ludCcpXHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICBleHBlY3QoZXJyb3IpLnRvLmV4aXN0XHJcblxyXG4gICAgICAgICAgICAgICAgZXhwZWN0KGVycm9yKS50by5iZS5hbi5pbnN0YW5jZW9mKEVycm9yKVxyXG4gICAgICAgICAgICAgICAgZXhwZWN0KGVycm9yLm1lc3NhZ2UpLnRvLmVxdWFsKGB1c2VyIHdpdGggZS1tYWlsICR7ZW1haWx9IGFscmVhZHkgZXhpc3RzYClcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9KVxyXG5cclxuICAgIGFmdGVyRWFjaCgoKSA9PiBVc2VyLmRlbGV0ZU1hbnkoKSlcclxuXHJcbiAgICBhZnRlcihtb25nb29zZS5kaXNjb25uZWN0KVxyXG59KSJdfQ==