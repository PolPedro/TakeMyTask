function cov_248ay7ytl0(){var path="C:\\Users\\polpe\\bootcamp\\collab\\skylab-bootcamp-202004\\staff\\pol-pedro\\takemytask\\takemytask-client-logic\\authenticate.js";var hash="ee1b8cb18552ca8f8839056f944439da5ccfc5f5";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\polpe\\bootcamp\\collab\\skylab-bootcamp-202004\\staff\\pol-pedro\\takemytask\\takemytask-client-logic\\authenticate.js",statementMap:{"0":{start:{line:1,column:0},end:{line:1,column:46}},"1":{start:{line:2,column:35},end:{line:2,column:64}},"2":{start:{line:3,column:16},end:{line:3,column:36}},"3":{start:{line:16,column:0},end:{line:37,column:15}},"4":{start:{line:17,column:4},end:{line:17,column:25}},"5":{start:{line:19,column:4},end:{line:19,column:37}},"6":{start:{line:21,column:4},end:{line:35,column:14}},"7":{start:{line:25,column:16},end:{line:34,column:17}},"8":{start:{line:27,column:36},end:{line:27,column:52}},"9":{start:{line:29,column:20},end:{line:29,column:46}},"10":{start:{line:32,column:38},end:{line:32,column:54}},"11":{start:{line:33,column:20},end:{line:33,column:43}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:16,column:17},end:{line:16,column:18}},loc:{start:{line:16,column:44},end:{line:37,column:1}},line:16},"1":{name:"(anonymous_1)",decl:{start:{line:24,column:18},end:{line:24,column:19}},loc:{start:{line:24,column:38},end:{line:35,column:13}},line:24}},branchMap:{"0":{loc:{start:{line:25,column:16},end:{line:34,column:17}},type:"if",locations:[{start:{line:25,column:16},end:{line:34,column:17}},{start:{line:25,column:16},end:{line:34,column:17}}],line:25}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0},f:{"0":0,"1":0},b:{"0":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ee1b8cb18552ca8f8839056f944439da5ccfc5f5"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_248ay7ytl0=function(){return actualCoverage;};}return actualCoverage;}cov_248ay7ytl0();cov_248ay7ytl0().s[0]++;require('takemytask-commons/polyfills/string');const{utils:{Email,call}}=(cov_248ay7ytl0().s[1]++,require('takemytask-commons'));const context=(cov_248ay7ytl0().s[2]++,require('./context'));/**
 * calls the api with the email and password given and if matches returns a token
 *
 * @param {string} email users or worker email
 * @param {string} password users or worker password 
 * 
 * @returns {string}
 *
 * @throws {Error} if server throws errror
 */cov_248ay7ytl0().s[3]++;module.exports=function(email,password){cov_248ay7ytl0().f[0]++;cov_248ay7ytl0().s[4]++;Email.validate(email);cov_248ay7ytl0().s[5]++;String.validate.notVoid(password);cov_248ay7ytl0().s[6]++;return call('POST',`${this.API_URL}/users/auth`,`{ "email": "${email}", "password": "${password}" }`,{'Content-type':'application/json'}).then(({status,body})=>{cov_248ay7ytl0().f[1]++;cov_248ay7ytl0().s[7]++;if(status===200){cov_248ay7ytl0().b[0][0]++;const{token}=(cov_248ay7ytl0().s[8]++,JSON.parse(body));cov_248ay7ytl0().s[9]++;this.storage.token=token;}else{cov_248ay7ytl0().b[0][1]++;const{error}=(cov_248ay7ytl0().s[10]++,JSON.parse(body));cov_248ay7ytl0().s[11]++;throw new Error(error);}});}.bind(context);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF1dGhlbnRpY2F0ZS5qcyJdLCJuYW1lcyI6WyJyZXF1aXJlIiwidXRpbHMiLCJFbWFpbCIsImNhbGwiLCJjb250ZXh0IiwibW9kdWxlIiwiZXhwb3J0cyIsImVtYWlsIiwicGFzc3dvcmQiLCJ2YWxpZGF0ZSIsIlN0cmluZyIsIm5vdFZvaWQiLCJBUElfVVJMIiwidGhlbiIsInN0YXR1cyIsImJvZHkiLCJ0b2tlbiIsIkpTT04iLCJwYXJzZSIsInN0b3JhZ2UiLCJlcnJvciIsIkVycm9yIiwiYmluZCJdLCJtYXBwaW5ncyI6Imc5REFlWTttSEFmWkEsT0FBTyxDQUFDLHFDQUFELENBQVAsQ0FDQSxLQUFNLENBQUVDLEtBQUssQ0FBRSxDQUFFQyxLQUFGLENBQVNDLElBQVQsQ0FBVCwyQkFBNkJILE9BQU8sQ0FBQyxvQkFBRCxDQUFwQyxDQUFOLENBQ0EsS0FBTUksQ0FBQUEsT0FBTywwQkFBR0osT0FBTyxDQUFDLFdBQUQsQ0FBVixDQUFiLENBRUE7Ozs7Ozs7OzsyQkFXQUssTUFBTSxDQUFDQyxPQUFQLENBQWlCLFNBQVVDLEtBQVYsQ0FBaUJDLFFBQWpCLENBQTJCLGlEQUN4Q04sS0FBSyxDQUFDTyxRQUFOLENBQWVGLEtBQWYsRUFEd0Msd0JBR3hDRyxNQUFNLENBQUNELFFBQVAsQ0FBZ0JFLE9BQWhCLENBQXdCSCxRQUF4QixFQUh3Qyx3QkFLeEMsTUFBT0wsQ0FBQUEsSUFBSSxDQUFDLE1BQUQsQ0FBVSxHQUFFLEtBQUtTLE9BQVEsYUFBekIsQ0FDTixlQUFjTCxLQUFNLG1CQUFrQkMsUUFBUyxLQUR6QyxDQUVQLENBQUUsZUFBZ0Isa0JBQWxCLENBRk8sQ0FBSixDQUdFSyxJQUhGLENBR08sQ0FBQyxDQUFDQyxNQUFELENBQVNDLElBQVQsQ0FBRCxHQUFvQixpREFDdEIsR0FBSUQsTUFBTSxHQUFLLEdBQWYsQ0FBbUIsNEJBRWYsS0FBTSxDQUFDRSxLQUFELDJCQUFVQyxJQUFJLENBQUNDLEtBQUwsQ0FBV0gsSUFBWCxDQUFWLENBQU4sQ0FGZSx3QkFJZixLQUFLSSxPQUFMLENBQWFILEtBQWIsQ0FBcUJBLEtBQXJCLENBQ0gsQ0FMRCxJQUtNLDRCQUVGLEtBQU0sQ0FBRUksS0FBRiw0QkFBWUgsSUFBSSxDQUFDQyxLQUFMLENBQVdILElBQVgsQ0FBWixDQUFOLENBRkUseUJBR0YsS0FBTSxJQUFJTSxDQUFBQSxLQUFKLENBQVdELEtBQVgsQ0FBTixDQUNILENBQ0osQ0FkRixDQUFQLENBZ0JILENBckJnQixDQXFCZkUsSUFyQmUsQ0FxQlZsQixPQXJCVSxDQUFqQiIsInNvdXJjZXNDb250ZW50IjpbInJlcXVpcmUoJ3Rha2VteXRhc2stY29tbW9ucy9wb2x5ZmlsbHMvc3RyaW5nJylcclxuY29uc3QgeyB1dGlsczogeyBFbWFpbCwgY2FsbCB9IH0gPSByZXF1aXJlKCd0YWtlbXl0YXNrLWNvbW1vbnMnKVxyXG5jb25zdCBjb250ZXh0ID0gcmVxdWlyZSgnLi9jb250ZXh0JylcclxuXHJcbi8qKlxyXG4gKiBjYWxscyB0aGUgYXBpIHdpdGggdGhlIGVtYWlsIGFuZCBwYXNzd29yZCBnaXZlbiBhbmQgaWYgbWF0Y2hlcyByZXR1cm5zIGEgdG9rZW5cclxuICpcclxuICogQHBhcmFtIHtzdHJpbmd9IGVtYWlsIHVzZXJzIG9yIHdvcmtlciBlbWFpbFxyXG4gKiBAcGFyYW0ge3N0cmluZ30gcGFzc3dvcmQgdXNlcnMgb3Igd29ya2VyIHBhc3N3b3JkIFxyXG4gKiBcclxuICogQHJldHVybnMge3N0cmluZ31cclxuICpcclxuICogQHRocm93cyB7RXJyb3J9IGlmIHNlcnZlciB0aHJvd3MgZXJycm9yXHJcbiAqL1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoZW1haWwsIHBhc3N3b3JkKSB7XHJcbiAgICBFbWFpbC52YWxpZGF0ZShlbWFpbClcclxuXHJcbiAgICBTdHJpbmcudmFsaWRhdGUubm90Vm9pZChwYXNzd29yZClcclxuXHJcbiAgICByZXR1cm4gY2FsbCgnUE9TVCcsIGAke3RoaXMuQVBJX1VSTH0vdXNlcnMvYXV0aGAsXHJcbiAgICAgICAgYHsgXCJlbWFpbFwiOiBcIiR7ZW1haWx9XCIsIFwicGFzc3dvcmRcIjogXCIke3Bhc3N3b3JkfVwiIH1gLFxyXG4gICAgICAgIHsgJ0NvbnRlbnQtdHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9KVxyXG4gICAgICAgICAgICAudGhlbigoe3N0YXR1cywgYm9keX0pID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChzdGF0dXMgPT09IDIwMCl7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHt0b2tlbn0gPSBKU09OLnBhcnNlKGJvZHkpXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RvcmFnZS50b2tlbiA9IHRva2VuXHJcbiAgICAgICAgICAgICAgICB9ZWxzZSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgZXJyb3IgfSA9IEpTT04ucGFyc2UoYm9keSlcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IgKGVycm9yKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgXHJcbn0uYmluZChjb250ZXh0KSJdfQ==