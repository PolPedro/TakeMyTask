function cov_163p2xd38p(){var path="C:\\Users\\polpe\\bootcamp\\collab\\skylab-bootcamp-202004\\staff\\pol-pedro\\takemytask\\takemytask-client-logic\\add-coment.spec.js";var hash="009a70c0bb4c12199ed2a404583438d64b5f7df1";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\polpe\\bootcamp\\collab\\skylab-bootcamp-202004\\staff\\pol-pedro\\takemytask\\takemytask-client-logic\\add-coment.spec.js",statementMap:{"0":{start:{line:1,column:0},end:{line:1,column:26}},"1":{start:{line:3,column:96},end:{line:3,column:103}},"2":{start:{line:5,column:18},end:{line:5,column:41}},"3":{start:{line:6,column:19},end:{line:6,column:23}},"4":{start:{line:7,column:19},end:{line:7,column:34}},"5":{start:{line:8,column:0},end:{line:8,column:44}},"6":{start:{line:9,column:35},end:{line:9,column:64}},"7":{start:{line:10,column:68},end:{line:10,column:94}},"8":{start:{line:11,column:15},end:{line:11,column:34}},"9":{start:{line:12,column:0},end:{line:12,column:43}},"10":{start:{line:13,column:16},end:{line:13,column:36}},"11":{start:{line:15,column:0},end:{line:15,column:25}},"12":{start:{line:17,column:0},end:{line:17,column:20}},"13":{start:{line:19,column:0},end:{line:98,column:2}},"14":{start:{line:20,column:4},end:{line:20,column:47}},"15":{start:{line:20,column:17},end:{line:20,column:46}},"16":{start:{line:24,column:4},end:{line:52,column:6}},"17":{start:{line:25,column:8},end:{line:25,column:31}},"18":{start:{line:26,column:8},end:{line:26,column:33}},"19":{start:{line:28,column:8},end:{line:28,column:33}},"20":{start:{line:29,column:8},end:{line:29,column:39}},"21":{start:{line:30,column:8},end:{line:30,column:40}},"22":{start:{line:31,column:8},end:{line:31,column:41}},"23":{start:{line:32,column:8},end:{line:32,column:37}},"24":{start:{line:34,column:8},end:{line:34,column:34}},"25":{start:{line:35,column:8},end:{line:35,column:40}},"26":{start:{line:36,column:8},end:{line:36,column:41}},"27":{start:{line:37,column:8},end:{line:37,column:42}},"28":{start:{line:38,column:8},end:{line:38,column:38}},"29":{start:{line:39,column:8},end:{line:39,column:45}},"30":{start:{line:40,column:8},end:{line:40,column:49}},"31":{start:{line:41,column:8},end:{line:41,column:47}},"32":{start:{line:42,column:8},end:{line:42,column:33}},"33":{start:{line:43,column:8},end:{line:43,column:51}},"34":{start:{line:44,column:8},end:{line:44,column:37}},"35":{start:{line:46,column:23},end:{line:46,column:202}},"36":{start:{line:48,column:8},end:{line:48,column:28}},"37":{start:{line:50,column:8},end:{line:50,column:37}},"38":{start:{line:53,column:4},end:{line:74,column:6}},"39":{start:{line:54,column:8},end:{line:61,column:10}},"40":{start:{line:55,column:25},end:{line:55,column:84}},"41":{start:{line:57,column:12},end:{line:57,column:29}},"42":{start:{line:59,column:12},end:{line:60,column:63}},"43":{start:{line:60,column:33},end:{line:60,column:62}},"44":{start:{line:63,column:8},end:{line:73,column:10}},"45":{start:{line:64,column:12},end:{line:64,column:45}},"46":{start:{line:66,column:28},end:{line:66,column:47}},"47":{start:{line:68,column:29},end:{line:68,column:36}},"48":{start:{line:70,column:12},end:{line:70,column:35}},"49":{start:{line:71,column:12},end:{line:71,column:49}},"50":{start:{line:72,column:12},end:{line:72,column:92}},"51":{start:{line:76,column:4},end:{line:93,column:6}},"52":{start:{line:78,column:8},end:{line:82,column:10}},"53":{start:{line:79,column:12},end:{line:79,column:47}},"54":{start:{line:80,column:12},end:{line:81,column:63}},"55":{start:{line:81,column:33},end:{line:81,column:62}},"56":{start:{line:83,column:8},end:{line:92,column:10}},"57":{start:{line:85,column:27},end:{line:90,column:18}},"58":{start:{line:88,column:20},end:{line:88,column:42}},"59":{start:{line:89,column:20},end:{line:89,column:88}},"60":{start:{line:95,column:4},end:{line:95,column:78}},"61":{start:{line:95,column:20},end:{line:95,column:39}},"62":{start:{line:97,column:4},end:{line:97,column:30}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:19,column:34},end:{line:19,column:35}},loc:{start:{line:19,column:40},end:{line:98,column:1}},line:19},"1":{name:"(anonymous_1)",decl:{start:{line:20,column:11},end:{line:20,column:12}},loc:{start:{line:20,column:17},end:{line:20,column:46}},line:20},"2":{name:"(anonymous_2)",decl:{start:{line:24,column:15},end:{line:24,column:16}},loc:{start:{line:24,column:27},end:{line:52,column:5}},line:24},"3":{name:"(anonymous_3)",decl:{start:{line:53,column:28},end:{line:53,column:29}},loc:{start:{line:53,column:34},end:{line:74,column:5}},line:53},"4":{name:"(anonymous_4)",decl:{start:{line:54,column:19},end:{line:54,column:20}},loc:{start:{line:54,column:31},end:{line:61,column:9}},line:54},"5":{name:"(anonymous_5)",decl:{start:{line:60,column:22},end:{line:60,column:23}},loc:{start:{line:60,column:33},end:{line:60,column:62}},line:60},"6":{name:"(anonymous_6)",decl:{start:{line:63,column:47},end:{line:63,column:48}},loc:{start:{line:63,column:59},end:{line:73,column:9}},line:63},"7":{name:"(anonymous_7)",decl:{start:{line:76,column:33},end:{line:76,column:34}},loc:{start:{line:76,column:39},end:{line:93,column:5}},line:76},"8":{name:"(anonymous_8)",decl:{start:{line:78,column:19},end:{line:78,column:20}},loc:{start:{line:78,column:30},end:{line:82,column:9}},line:78},"9":{name:"(anonymous_9)",decl:{start:{line:81,column:22},end:{line:81,column:23}},loc:{start:{line:81,column:33},end:{line:81,column:62}},line:81},"10":{name:"(anonymous_10)",decl:{start:{line:83,column:50},end:{line:83,column:51}},loc:{start:{line:83,column:62},end:{line:92,column:9}},line:83},"11":{name:"(anonymous_11)",decl:{start:{line:87,column:23},end:{line:87,column:24}},loc:{start:{line:87,column:32},end:{line:90,column:17}},line:87},"12":{name:"(anonymous_12)",decl:{start:{line:95,column:14},end:{line:95,column:15}},loc:{start:{line:95,column:20},end:{line:95,column:39}},line:95}},branchMap:{},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0},b:{},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"009a70c0bb4c12199ed2a404583438d64b5f7df1"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_163p2xd38p=function(){return actualCoverage;};}return actualCoverage;}cov_163p2xd38p();cov_163p2xd38p().s[0]++;require('dotenv').config();const{env:{TEST_MONGODB_URL:MONGODB_URL,TEST_SECRET:SECRET,TEST_API_URL:API_URL}}=(cov_163p2xd38p().s[1]++,process);const addComent=(cov_163p2xd38p().s[2]++,require('./add-coment'));const{random}=(cov_163p2xd38p().s[3]++,Math);const{expect}=(cov_163p2xd38p().s[4]++,require('chai'));cov_163p2xd38p().s[5]++;require('takemytask-commons/polyfills/json');const{utils:{jwtPromised}}=(cov_163p2xd38p().s[6]++,require('takemytask-commons'));const{mongoose,models:{User,Worker},mongoose:{ObjectId}}=(cov_163p2xd38p().s[7]++,require('takemytask-data'));const bcrypt=(cov_163p2xd38p().s[8]++,require('bcryptjs'));cov_163p2xd38p().s[9]++;require('takemytask-commons/ponyfills/xhr');const context=(cov_163p2xd38p().s[10]++,require('./context'));cov_163p2xd38p().s[11]++;context.API_URL=API_URL;cov_163p2xd38p().s[12]++;context.storage={};cov_163p2xd38p().s[13]++;describe('logic - retrive chats',()=>{cov_163p2xd38p().f[0]++;cov_163p2xd38p().s[14]++;before(()=>{cov_163p2xd38p().f[1]++;cov_163p2xd38p().s[15]++;return mongoose.connect(MONGODB_URL);});let name,surname,email,password,adress,bankAcount,description,pricingHour,jobCategories,workingDistance,workerId,coment,userId;cov_163p2xd38p().s[16]++;beforeEach(async()=>{cov_163p2xd38p().f[2]++;cov_163p2xd38p().s[17]++;await User.deleteMany();cov_163p2xd38p().s[18]++;await Worker.deleteMany();cov_163p2xd38p().s[19]++;name=`name-${random()}`;cov_163p2xd38p().s[20]++;surname=`surname-${random()}`;cov_163p2xd38p().s[21]++;email=`e-${random()}@mail.com`;cov_163p2xd38p().s[22]++;password=`password-${random()}`;cov_163p2xd38p().s[23]++;adress=`street-${random()}`;cov_163p2xd38p().s[24]++;nameW=`name-${random()}`;cov_163p2xd38p().s[25]++;surnameW=`surname-${random()}`;cov_163p2xd38p().s[26]++;emailW=`e-${random()}@mail.com`;cov_163p2xd38p().s[27]++;passwordW=`password-${random()}`;cov_163p2xd38p().s[28]++;adressW=`street-${random()}`;cov_163p2xd38p().s[29]++;bankAcount=`bankAcount-${random()}`;cov_163p2xd38p().s[30]++;presentation=`presentation-${random()}`;cov_163p2xd38p().s[31]++;description=`description-${random()}`;cov_163p2xd38p().s[32]++;pricingHour=random()*10;cov_163p2xd38p().s[33]++;jobCategories=`jobCategories-${random()}`;cov_163p2xd38p().s[34]++;workingDistance=random()*10;const worker=(cov_163p2xd38p().s[35]++,await Worker.create({name:nameW,surname:surnameW,email:emailW,password,adress,adressW,bankAcount,description,presentation,pricingHour,jobCategories,workingDistance}));cov_163p2xd38p().s[36]++;workerId=worker.id;cov_163p2xd38p().s[37]++;coment=`coment-${random()}`;});cov_163p2xd38p().s[38]++;describe('user exists',()=>{cov_163p2xd38p().f[3]++;cov_163p2xd38p().s[39]++;beforeEach(async()=>{cov_163p2xd38p().f[4]++;const user=(cov_163p2xd38p().s[40]++,await User.create({name,surname,email,password,adress}));cov_163p2xd38p().s[41]++;userId=user._id;cov_163p2xd38p().s[42]++;return jwtPromised.sign({sub:user.id},SECRET).then(token=>{cov_163p2xd38p().f[5]++;cov_163p2xd38p().s[43]++;return context.storage.token=token;});});cov_163p2xd38p().s[44]++;it('should succeed on retriving user',async()=>{cov_163p2xd38p().f[6]++;cov_163p2xd38p().s[45]++;await addComent(workerId,coment);const results=(cov_163p2xd38p().s[46]++,await Worker.find());const[worker]=(cov_163p2xd38p().s[47]++,results);cov_163p2xd38p().s[48]++;expect(worker).to.exist;cov_163p2xd38p().s[49]++;expect(worker.comentsWorker).to.exist;cov_163p2xd38p().s[50]++;expect(worker.comentsWorker[0].userId.toString()).to.be.equal(userId.toString());});});cov_163p2xd38p().s[51]++;describe('chat dont exists',()=>{cov_163p2xd38p().f[7]++;let fakeId;cov_163p2xd38p().s[52]++;beforeEach(async()=>{cov_163p2xd38p().f[8]++;cov_163p2xd38p().s[53]++;fakeId='5ee0ed9a603a0a4f3c650fe1';cov_163p2xd38p().s[54]++;return jwtPromised.sign({sub:fakeId},SECRET).then(token=>{cov_163p2xd38p().f[9]++;cov_163p2xd38p().s[55]++;return context.storage.token=token;});});cov_163p2xd38p().s[56]++;it('sould fail when user id has no chat',async()=>{cov_163p2xd38p().f[10]++;const result=(cov_163p2xd38p().s[57]++,await addComent().then().catch(error=>{cov_163p2xd38p().f[11]++;cov_163p2xd38p().s[58]++;expect(error).to.exist;cov_163p2xd38p().s[59]++;expect(error.message).to.equal(`user with id ${fakeId} dont exists`);}));});});cov_163p2xd38p().s[60]++;afterEach(()=>{cov_163p2xd38p().f[12]++;cov_163p2xd38p().s[61]++;return Worker.deleteMany();},User.deleteMany(),Chat.deleteMany());cov_163p2xd38p().s[62]++;after(mongoose.disconnect);});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFkZC1jb21lbnQuc3BlYy5qcyJdLCJuYW1lcyI6WyJyZXF1aXJlIiwiY29uZmlnIiwiZW52IiwiVEVTVF9NT05HT0RCX1VSTCIsIk1PTkdPREJfVVJMIiwiVEVTVF9TRUNSRVQiLCJTRUNSRVQiLCJURVNUX0FQSV9VUkwiLCJBUElfVVJMIiwicHJvY2VzcyIsImFkZENvbWVudCIsInJhbmRvbSIsIk1hdGgiLCJleHBlY3QiLCJ1dGlscyIsImp3dFByb21pc2VkIiwibW9uZ29vc2UiLCJtb2RlbHMiLCJVc2VyIiwiV29ya2VyIiwiT2JqZWN0SWQiLCJiY3J5cHQiLCJjb250ZXh0Iiwic3RvcmFnZSIsImRlc2NyaWJlIiwiYmVmb3JlIiwiY29ubmVjdCIsIm5hbWUiLCJzdXJuYW1lIiwiZW1haWwiLCJwYXNzd29yZCIsImFkcmVzcyIsImJhbmtBY291bnQiLCJkZXNjcmlwdGlvbiIsInByaWNpbmdIb3VyIiwiam9iQ2F0ZWdvcmllcyIsIndvcmtpbmdEaXN0YW5jZSIsIndvcmtlcklkIiwiY29tZW50IiwidXNlcklkIiwiYmVmb3JlRWFjaCIsImRlbGV0ZU1hbnkiLCJuYW1lVyIsInN1cm5hbWVXIiwiZW1haWxXIiwicGFzc3dvcmRXIiwiYWRyZXNzVyIsInByZXNlbnRhdGlvbiIsIndvcmtlciIsImNyZWF0ZSIsImlkIiwidXNlciIsIl9pZCIsInNpZ24iLCJzdWIiLCJ0aGVuIiwidG9rZW4iLCJpdCIsInJlc3VsdHMiLCJmaW5kIiwidG8iLCJleGlzdCIsImNvbWVudHNXb3JrZXIiLCJ0b1N0cmluZyIsImJlIiwiZXF1YWwiLCJmYWtlSWQiLCJyZXN1bHQiLCJjYXRjaCIsImVycm9yIiwibWVzc2FnZSIsImFmdGVyRWFjaCIsIkNoYXQiLCJhZnRlciIsImRpc2Nvbm5lY3QiXSwibWFwcGluZ3MiOiJpa05BZVk7bUhBZlpBLE9BQU8sQ0FBQyxRQUFELENBQVAsQ0FBa0JDLE1BQWxCLEdBRUEsS0FBTSxDQUFFQyxHQUFHLENBQUUsQ0FBRUMsZ0JBQWdCLENB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LHFDQUFELENBQXdDLFNBQVksMEJBRWxELEtBQU1VLENBQUFBLE1BQU0sMkJBQUcsS0FBTXpELENBQUFBLFNBQVMsR0FDekI2QyxJQURnQixHQUVoQmEsS0FGZ0IsQ0FFVkMsS0FBSyxFQUFJLG1EQUNaeEQsTUFBTSxDQUFDd0QsS0FBRCxDQUFOLENBQWNULEVBQWQsQ0FBaUJDLEtBQWpCLENBRFkseUJBRVpoRCxNQUFNLENBQUN3RCxLQUFLLENBQUNDLE9BQVAsQ0FBTixDQUFzQlYsRUFBdEIsQ0FBeUJLLEtBQXpCLENBQWdDLGdCQUFlQyxNQUFPLGNBQXRELEVBQ0gsQ0FMZ0IsQ0FBVCxDQUFaLENBT0gsQ0FUQyxDQUFGLENBVUgsQ0FqQk8sQ0FBUixDQXpEb0MseUJBNEVwQ0ssU0FBUyxDQUFDLElBQU0seURBQUFwRCxDQUFBQSxNQUFNLENBQUNzQixVQUFQLEdBQW1CLENBQTFCLENBQTRCdkIsSUFBSSxDQUFDdUIsVUFBTCxFQUE1QixDQUErQytCLElBQUksQ0FBQy9CLFVBQUwsRUFBL0MsQ0FBVCxDQTVFb0MseUJBOEVwQ2dDLEtBQUssQ0FBQ3pELFFBQVEsQ0FBQzBELFVBQVYsQ0FBTCxDQUNILENBL0VPLENBQVIiLCJzb3VyY2VzQ29udGVudCI6WyJyZXF1aXJlKCdkb3RlbnYnKS5jb25maWcoKVxyXG5cclxuY29uc3QgeyBlbnY6IHsgVEVTVF9NT05HT0RCX1VSTDogTU9OR09EQl9VUkwsIFRFU1RfU0VDUkVUOiBTRUNSRVQsIFRFU1RfQVBJX1VSTDogQVBJX1VSTCAgfSB9ID0gcHJvY2Vzc1xyXG5cclxuY29uc3QgYWRkQ29tZW50ID0gcmVxdWlyZSgnLi9hZGQtY29tZW50JylcclxuY29uc3QgeyByYW5kb20gfSA9IE1hdGhcclxuY29uc3QgeyBleHBlY3QgfSA9IHJlcXVpcmUoJ2NoYWknKVxyXG5yZXF1aXJlKCd0YWtlbXl0YXNrLWNvbW1vbnMvcG9seWZpbGxzL2pzb24nKVxyXG5jb25zdCB7IHV0aWxzOiB7IGp3dFByb21pc2VkIH0gfSA9IHJlcXVpcmUoJ3Rha2VteXRhc2stY29tbW9ucycpXHJcbmNvbnN0IHsgbW9uZ29vc2UsIG1vZGVsczoge1VzZXIsIFdvcmtlciB9LCBtb25nb29zZToge09iamVjdElkfSB9ID0gcmVxdWlyZSgndGFrZW15dGFzay1kYXRhJylcclxuY29uc3QgYmNyeXB0ID0gcmVxdWlyZSgnYmNyeXB0anMnKVxyXG5yZXF1aXJlKCd0YWtlbXl0YXNrLWNvbW1vbnMvcG9ueWZpbGxzL3hocicpXHJcbmNvbnN0IGNvbnRleHQgPSByZXF1aXJlKCcuL2NvbnRleHQnKVxyXG5cclxuY29udGV4dC5BUElfVVJMID0gQVBJX1VSTFxyXG5cclxuY29udGV4dC5zdG9yYWdlID0ge31cclxuXHJcbmRlc2NyaWJlKCdsb2dpYyAtIHJldHJpdmUgY2hhdHMnLCAoKSA9PiB7XHJcbiAgICBiZWZvcmUoKCkgPT4gbW9uZ29vc2UuY29ubmVjdChNT05HT0RCX1VSTCkpXHJcblxyXG4gICAgbGV0IG5hbWUsIHN1cm5hbWUsIGVtYWlsLCBwYXNzd29yZCwgYWRyZXNzLCBiYW5rQWNvdW50LCBkZXNjcmlwdGlvbiwgcHJpY2luZ0hvdXIsIGpvYkNhdGVnb3JpZXMsIHdvcmtpbmdEaXN0YW5jZSwgd29ya2VySWQsIGNvbWVudCwgdXNlcklkXHJcblxyXG4gICAgYmVmb3JlRWFjaChhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgYXdhaXQgVXNlci5kZWxldGVNYW55KClcclxuICAgICAgICBhd2FpdCBXb3JrZXIuZGVsZXRlTWFueSgpXHJcblxyXG4gICAgICAgIG5hbWUgPSBgbmFtZS0ke3JhbmRvbSgpfWBcclxuICAgICAgICBzdXJuYW1lID0gYHN1cm5hbWUtJHtyYW5kb20oKX1gXHJcbiAgICAgICAgZW1haWwgPSBgZS0ke3JhbmRvbSgpfUBtYWlsLmNvbWBcclxuICAgICAgICBwYXNzd29yZCA9IGBwYXNzd29yZC0ke3JhbmRvbSgpfWBcclxuICAgICAgICBhZHJlc3MgPSBgc3RyZWV0LSR7cmFuZG9tKCl9YFxyXG4gICAgXHJcbiAgICAgICAgbmFtZVcgPSBgbmFtZS0ke3JhbmRvbSgpfWBcclxuICAgICAgICBzdXJuYW1lVyA9IGBzdXJuYW1lLSR7cmFuZG9tKCl9YFxyXG4gICAgICAgIGVtYWlsVyA9IGBlLSR7cmFuZG9tKCl9QG1haWwuY29tYFxyXG4gICAgICAgIHBhc3N3b3JkVyA9IGBwYXNzd29yZC0ke3JhbmRvbSgpfWBcclxuICAgICAgICBhZHJlc3NXID0gYHN0cmVldC0ke3JhbmRvbSgpfWBcclxuICAgICAgICBiYW5rQWNvdW50ID0gYGJhbmtBY291bnQtJHtyYW5kb20oKX1gXHJcbiAgICAgICAgcHJlc2VudGF0aW9uID0gYHByZXNlbnRhdGlvbi0ke3JhbmRvbSgpfWBcclxuICAgICAgICBkZXNjcmlwdGlvbiA9IGBkZXNjcmlwdGlvbi0ke3JhbmRvbSgpfWBcclxuICAgICAgICBwcmljaW5nSG91ciA9IHJhbmRvbSgpKjEwXHJcbiAgICAgICAgam9iQ2F0ZWdvcmllcyA9IGBqb2JDYXRlZ29yaWVzLSR7cmFuZG9tKCl9YFxyXG4gICAgICAgIHdvcmtpbmdEaXN0YW5jZSA9IHJhbmRvbSgpKjEwXHJcblxyXG4gICAgICAgIGNvbnN0IHdvcmtlciA9IGF3YWl0IFdvcmtlci5jcmVhdGUoe25hbWU6IG5hbWVXLCBzdXJuYW1lOiBzdXJuYW1lVywgZW1haWw6IGVtYWlsVywgcGFzc3dvcmQsIGFkcmVzcywgYWRyZXNzVywgYmFua0Fjb3VudCwgZGVzY3JpcHRpb24sIHByZXNlbnRhdGlvbiwgcHJpY2luZ0hvdXIsIGpvYkNhdGVnb3JpZXMsIHdvcmtpbmdEaXN0YW5jZX0pXHJcblxyXG4gICAgICAgIHdvcmtlcklkID0gd29ya2VyLmlkIFxyXG5cclxuICAgICAgICBjb21lbnQgPSBgY29tZW50LSR7cmFuZG9tKCl9YFxyXG5cclxuICAgIH0pXHJcbiAgICBkZXNjcmliZSgndXNlciBleGlzdHMnLCAoKSA9PiB7XHJcbiAgICAgICAgYmVmb3JlRWFjaChhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmNyZWF0ZSh7bmFtZSwgc3VybmFtZSwgZW1haWwsIHBhc3N3b3JkLCBhZHJlc3N9KVxyXG5cclxuICAgICAgICAgICAgdXNlcklkID0gdXNlci5faWRcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBqd3RQcm9taXNlZC5zaWduKHsgc3ViOiB1c2VyLmlkIH0sIFNFQ1JFVClcclxuICAgICAgICAgICAgICAgIC50aGVuKCh0b2tlbikgPT4gY29udGV4dC5zdG9yYWdlLnRva2VuID0gdG9rZW4pXHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCBzdWNjZWVkIG9uIHJldHJpdmluZyB1c2VyJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBhd2FpdCBhZGRDb21lbnQod29ya2VySWQsIGNvbWVudClcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBXb3JrZXIuZmluZCgpXHJcblxyXG4gICAgICAgICAgICBjb25zdCBbd29ya2VyXSA9IHJlc3VsdHNcclxuXHJcbiAgICAgICAgICAgIGV4cGVjdCh3b3JrZXIpLnRvLmV4aXN0XHJcbiAgICAgICAgICAgIGV4cGVjdCh3b3JrZXIuY29tZW50c1dvcmtlcikudG8uZXhpc3RcclxuICAgICAgICAgICAgZXhwZWN0KHdvcmtlci5jb21lbnRzV29ya2VyWzBdLnVzZXJJZC50b1N0cmluZygpKS50by5iZS5lcXVhbCh1c2VySWQudG9TdHJpbmcoKSlcclxuICAgICAgICB9KVxyXG4gICAgfSlcclxuXHJcbiAgICBkZXNjcmliZSgnY2hhdCBkb250IGV4aXN0cycsICgpID0+IHtcclxuICAgICAgICBsZXQgZmFrZUlkXHJcbiAgICAgICAgYmVmb3JlRWFjaChhc3luYygpID0+IHtcclxuICAgICAgICAgICAgZmFrZUlkID0gJzVlZTBlZDlhNjAzYTBhNGYzYzY1MGZlMSdcclxuICAgICAgICAgICAgcmV0dXJuIGp3dFByb21pc2VkLnNpZ24oeyBzdWI6IGZha2VJZCB9LCBTRUNSRVQpXHJcbiAgICAgICAgICAgICAgICAudGhlbigodG9rZW4pID0+IGNvbnRleHQuc3RvcmFnZS50b2tlbiA9IHRva2VuKVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgaXQoJ3NvdWxkIGZhaWwgd2hlbiB1c2VyIGlkIGhhcyBubyBjaGF0JywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBhZGRDb21lbnQoKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oKVxyXG4gICAgICAgICAgICAgICAgLmNhdGNoKGVycm9yID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBleHBlY3QoZXJyb3IpLnRvLmV4aXN0XHJcbiAgICAgICAgICAgICAgICAgICAgZXhwZWN0KGVycm9yLm1lc3NhZ2UpLnRvLmVxdWFsKGB1c2VyIHdpdGggaWQgJHtmYWtlSWR9IGRvbnQgZXhpc3RzYClcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgIH0pXHJcbiAgICB9KVxyXG5cclxuICAgIGFmdGVyRWFjaCgoKSA9PiBXb3JrZXIuZGVsZXRlTWFueSgpLCBVc2VyLmRlbGV0ZU1hbnkoKSwgQ2hhdC5kZWxldGVNYW55KCkpXHJcblxyXG4gICAgYWZ0ZXIobW9uZ29vc2UuZGlzY29ubmVjdClcclxufSkiXX0=