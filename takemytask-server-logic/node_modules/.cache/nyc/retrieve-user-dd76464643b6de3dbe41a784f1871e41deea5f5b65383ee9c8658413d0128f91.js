function cov_1t0i18i0po(){var path="C:\\Users\\polpe\\bootcamp\\collab\\skylab-bootcamp-202004\\staff\\pol-pedro\\takemytask\\takemytask-server-logic\\retrieve-user.js";var hash="15b0c9647b53d715f0d17919ff7d6d58b6f6d32e";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\polpe\\bootcamp\\collab\\skylab-bootcamp-202004\\staff\\pol-pedro\\takemytask\\takemytask-server-logic\\retrieve-user.js",statementMap:{"0":{start:{line:1,column:0},end:{line:1,column:46}},"1":{start:{line:2,column:0},end:{line:2,column:44}},"2":{start:{line:3,column:41},end:{line:3,column:70}},"3":{start:{line:4,column:59},end:{line:4,column:85}},"4":{start:{line:18,column:0},end:{line:54,column:1}},"5":{start:{line:20,column:4},end:{line:20,column:35}},"6":{start:{line:22,column:4},end:{line:53,column:8}},"7":{start:{line:26,column:8},end:{line:51,column:9}},"8":{start:{line:27,column:12},end:{line:27,column:87}},"9":{start:{line:29,column:12},end:{line:33,column:13}},"10":{start:{line:31,column:16},end:{line:31,column:93}},"11":{start:{line:34,column:12},end:{line:34,column:87}},"12":{start:{line:34,column:22},end:{line:34,column:87}},"13":{start:{line:36,column:12},end:{line:36,column:23}},"14":{start:{line:40,column:12},end:{line:40,column:84}},"15":{start:{line:42,column:12},end:{line:46,column:13}},"16":{start:{line:44,column:16},end:{line:44,column:106}},"17":{start:{line:47,column:12},end:{line:47,column:83}},"18":{start:{line:47,column:22},end:{line:47,column:83}},"19":{start:{line:49,column:12},end:{line:49,column:23}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:18,column:17},end:{line:18,column:18}},loc:{start:{line:18,column:33},end:{line:54,column:1}},line:18},"1":{name:"(anonymous_1)",decl:{start:{line:22,column:12},end:{line:22,column:13}},loc:{start:{line:22,column:24},end:{line:53,column:5}},line:22}},branchMap:{"0":{loc:{start:{line:26,column:8},end:{line:51,column:9}},type:"if",locations:[{start:{line:26,column:8},end:{line:51,column:9}},{start:{line:26,column:8},end:{line:51,column:9}}],line:26},"1":{loc:{start:{line:29,column:12},end:{line:33,column:13}},type:"if",locations:[{start:{line:29,column:12},end:{line:33,column:13}},{start:{line:29,column:12},end:{line:33,column:13}}],line:29},"2":{loc:{start:{line:34,column:12},end:{line:34,column:87}},type:"if",locations:[{start:{line:34,column:12},end:{line:34,column:87}},{start:{line:34,column:12},end:{line:34,column:87}}],line:34},"3":{loc:{start:{line:42,column:12},end:{line:46,column:13}},type:"if",locations:[{start:{line:42,column:12},end:{line:46,column:13}},{start:{line:42,column:12},end:{line:46,column:13}}],line:42},"4":{loc:{start:{line:47,column:12},end:{line:47,column:83}},type:"if",locations:[{start:{line:47,column:12},end:{line:47,column:83}},{start:{line:47,column:12},end:{line:47,column:83}}],line:47}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0},f:{"0":0,"1":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"15b0c9647b53d715f0d17919ff7d6d58b6f6d32e"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_1t0i18i0po=function(){return actualCoverage;};}return actualCoverage;}cov_1t0i18i0po();cov_1t0i18i0po().s[0]++;require('takemytask-commons/polyfills/string');cov_1t0i18i0po().s[1]++;require('takemytask-commons/polyfills/json');const{errors:{UnexistenceError}}=(cov_1t0i18i0po().s[2]++,require('takemytask-commons'));const{models:{User,Worker},mongoose:{ObjectId}}=(cov_1t0i18i0po().s[3]++,require('takemytask-data'));/**
 * Adds a coment to worker
* @param {string} userId user or worker unique id
* @param {string} id search user or worker id
* 
* @returns {object}
*
* @throws {UnexistenceError} if user or worker dont exists
*/cov_1t0i18i0po().s[4]++;module.exports=(userId,id)=>{cov_1t0i18i0po().f[0]++;cov_1t0i18i0po().s[5]++;String.validate.notVoid(userId);cov_1t0i18i0po().s[6]++;return(async()=>{cov_1t0i18i0po().f[1]++;let user;cov_1t0i18i0po().s[7]++;if(!id){cov_1t0i18i0po().b[0][0]++;cov_1t0i18i0po().s[8]++;user=await User.findOne({_id:ObjectId(userId)},{password:0}).lean();cov_1t0i18i0po().s[9]++;if(!user){cov_1t0i18i0po().b[1][0]++;cov_1t0i18i0po().s[10]++;user=await Worker.findOne({_id:ObjectId(userId)},{password:0}).lean();}else{cov_1t0i18i0po().b[1][1]++;}cov_1t0i18i0po().s[11]++;if(!user){cov_1t0i18i0po().b[2][0]++;cov_1t0i18i0po().s[12]++;throw new UnexistenceError(`user with id: ${userId} dont exists`);}else{cov_1t0i18i0po().b[2][1]++;}cov_1t0i18i0po().s[13]++;return user;}else{cov_1t0i18i0po().b[0][1]++;cov_1t0i18i0po().s[14]++;user=await User.findOne({_id:ObjectId(id)},{password:0}).lean();cov_1t0i18i0po().s[15]++;if(!user){cov_1t0i18i0po().b[3][0]++;cov_1t0i18i0po().s[16]++;user=await Worker.findOne({_id:ObjectId(id)},{password:0},{bankAcount:0}).lean();}else{cov_1t0i18i0po().b[3][1]++;}cov_1t0i18i0po().s[17]++;if(!user){cov_1t0i18i0po().b[4][0]++;cov_1t0i18i0po().s[18]++;throw new UnexistenceError(`user with id: ${id} dont exists`);}else{cov_1t0i18i0po().b[4][1]++;}cov_1t0i18i0po().s[19]++;return user;}})();};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJldHJpZXZlLXVzZXIuanMiXSwibmFtZXMiOlsicmVxdWlyZSIsImVycm9ycyIsIlVuZXhpc3RlbmNlRXJyb3IiLCJtb2RlbHMiLCJVc2VyIiwiV29ya2VyIiwibW9uZ29vc2UiLCJPYmplY3RJZCIsIm1vZHVsZSIsImV4cG9ydHMiLCJ1c2VySWQiLCJpZCIsIlN0cmluZyIsInZhbGlkYXRlIiwibm90Vm9pZCIsInVzZXIiLCJmaW5kT25lIiwiX2lkIiwicGFzc3dvcmQiLCJsZWFuIiwiYmFua0Fjb3VudCJdLCJtYXBwaW5ncyI6Ijh2R0FlWTttSEFmWkEsT0FBTyxDQUFDLHFDQUFELENBQVAsQyx3QkFDQUEsT0FBTyxDQUFDLG1DQUFELENBQVAsQ0FDQSxLQUFNLENBQUVDLE1BQU0sQ0FBRSxDQUFFQyxnQkFBRixDQUFWLDJCQUFtQ0YsT0FBTyxDQUFDLG9CQUFELENBQTFDLENBQU4sQ0FDQSxLQUFNLENBQUVHLE1BQU0sQ0FBRSxDQUFFQyxJQUFGLENBQVFDLE1BQVIsQ0FBVixDQUE0QkMsUUFBUSxDQUFFLENBQUNDLFFBQUQsQ0FBdEMsMkJBQXFEUCxPQUFPLENBQUMsaUJBQUQsQ0FBNUQsQ0FBTixDQUVBOzs7Ozs7OzswQkFZQVEsTUFBTSxDQUFDQyxPQUFQLENBQWlCLENBQUNDLE1BQUQsQ0FBU0MsRUFBVCxHQUFnQixpREFFN0JDLE1BQU0sQ0FBQ0MsUUFBUCxDQUFnQkMsT0FBaEIsQ0FBd0JKLE1BQXhCLEVBRjZCLHdCQUk3QixNQUFPLENBQUMsU0FBWSx5QkFFaEIsR0FBSUssQ0FBQUEsSUFBSixDQUZnQix3QkFJaEIsR0FBRyxDQUFDSixFQUFKLENBQVEsb0RBQ0pJLElBQUksQ0FBRyxLQUFNWCxDQUFBQSxJQUFJLENBQUNZLE9BQUwsQ0FBYSxDQUFFQyxHQUFHLENBQUVWLFFBQVEsQ0FBQ0csTUFBRCxDQUFmLENBQWIsQ0FBd0MsQ0FBQ1EsUUFBUSxDQUFFLENBQVgsQ0FBeEMsRUFBd0RDLElBQXhELEVBQWIsQ0FESSx3QkFHSixHQUFJLENBQUNKLElBQUwsQ0FBVSxxREFFTkEsSUFBSSxDQUFHLEtBQU1WLENBQUFBLE1BQU0sQ0FBQ1csT0FBUCxDQUFlLENBQUVDLEdBQUcsQ0FBRVYsUUFBUSxDQUFDRyxNQUFELENBQWYsQ0FBZixDQUEwQyxDQUFDUSxRQUFRLENBQUUsQ0FBWCxDQUExQyxFQUEwREMsSUFBMUQsRUFBYixDQUVILENBSkQsaUNBSEkseUJBUUosR0FBRyxDQUFDSixJQUFKLENBQVUsMERBQU0sSUFBSWIsQ0FBQUEsZ0JBQUosQ0FBc0IsaUJBQWdCUSxNQUFPLGNBQTdDLENBQU4sQ0FBaUUsQ0FBM0UsaUNBUkkseUJBVUosTUFBT0ssQ0FBQUEsSUFBUCxDQUVILENBWkQsSUFZSyxxREFFREEsSUFBSSxDQUFHLEtBQU1YLENBQUFBLElBQUksQ0FBQ1ksT0FBTCxDQUFhLENBQUVDLEdBQUcsQ0FBRVYsUUFBUSxDQUFDSSxFQUFELENBQWYsQ0FBYixDQUFvQyxDQUFDTyxRQUFRLENBQUUsQ0FBWCxDQUFwQyxFQUFxREMsSUFBckQsRUFBYixDQUZDLHlCQUlELEdBQUksQ0FBQ0osSUFBTCxDQUFVLHFEQUVOQSxJQUFJLENBQUcsS0FBTVYsQ0FBQUEsTUFBTSxDQUFDVyxPQUFQLENBQWUsQ0FBRUMsR0FBRyxDQUFFVixRQUFRLENBQUNJLEVBQUQsQ0FBZixDQUFmLENBQXNDLENBQUNPLFFBQVEsQ0FBRSxDQUFYLENBQXRDLENBQXNELENBQUNFLFVBQVUsQ0FBRSxDQUFiLENBQXRELEVBQXVFRCxJQUF2RSxFQUFiLENBRUgsQ0FKRCxpQ0FKQyx5QkFTRCxHQUFHLENBQUNKLElBQUosQ0FBVSwwREFBTSxJQUFJYixDQUFBQSxnQkFBSixDQUFzQixpQkFBZ0JTLEVBQUcsY0FBekMsQ0FBTixDQUE2RCxDQUF2RSxpQ0FUQyx5QkFXRCxNQUFPSSxDQUFBQSxJQUFQLENBRUgsQ0FFSixDQS9CTSxHQUFQLENBZ0NILENBcENEIiwic291cmNlc0NvbnRlbnQiOlsicmVxdWlyZSgndGFrZW15dGFzay1jb21tb25zL3BvbHlmaWxscy9zdHJpbmcnKVxyXG5yZXF1aXJlKCd0YWtlbXl0YXNrLWNvbW1vbnMvcG9seWZpbGxzL2pzb24nKVxyXG5jb25zdCB7IGVycm9yczogeyBVbmV4aXN0ZW5jZUVycm9yIH0gfSA9IHJlcXVpcmUoJ3Rha2VteXRhc2stY29tbW9ucycpXHJcbmNvbnN0IHsgbW9kZWxzOiB7IFVzZXIsIFdvcmtlciB9LCBtb25nb29zZToge09iamVjdElkfSB9ID0gcmVxdWlyZSgndGFrZW15dGFzay1kYXRhJylcclxuXHJcbi8qKlxyXG4gKiBBZGRzIGEgY29tZW50IHRvIHdvcmtlclxyXG4qIEBwYXJhbSB7c3RyaW5nfSB1c2VySWQgdXNlciBvciB3b3JrZXIgdW5pcXVlIGlkXHJcbiogQHBhcmFtIHtzdHJpbmd9IGlkIHNlYXJjaCB1c2VyIG9yIHdvcmtlciBpZFxyXG4qIFxyXG4qIEByZXR1cm5zIHtvYmplY3R9XHJcbipcclxuKiBAdGhyb3dzIHtVbmV4aXN0ZW5jZUVycm9yfSBpZiB1c2VyIG9yIHdvcmtlciBkb250IGV4aXN0c1xyXG4qL1xyXG5cclxuXHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9ICh1c2VySWQsIGlkKSA9PiB7XHJcblxyXG4gICAgU3RyaW5nLnZhbGlkYXRlLm5vdFZvaWQodXNlcklkKVxyXG5cclxuICAgIHJldHVybiAoYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgIFxyXG4gICAgICAgIGxldCB1c2VyIFxyXG5cclxuICAgICAgICBpZighaWQpIHtcclxuICAgICAgICAgICAgdXNlciA9IGF3YWl0IFVzZXIuZmluZE9uZSh7IF9pZDogT2JqZWN0SWQodXNlcklkKSB9LCB7cGFzc3dvcmQ6IDAgfSkubGVhbigpXHJcblxyXG4gICAgICAgICAgICBpZiAoIXVzZXIpe1xyXG5cclxuICAgICAgICAgICAgICAgIHVzZXIgPSBhd2FpdCBXb3JrZXIuZmluZE9uZSh7IF9pZDogT2JqZWN0SWQodXNlcklkKSB9LCB7cGFzc3dvcmQ6IDAgfSkubGVhbigpXHJcblxyXG4gICAgICAgICAgICB9IFxyXG4gICAgICAgICAgICBpZighdXNlcikgdGhyb3cgbmV3IFVuZXhpc3RlbmNlRXJyb3IoYHVzZXIgd2l0aCBpZDogJHt1c2VySWR9IGRvbnQgZXhpc3RzYClcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB1c2VyXHJcblxyXG4gICAgICAgIH1lbHNle1xyXG5cclxuICAgICAgICAgICAgdXNlciA9IGF3YWl0IFVzZXIuZmluZE9uZSh7IF9pZDogT2JqZWN0SWQoaWQpIH0sIHtwYXNzd29yZDogMCB9ICkubGVhbigpXHJcblxyXG4gICAgICAgICAgICBpZiAoIXVzZXIpe1xyXG5cclxuICAgICAgICAgICAgICAgIHVzZXIgPSBhd2FpdCBXb3JrZXIuZmluZE9uZSh7IF9pZDogT2JqZWN0SWQoaWQpIH0sIHtwYXNzd29yZDogMCB9LCB7YmFua0Fjb3VudDogMH0pLmxlYW4oKVxyXG5cclxuICAgICAgICAgICAgfSBcclxuICAgICAgICAgICAgaWYoIXVzZXIpIHRocm93IG5ldyBVbmV4aXN0ZW5jZUVycm9yKGB1c2VyIHdpdGggaWQ6ICR7aWR9IGRvbnQgZXhpc3RzYClcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB1c2VyXHJcblxyXG4gICAgICAgIH0gICBcclxuXHJcbiAgICB9KSgpXHJcbn0iXX0=