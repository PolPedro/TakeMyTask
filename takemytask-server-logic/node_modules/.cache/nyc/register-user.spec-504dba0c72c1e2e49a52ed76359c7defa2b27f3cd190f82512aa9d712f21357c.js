function cov_1slk83suxi(){var path="C:\\Users\\polpe\\bootcamp\\collab\\skylab-bootcamp-202004\\staff\\pol-pedro\\takemytask\\takemytask-server-logic\\register-user.spec.js";var hash="1cc88c3b524ba583cb1bbd380e9d34558d49ae8a";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\polpe\\bootcamp\\collab\\skylab-bootcamp-202004\\staff\\pol-pedro\\takemytask\\takemytask-server-logic\\register-user.spec.js",statementMap:{"0":{start:{line:1,column:0},end:{line:1,column:26}},"1":{start:{line:3,column:51},end:{line:3,column:58}},"2":{start:{line:5,column:21},end:{line:5,column:47}},"3":{start:{line:6,column:19},end:{line:6,column:23}},"4":{start:{line:7,column:19},end:{line:7,column:34}},"5":{start:{line:8,column:0},end:{line:8,column:44}},"6":{start:{line:9,column:39},end:{line:9,column:65}},"7":{start:{line:10,column:15},end:{line:10,column:34}},"8":{start:{line:12,column:0},end:{line:81,column:2}},"9":{start:{line:13,column:4},end:{line:13,column:47}},"10":{start:{line:13,column:17},end:{line:13,column:46}},"11":{start:{line:17,column:4},end:{line:25,column:6}},"12":{start:{line:18,column:8},end:{line:18,column:31}},"13":{start:{line:20,column:8},end:{line:20,column:33}},"14":{start:{line:21,column:8},end:{line:21,column:39}},"15":{start:{line:22,column:8},end:{line:22,column:40}},"16":{start:{line:23,column:8},end:{line:23,column:41}},"17":{start:{line:24,column:8},end:{line:24,column:37}},"18":{start:{line:27,column:4},end:{line:46,column:6}},"19":{start:{line:28,column:23},end:{line:28,column:81}},"20":{start:{line:30,column:8},end:{line:30,column:38}},"21":{start:{line:32,column:22},end:{line:32,column:39}},"22":{start:{line:34,column:8},end:{line:34,column:40}},"23":{start:{line:36,column:23},end:{line:36,column:28}},"24":{start:{line:38,column:8},end:{line:38,column:40}},"25":{start:{line:39,column:8},end:{line:39,column:46}},"26":{start:{line:40,column:8},end:{line:40,column:42}},"27":{start:{line:41,column:8},end:{line:41,column:44}},"28":{start:{line:43,column:22},end:{line:43,column:67}},"29":{start:{line:45,column:8},end:{line:45,column:32}},"30":{start:{line:48,column:4},end:{line:57,column:6}},"31":{start:{line:49,column:8},end:{line:56,column:9}},"32":{start:{line:51,column:27},end:{line:51,column:90}},"33":{start:{line:52,column:12},end:{line:52,column:35}},"34":{start:{line:54,column:12},end:{line:54,column:34}},"35":{start:{line:55,column:12},end:{line:55,column:71}},"36":{start:{line:61,column:4},end:{line:76,column:6}},"37":{start:{line:62,column:8},end:{line:62,column:81}},"38":{start:{line:62,column:25},end:{line:62,column:80}},"39":{start:{line:64,column:8},end:{line:75,column:10}},"40":{start:{line:65,column:12},end:{line:74,column:13}},"41":{start:{line:66,column:16},end:{line:66,column:74}},"42":{start:{line:68,column:16},end:{line:68,column:62}},"43":{start:{line:70,column:16},end:{line:70,column:38}},"44":{start:{line:72,column:16},end:{line:72,column:56}},"45":{start:{line:73,column:16},end:{line:73,column:90}},"46":{start:{line:78,column:4},end:{line:78,column:38}},"47":{start:{line:78,column:20},end:{line:78,column:37}},"48":{start:{line:80,column:4},end:{line:80,column:30}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:12,column:34},end:{line:12,column:35}},loc:{start:{line:12,column:40},end:{line:81,column:1}},line:12},"1":{name:"(anonymous_1)",decl:{start:{line:13,column:11},end:{line:13,column:12}},loc:{start:{line:13,column:17},end:{line:13,column:46}},line:13},"2":{name:"(anonymous_2)",decl:{start:{line:17,column:15},end:{line:17,column:16}},loc:{start:{line:17,column:27},end:{line:25,column:5}},line:17},"3":{name:"(anonymous_3)",decl:{start:{line:27,column:39},end:{line:27,column:40}},loc:{start:{line:27,column:51},end:{line:46,column:5}},line:27},"4":{name:"(anonymous_4)",decl:{start:{line:48,column:42},end:{line:48,column:43}},loc:{start:{line:48,column:54},end:{line:57,column:5}},line:48},"5":{name:"(anonymous_5)",decl:{start:{line:61,column:41},end:{line:61,column:42}},loc:{start:{line:61,column:47},end:{line:76,column:5}},line:61},"6":{name:"(anonymous_6)",decl:{start:{line:62,column:19},end:{line:62,column:20}},loc:{start:{line:62,column:25},end:{line:62,column:80}},line:62},"7":{name:"(anonymous_7)",decl:{start:{line:64,column:65},end:{line:64,column:66}},loc:{start:{line:64,column:77},end:{line:75,column:9}},line:64},"8":{name:"(anonymous_8)",decl:{start:{line:78,column:14},end:{line:78,column:15}},loc:{start:{line:78,column:20},end:{line:78,column:37}},line:78}},branchMap:{},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0},b:{},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"1cc88c3b524ba583cb1bbd380e9d34558d49ae8a"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_1slk83suxi=function(){return actualCoverage;};}return actualCoverage;}cov_1slk83suxi();cov_1slk83suxi().s[0]++;require('dotenv').config();const{env:{TEST_MONGODB_URL:MONGODB_URL}}=(cov_1slk83suxi().s[1]++,process);const registerUser=(cov_1slk83suxi().s[2]++,require('./register-user'));const{random}=(cov_1slk83suxi().s[3]++,Math);const{expect}=(cov_1slk83suxi().s[4]++,require('chai'));cov_1slk83suxi().s[5]++;require('takemytask-commons/polyfills/json');const{mongoose,models:{User}}=(cov_1slk83suxi().s[6]++,require('takemytask-data'));const bcrypt=(cov_1slk83suxi().s[7]++,require('bcryptjs'));cov_1slk83suxi().s[8]++;describe('logic - register user',()=>{cov_1slk83suxi().f[0]++;cov_1slk83suxi().s[9]++;before(()=>{cov_1slk83suxi().f[1]++;cov_1slk83suxi().s[10]++;return mongoose.connect(MONGODB_URL);});let name,surname,email,password,adress;cov_1slk83suxi().s[11]++;beforeEach(async()=>{cov_1slk83suxi().f[2]++;cov_1slk83suxi().s[12]++;await User.deleteMany();cov_1slk83suxi().s[13]++;name=`name-${random()}`;cov_1slk83suxi().s[14]++;surname=`surname-${random()}`;cov_1slk83suxi().s[15]++;email=`e-${random()}@mail.com`;cov_1slk83suxi().s[16]++;password=`password-${random()}`;cov_1slk83suxi().s[17]++;adress=`street-${random()}`;});cov_1slk83suxi().s[18]++;it('should succeed on valid data',async()=>{cov_1slk83suxi().f[3]++;const result=(cov_1slk83suxi().s[19]++,await registerUser(name,surname,email,password,adress));cov_1slk83suxi().s[20]++;expect(result).to.be.undefined;const users=(cov_1slk83suxi().s[21]++,await User.find());cov_1slk83suxi().s[22]++;expect(users.length).to.equal(1);const[user]=(cov_1slk83suxi().s[23]++,users);cov_1slk83suxi().s[24]++;expect(user.name).to.equal(name);cov_1slk83suxi().s[25]++;expect(user.surname).to.equal(surname);cov_1slk83suxi().s[26]++;expect(user.email).to.equal(email);cov_1slk83suxi().s[27]++;expect(user.adress).to.equal(adress);const match=(cov_1slk83suxi().s[28]++,await bcrypt.compare(password,user.password));cov_1slk83suxi().s[29]++;expect(match).to.be.true;});cov_1slk83suxi().s[30]++;it('should fail on invalid argument',async()=>{cov_1slk83suxi().f[4]++;cov_1slk83suxi().s[31]++;try{const result=(cov_1slk83suxi().s[32]++,await registerUser(undefined,surname,email,password,adress));cov_1slk83suxi().s[33]++;expect(result).to.exist;}catch(error){cov_1slk83suxi().s[34]++;expect(error).to.exist;cov_1slk83suxi().s[35]++;expect(error.message).to.equal('undefined is not a string');}});cov_1slk83suxi().s[36]++;describe('when user already exists',()=>{cov_1slk83suxi().f[5]++;cov_1slk83suxi().s[37]++;beforeEach(()=>{cov_1slk83suxi().f[6]++;cov_1slk83suxi().s[38]++;return User.create({name,surname,email,password,adress});});cov_1slk83suxi().s[39]++;it('should fail on trying to register an existing user',async()=>{cov_1slk83suxi().f[7]++;cov_1slk83suxi().s[40]++;try{cov_1slk83suxi().s[41]++;await registerUser(name,surname,email,password,adress);cov_1slk83suxi().s[42]++;throw new Error('should not reach this point');}catch(error){cov_1slk83suxi().s[43]++;expect(error).to.exist;cov_1slk83suxi().s[44]++;expect(error).to.be.an.instanceof(Error);cov_1slk83suxi().s[45]++;expect(error.message).to.equal(`user with e-mail ${email} already exists`);}});});cov_1slk83suxi().s[46]++;afterEach(()=>{cov_1slk83suxi().f[8]++;cov_1slk83suxi().s[47]++;return User.deleteMany();});cov_1slk83suxi().s[48]++;after(mongoose.disconnect);});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlZ2lzdGVyLXVzZXIuc3BlYy5qcyJdLCJuYW1lcyI6WyJyZXF1aXJlIiwiY29uZmlnIiwiZW52IiwiVEVTVF9NT05HT0RCX1VSTCIsIk1PTkdPREJfVVJMIiwicHJvY2VzcyIsInJlZ2lzdGVyVXNlciIsInJhbmRvbSIsIk1hdGgiLCJleHBlY3QiLCJtb25nb29zZSIsIm1vZGVscyIsIlVzZXIiLCJiY3J5cHQiLCJkZXNjcmliZSIsImJlZm9yZSIsImNvbm5lY3QiLCJuYW1lIiwic3VybmFtZSIsImVtYWlsIiwicGFzc3dvcmQiLCJhZHJlc3MiLCJiZWZvcmVFYWNoIiwiZGVsZXRlTWFueSIsIml0IiwicmVzdWx0IiwidG8iLCJiZSIsInVuZGVmaW5lZCIsInVzZXJzIiwiZmluZCIsImxlbmd0aCIsImVxdWFsIiwidXNlciIsIm1hdGNoIiwiY29tcGFyZSIsInRydWUiLCJleGlzdCIsImVycm9yIiwibWVzc2FnZSIsImNyZWF0ZSIsIkVycm9yIiwiYW4iLCJpbnN0YW5jZW9mIiwiYWZ0ZXJFYWNoIiwiYWZ0ZXIiLCJkaXNjb25uZWN0Il0sIm1hcHBpbmdzIjoiOGxLQWVZO21IQWZaQSxPQUFPLENBQUMsUUFBRCxDQUFQLENBQWtCQyxNQUFsQixHQUVBLEtBQU0sQ0FBRUMsR0FBRyxDQUFFLENBQUVDLGdCQUFnQixDQUFFQyxXQUFwQixDQUFQLDJCQUE2Q0MsT0FBN0MsQ0FBTixDQUVBLEtBQU1DLENBQUFBLFlBQVksMEJBQUdOLE9BQU8sQ0FBQyxpQkFBRCxDQUFWLENBQWxCLENBQ0EsS0FBTSxDQUFFTyxNQUFGLDJCQUFhQyxJQUFiLENBQU4sQ0FDQSxLQUFNLENBQUVDLE1BQUYsMkJBQWFULE9BQU8sQ0FBQyxNQUFELENBQXBCLENBQU4sQyx3QkFDQUEsT0FBTyxDQUFDLG1DQUFELENBQVAsQ0FDQSxLQUFNLENBQUVVLFFBQUYsQ0FBWUMsTUFBTSxDQUFFLENBQUVDLElBQUYsQ0FBcEIsMkJBQWlDWixPQUFPLENBQUMsaUJBQUQsQ0FBeEMsQ0FBTixD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Q0FBVCxDQWxFb0MseUJBb0VwQ3NCLEtBQUssQ0FBQ25DLFFBQVEsQ0FBQ29DLFVBQVYsQ0FBTCxDQUNILENBckVPLENBQVIiLCJzb3VyY2VzQ29udGVudCI6WyJyZXF1aXJlKCdkb3RlbnYnKS5jb25maWcoKVxyXG5cclxuY29uc3QgeyBlbnY6IHsgVEVTVF9NT05HT0RCX1VSTDogTU9OR09EQl9VUkwgfSB9ID0gcHJvY2Vzc1xyXG5cclxuY29uc3QgcmVnaXN0ZXJVc2VyID0gcmVxdWlyZSgnLi9yZWdpc3Rlci11c2VyJylcclxuY29uc3QgeyByYW5kb20gfSA9IE1hdGhcclxuY29uc3QgeyBleHBlY3QgfSA9IHJlcXVpcmUoJ2NoYWknKVxyXG5yZXF1aXJlKCd0YWtlbXl0YXNrLWNvbW1vbnMvcG9seWZpbGxzL2pzb24nKVxyXG5jb25zdCB7IG1vbmdvb3NlLCBtb2RlbHM6IHsgVXNlciB9IH0gPSByZXF1aXJlKCd0YWtlbXl0YXNrLWRhdGEnKVxyXG5jb25zdCBiY3J5cHQgPSByZXF1aXJlKCdiY3J5cHRqcycpXHJcblxyXG5kZXNjcmliZSgnbG9naWMgLSByZWdpc3RlciB1c2VyJywgKCkgPT4ge1xyXG4gICAgYmVmb3JlKCgpID0+IG1vbmdvb3NlLmNvbm5lY3QoTU9OR09EQl9VUkwpKVxyXG5cclxuICAgIGxldCBuYW1lLCBzdXJuYW1lLCBlbWFpbCwgcGFzc3dvcmQsIGFkcmVzc1xyXG5cclxuICAgIGJlZm9yZUVhY2goYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgIGF3YWl0IFVzZXIuZGVsZXRlTWFueSgpXHJcblxyXG4gICAgICAgIG5hbWUgPSBgbmFtZS0ke3JhbmRvbSgpfWBcclxuICAgICAgICBzdXJuYW1lID0gYHN1cm5hbWUtJHtyYW5kb20oKX1gXHJcbiAgICAgICAgZW1haWwgPSBgZS0ke3JhbmRvbSgpfUBtYWlsLmNvbWBcclxuICAgICAgICBwYXNzd29yZCA9IGBwYXNzd29yZC0ke3JhbmRvbSgpfWBcclxuICAgICAgICBhZHJlc3MgPSBgc3RyZWV0LSR7cmFuZG9tKCl9YFxyXG4gICAgfSlcclxuXHJcbiAgICBpdCgnc2hvdWxkIHN1Y2NlZWQgb24gdmFsaWQgZGF0YScsIGFzeW5jICgpID0+IHtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZWdpc3RlclVzZXIobmFtZSwgc3VybmFtZSwgZW1haWwsIHBhc3N3b3JkLCBhZHJlc3MpXHJcblxyXG4gICAgICAgIGV4cGVjdChyZXN1bHQpLnRvLmJlLnVuZGVmaW5lZFxyXG5cclxuICAgICAgICBjb25zdCB1c2VycyA9IGF3YWl0IFVzZXIuZmluZCgpXHJcblxyXG4gICAgICAgIGV4cGVjdCh1c2Vycy5sZW5ndGgpLnRvLmVxdWFsKDEpXHJcblxyXG4gICAgICAgIGNvbnN0IFt1c2VyXSA9IHVzZXJzXHJcblxyXG4gICAgICAgIGV4cGVjdCh1c2VyLm5hbWUpLnRvLmVxdWFsKG5hbWUpXHJcbiAgICAgICAgZXhwZWN0KHVzZXIuc3VybmFtZSkudG8uZXF1YWwoc3VybmFtZSlcclxuICAgICAgICBleHBlY3QodXNlci5lbWFpbCkudG8uZXF1YWwoZW1haWwpXHJcbiAgICAgICAgZXhwZWN0KHVzZXIuYWRyZXNzKS50by5lcXVhbChhZHJlc3MpXHJcblxyXG4gICAgICAgIGNvbnN0IG1hdGNoID0gYXdhaXQgYmNyeXB0LmNvbXBhcmUocGFzc3dvcmQsIHVzZXIucGFzc3dvcmQpXHJcblxyXG4gICAgICAgIGV4cGVjdChtYXRjaCkudG8uYmUudHJ1ZVxyXG4gICAgfSlcclxuXHJcbiAgICBpdCgnc2hvdWxkIGZhaWwgb24gaW52YWxpZCBhcmd1bWVudCcsIGFzeW5jICgpID0+IHtcclxuICAgICAgICB0cnl7XHJcblxyXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZWdpc3RlclVzZXIodW5kZWZpbmVkLCBzdXJuYW1lLCBlbWFpbCwgcGFzc3dvcmQsIGFkcmVzcylcclxuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdCkudG8uZXhpc3RcclxuICAgICAgICB9Y2F0Y2goZXJyb3Ipe1xyXG4gICAgICAgICAgICBleHBlY3QoZXJyb3IpLnRvLmV4aXN0XHJcbiAgICAgICAgICAgIGV4cGVjdChlcnJvci5tZXNzYWdlKS50by5lcXVhbCgndW5kZWZpbmVkIGlzIG5vdCBhIHN0cmluZycpXHJcbiAgICAgICAgfVxyXG4gICAgfSlcclxuXHJcblxyXG5cclxuICAgIGRlc2NyaWJlKCd3aGVuIHVzZXIgYWxyZWFkeSBleGlzdHMnLCAoKSA9PiB7XHJcbiAgICAgICAgYmVmb3JlRWFjaCgoKSA9PiBVc2VyLmNyZWF0ZSh7IG5hbWUsIHN1cm5hbWUsIGVtYWlsLCBwYXNzd29yZCwgYWRyZXNzIH0pKVxyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIGZhaWwgb24gdHJ5aW5nIHRvIHJlZ2lzdGVyIGFuIGV4aXN0aW5nIHVzZXInLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCByZWdpc3RlclVzZXIobmFtZSwgc3VybmFtZSwgZW1haWwsIHBhc3N3b3JkLCBhZHJlc3MpXHJcblxyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdzaG91bGQgbm90IHJlYWNoIHRoaXMgcG9pbnQnKVxyXG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgZXhwZWN0KGVycm9yKS50by5leGlzdFxyXG5cclxuICAgICAgICAgICAgICAgIGV4cGVjdChlcnJvcikudG8uYmUuYW4uaW5zdGFuY2VvZihFcnJvcilcclxuICAgICAgICAgICAgICAgIGV4cGVjdChlcnJvci5tZXNzYWdlKS50by5lcXVhbChgdXNlciB3aXRoIGUtbWFpbCAke2VtYWlsfSBhbHJlYWR5IGV4aXN0c2ApXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgfSlcclxuXHJcbiAgICBhZnRlckVhY2goKCkgPT4gVXNlci5kZWxldGVNYW55KCkpXHJcblxyXG4gICAgYWZ0ZXIobW9uZ29vc2UuZGlzY29ubmVjdClcclxufSkiXX0=