function cov_cwrrqdkgu(){var path="C:\\Users\\polpe\\bootcamp\\collab\\skylab-bootcamp-202004\\staff\\pol-pedro\\takemytask\\takemytask-server-logic\\retrieve-user.spec.js";var hash="29fee9eff8187c9dd9fa65a8b2b7019a58dc9373";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\polpe\\bootcamp\\collab\\skylab-bootcamp-202004\\staff\\pol-pedro\\takemytask\\takemytask-server-logic\\retrieve-user.spec.js",statementMap:{"0":{start:{line:1,column:0},end:{line:1,column:26}},"1":{start:{line:3,column:51},end:{line:3,column:58}},"2":{start:{line:5,column:20},end:{line:5,column:46}},"3":{start:{line:6,column:19},end:{line:6,column:23}},"4":{start:{line:7,column:19},end:{line:7,column:34}},"5":{start:{line:8,column:0},end:{line:8,column:44}},"6":{start:{line:9,column:39},end:{line:9,column:65}},"7":{start:{line:10,column:15},end:{line:10,column:34}},"8":{start:{line:12,column:0},end:{line:56,column:2}},"9":{start:{line:13,column:4},end:{line:13,column:47}},"10":{start:{line:13,column:17},end:{line:13,column:46}},"11":{start:{line:15,column:19},end:{line:15,column:45}},"12":{start:{line:18,column:4},end:{line:32,column:6}},"13":{start:{line:19,column:8},end:{line:19,column:31}},"14":{start:{line:21,column:8},end:{line:21,column:33}},"15":{start:{line:22,column:8},end:{line:22,column:39}},"16":{start:{line:23,column:8},end:{line:23,column:40}},"17":{start:{line:24,column:8},end:{line:24,column:41}},"18":{start:{line:25,column:8},end:{line:25,column:37}},"19":{start:{line:27,column:21},end:{line:27,column:52}},"20":{start:{line:29,column:8},end:{line:29,column:80}},"21":{start:{line:31,column:8},end:{line:31,column:24}},"22":{start:{line:34,column:4},end:{line:41,column:6}},"23":{start:{line:35,column:23},end:{line:35,column:48}},"24":{start:{line:36,column:12},end:{line:36,column:35}},"25":{start:{line:37,column:12},end:{line:37,column:54}},"26":{start:{line:38,column:12},end:{line:38,column:60}},"27":{start:{line:39,column:12},end:{line:39,column:56}},"28":{start:{line:40,column:12},end:{line:40,column:58}},"29":{start:{line:43,column:4},end:{line:49,column:6}},"30":{start:{line:44,column:8},end:{line:48,column:14}},"31":{start:{line:46,column:16},end:{line:46,column:38}},"32":{start:{line:47,column:16},end:{line:47,column:88}},"33":{start:{line:53,column:4},end:{line:53,column:38}},"34":{start:{line:53,column:20},end:{line:53,column:37}},"35":{start:{line:55,column:4},end:{line:55,column:30}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:12,column:34},end:{line:12,column:35}},loc:{start:{line:12,column:40},end:{line:56,column:1}},line:12},"1":{name:"(anonymous_1)",decl:{start:{line:13,column:11},end:{line:13,column:12}},loc:{start:{line:13,column:17},end:{line:13,column:46}},line:13},"2":{name:"(anonymous_2)",decl:{start:{line:18,column:15},end:{line:18,column:16}},loc:{start:{line:18,column:27},end:{line:32,column:5}},line:18},"3":{name:"(anonymous_3)",decl:{start:{line:34,column:43},end:{line:34,column:44}},loc:{start:{line:34,column:55},end:{line:41,column:5}},line:34},"4":{name:"(anonymous_4)",decl:{start:{line:43,column:40},end:{line:43,column:41}},loc:{start:{line:43,column:52},end:{line:49,column:5}},line:43},"5":{name:"(anonymous_5)",decl:{start:{line:45,column:20},end:{line:45,column:21}},loc:{start:{line:45,column:29},end:{line:48,column:13}},line:45},"6":{name:"(anonymous_6)",decl:{start:{line:53,column:14},end:{line:53,column:15}},loc:{start:{line:53,column:20},end:{line:53,column:37}},line:53}},branchMap:{},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0},b:{},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"29fee9eff8187c9dd9fa65a8b2b7019a58dc9373"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_cwrrqdkgu=function(){return actualCoverage;};}return actualCoverage;}cov_cwrrqdkgu();cov_cwrrqdkgu().s[0]++;require('dotenv').config();const{env:{TEST_MONGODB_URL:MONGODB_URL}}=(cov_cwrrqdkgu().s[1]++,process);const retriveUser=(cov_cwrrqdkgu().s[2]++,require('./retrieve-user'));const{random}=(cov_cwrrqdkgu().s[3]++,Math);const{expect}=(cov_cwrrqdkgu().s[4]++,require('chai'));cov_cwrrqdkgu().s[5]++;require('takemytask-commons/polyfills/json');const{mongoose,models:{User}}=(cov_cwrrqdkgu().s[6]++,require('takemytask-data'));const bcrypt=(cov_cwrrqdkgu().s[7]++,require('bcryptjs'));cov_cwrrqdkgu().s[8]++;describe('logic - register user',()=>{cov_cwrrqdkgu().f[0]++;cov_cwrrqdkgu().s[9]++;before(()=>{cov_cwrrqdkgu().f[1]++;cov_cwrrqdkgu().s[10]++;return mongoose.connect(MONGODB_URL);});const fakeId=(cov_cwrrqdkgu().s[11]++,'5ee0ed9a603a0a4f3c650fe1');let name,surname,email,password,adress,user;cov_cwrrqdkgu().s[12]++;beforeEach(async()=>{cov_cwrrqdkgu().f[2]++;cov_cwrrqdkgu().s[13]++;await User.deleteMany();cov_cwrrqdkgu().s[14]++;name=`name-${random()}`;cov_cwrrqdkgu().s[15]++;surname=`surname-${random()}`;cov_cwrrqdkgu().s[16]++;email=`e-${random()}@mail.com`;cov_cwrrqdkgu().s[17]++;password=`password-${random()}`;cov_cwrrqdkgu().s[18]++;adress=`street-${random()}`;const hash=(cov_cwrrqdkgu().s[19]++,await bcrypt.hash(password,10));cov_cwrrqdkgu().s[20]++;user=await User.create({name,surname,email,password:hash,adress});cov_cwrrqdkgu().s[21]++;userId=user.id;});cov_cwrrqdkgu().s[22]++;it('should succeed on retriving user',async()=>{cov_cwrrqdkgu().f[3]++;const result=(cov_cwrrqdkgu().s[23]++,await retriveUser(userId));cov_cwrrqdkgu().s[24]++;expect(result).to.exist;cov_cwrrqdkgu().s[25]++;expect(result.name).to.be.equal(user.name);cov_cwrrqdkgu().s[26]++;expect(result.surname).to.be.equal(user.surname);cov_cwrrqdkgu().s[27]++;expect(result.email).to.be.equal(user.email);cov_cwrrqdkgu().s[28]++;expect(result.adress).to.be.equal(user.adress);});cov_cwrrqdkgu().s[29]++;it('should fail on retriving user',async()=>{cov_cwrrqdkgu().f[4]++;cov_cwrrqdkgu().s[30]++;result=await retriveUser(fakeId).catch(error=>{cov_cwrrqdkgu().f[5]++;cov_cwrrqdkgu().s[31]++;expect(error).to.exist;cov_cwrrqdkgu().s[32]++;expect(error.message).to.be.equal(`user with id: ${fakeId} dont exists`);});});//TODO finish test with unhappy path
cov_cwrrqdkgu().s[33]++;afterEach(()=>{cov_cwrrqdkgu().f[6]++;cov_cwrrqdkgu().s[34]++;return User.deleteMany();});cov_cwrrqdkgu().s[35]++;after(mongoose.disconnect);});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJldHJpZXZlLXVzZXIuc3BlYy5qcyJdLCJuYW1lcyI6WyJyZXF1aXJlIiwiY29uZmlnIiwiZW52IiwiVEVTVF9NT05HT0RCX1VSTCIsIk1PTkdPREJfVVJMIiwicHJvY2VzcyIsInJldHJpdmVVc2VyIiwicmFuZG9tIiwiTWF0aCIsImV4cGVjdCIsIm1vbmdvb3NlIiwibW9kZWxzIiwiVXNlciIsImJjcnlwdCIsImRlc2NyaWJlIiwiYmVmb3JlIiwiY29ubmVjdCIsImZha2VJZCIsIm5hbWUiLCJzdXJuYW1lIiwiZW1haWwiLCJwYXNzd29yZCIsImFkcmVzcyIsInVzZXIiLCJiZWZvcmVFYWNoIiwiZGVsZXRlTWFueSIsImhhc2giLCJjcmVhdGUiLCJ1c2VySWQiLCJpZCIsIml0IiwicmVzdWx0IiwidG8iLCJleGlzdCIsImJlIiwiZXF1YWwiLCJjYXRjaCIsImVycm9yIiwibWVzc2FnZSIsImFmdGVyRWFjaCIsImFmdGVyIiwiZGlzY29ubmVjdCJdLCJtYXBwaW5ncyI6InEvSEFlWTtnSEFmWkEsT0FBTyxDQUFDLFFBQUQsQ0FBUCxDQUFrQkMsTUFBbEIsR0FFQSxLQUFNLENBQUVDLEdBQUcsQ0FBRSxDQUFFQyxnQkFBZ0IsQ0FBRUMsV0FBcEIsQ0FBUCwwQkFBNkNDLE9BQTdDLENBQU4sQ0FFQSxLQUFNQyxDQUFBQSxXQUFXLHlCQUFHTixPQUFPLENBQUMsaUJBQUQsQ0FBVixDQUFqQixDQUNBLEtBQU0sQ0FBRU8sTUFBRiwwQkFBYUMsSUFBYixDQUFOLENBQ0EsS0FBTSxDQUFFQyxNQUFGLDBCQUFhVCxPQUFPLENBQUMsTUFBRCxDQUFwQixDQUFOLEMsdUJBQ0FBLE9BQU8sQ0FBQyxtQ0FBRCxDQUFQLENBQ0EsS0FBTSxDQUFFVSxRQUFGLENBQVlDLE1BQU0sQ0FBRSxDQUFFQyxJQUFGLENBQXBCLDBCQUFpQ1osT0FBTyxDQUFDLGlCQUFELENBQXhDLENBQU4sQ0FDQSxLQUFNYSxDQUFBQSxNQUFNLHlCQUFHYixPQUFPLENBQUMsVUFBRCxDQUFWLENB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QUFTLENBQUMsSUFBTSxzREFBQTNCLENBQUFBLElBQUksQ0FBQ2EsVUFBTCxHQUFpQixDQUF4QixDQUFULENBekNvQyx3QkEyQ3BDZSxLQUFLLENBQUM5QixRQUFRLENBQUMrQixVQUFWLENBQUwsQ0FDSCxDQTVDTyxDQUFSIiwic291cmNlc0NvbnRlbnQiOlsicmVxdWlyZSgnZG90ZW52JykuY29uZmlnKClcclxuXHJcbmNvbnN0IHsgZW52OiB7IFRFU1RfTU9OR09EQl9VUkw6IE1PTkdPREJfVVJMIH0gfSA9IHByb2Nlc3NcclxuXHJcbmNvbnN0IHJldHJpdmVVc2VyID0gcmVxdWlyZSgnLi9yZXRyaWV2ZS11c2VyJylcclxuY29uc3QgeyByYW5kb20gfSA9IE1hdGhcclxuY29uc3QgeyBleHBlY3QgfSA9IHJlcXVpcmUoJ2NoYWknKVxyXG5yZXF1aXJlKCd0YWtlbXl0YXNrLWNvbW1vbnMvcG9seWZpbGxzL2pzb24nKVxyXG5jb25zdCB7IG1vbmdvb3NlLCBtb2RlbHM6IHsgVXNlciB9IH0gPSByZXF1aXJlKCd0YWtlbXl0YXNrLWRhdGEnKVxyXG5jb25zdCBiY3J5cHQgPSByZXF1aXJlKCdiY3J5cHRqcycpXHJcblxyXG5kZXNjcmliZSgnbG9naWMgLSByZWdpc3RlciB1c2VyJywgKCkgPT4ge1xyXG4gICAgYmVmb3JlKCgpID0+IG1vbmdvb3NlLmNvbm5lY3QoTU9OR09EQl9VUkwpKVxyXG5cclxuICAgIGNvbnN0IGZha2VJZCA9ICc1ZWUwZWQ5YTYwM2EwYTRmM2M2NTBmZTEnXHJcbiAgICBsZXQgbmFtZSwgc3VybmFtZSwgZW1haWwsIHBhc3N3b3JkLCBhZHJlc3MsIHVzZXJcclxuXHJcbiAgICBiZWZvcmVFYWNoKGFzeW5jICgpID0+IHtcclxuICAgICAgICBhd2FpdCBVc2VyLmRlbGV0ZU1hbnkoKVxyXG5cclxuICAgICAgICBuYW1lID0gYG5hbWUtJHtyYW5kb20oKX1gXHJcbiAgICAgICAgc3VybmFtZSA9IGBzdXJuYW1lLSR7cmFuZG9tKCl9YFxyXG4gICAgICAgIGVtYWlsID0gYGUtJHtyYW5kb20oKX1AbWFpbC5jb21gXHJcbiAgICAgICAgcGFzc3dvcmQgPSBgcGFzc3dvcmQtJHtyYW5kb20oKX1gXHJcbiAgICAgICAgYWRyZXNzID0gYHN0cmVldC0ke3JhbmRvbSgpfWBcclxuXHJcbiAgICAgICAgY29uc3QgaGFzaCA9IGF3YWl0IGJjcnlwdC5oYXNoKHBhc3N3b3JkLCAxMClcclxuXHJcbiAgICAgICAgdXNlciA9IGF3YWl0IFVzZXIuY3JlYXRlKHtuYW1lLCBzdXJuYW1lLCBlbWFpbCwgcGFzc3dvcmQ6IGhhc2gsIGFkcmVzc30pXHJcblxyXG4gICAgICAgIHVzZXJJZCA9IHVzZXIuaWRcclxuICAgIH0pXHJcblxyXG4gICAgaXQoJ3Nob3VsZCBzdWNjZWVkIG9uIHJldHJpdmluZyB1c2VyJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJldHJpdmVVc2VyKHVzZXJJZClcclxuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdCkudG8uZXhpc3RcclxuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdC5uYW1lKS50by5iZS5lcXVhbCh1c2VyLm5hbWUpXHJcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQuc3VybmFtZSkudG8uYmUuZXF1YWwodXNlci5zdXJuYW1lKVxyXG4gICAgICAgICAgICBleHBlY3QocmVzdWx0LmVtYWlsKS50by5iZS5lcXVhbCh1c2VyLmVtYWlsKVxyXG4gICAgICAgICAgICBleHBlY3QocmVzdWx0LmFkcmVzcykudG8uYmUuZXF1YWwodXNlci5hZHJlc3MpXHJcbiAgICB9KVxyXG5cclxuICAgIGl0KCdzaG91bGQgZmFpbCBvbiByZXRyaXZpbmcgdXNlcicsIGFzeW5jICgpID0+IHtcclxuICAgICAgICByZXN1bHQgPSBhd2FpdCByZXRyaXZlVXNlcihmYWtlSWQpXHJcbiAgICAgICAgICAgIC5jYXRjaCggZXJyb3IgPT4ge1xyXG4gICAgICAgICAgICAgICAgZXhwZWN0KGVycm9yKS50by5leGlzdFxyXG4gICAgICAgICAgICAgICAgZXhwZWN0KGVycm9yLm1lc3NhZ2UpLnRvLmJlLmVxdWFsKGB1c2VyIHdpdGggaWQ6ICR7ZmFrZUlkfSBkb250IGV4aXN0c2ApXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICB9KVxyXG4gICAgXHJcbiAgICAvL1RPRE8gZmluaXNoIHRlc3Qgd2l0aCB1bmhhcHB5IHBhdGhcclxuXHJcbiAgICBhZnRlckVhY2goKCkgPT4gVXNlci5kZWxldGVNYW55KCkpXHJcblxyXG4gICAgYWZ0ZXIobW9uZ29vc2UuZGlzY29ubmVjdClcclxufSkiXX0=