function cov_1t0i18i0po(){var path="C:\\Users\\polpe\\bootcamp\\collab\\skylab-bootcamp-202004\\staff\\pol-pedro\\takemytask\\takemytask-server-logic\\retrieve-user.js";var hash="74a993a3b9ad56d9c4828ef3053f42c365e39db8";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\polpe\\bootcamp\\collab\\skylab-bootcamp-202004\\staff\\pol-pedro\\takemytask\\takemytask-server-logic\\retrieve-user.js",statementMap:{"0":{start:{line:1,column:0},end:{line:1,column:46}},"1":{start:{line:2,column:0},end:{line:2,column:44}},"2":{start:{line:3,column:41},end:{line:3,column:70}},"3":{start:{line:4,column:59},end:{line:4,column:85}},"4":{start:{line:7,column:0},end:{line:43,column:1}},"5":{start:{line:9,column:4},end:{line:9,column:35}},"6":{start:{line:11,column:4},end:{line:42,column:8}},"7":{start:{line:15,column:8},end:{line:40,column:9}},"8":{start:{line:16,column:12},end:{line:16,column:87}},"9":{start:{line:18,column:12},end:{line:22,column:13}},"10":{start:{line:20,column:16},end:{line:20,column:93}},"11":{start:{line:23,column:12},end:{line:23,column:87}},"12":{start:{line:23,column:22},end:{line:23,column:87}},"13":{start:{line:25,column:12},end:{line:25,column:23}},"14":{start:{line:29,column:12},end:{line:29,column:84}},"15":{start:{line:31,column:12},end:{line:35,column:13}},"16":{start:{line:33,column:16},end:{line:33,column:106}},"17":{start:{line:36,column:12},end:{line:36,column:83}},"18":{start:{line:36,column:22},end:{line:36,column:83}},"19":{start:{line:38,column:12},end:{line:38,column:23}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:7,column:17},end:{line:7,column:18}},loc:{start:{line:7,column:33},end:{line:43,column:1}},line:7},"1":{name:"(anonymous_1)",decl:{start:{line:11,column:12},end:{line:11,column:13}},loc:{start:{line:11,column:24},end:{line:42,column:5}},line:11}},branchMap:{"0":{loc:{start:{line:15,column:8},end:{line:40,column:9}},type:"if",locations:[{start:{line:15,column:8},end:{line:40,column:9}},{start:{line:15,column:8},end:{line:40,column:9}}],line:15},"1":{loc:{start:{line:18,column:12},end:{line:22,column:13}},type:"if",locations:[{start:{line:18,column:12},end:{line:22,column:13}},{start:{line:18,column:12},end:{line:22,column:13}}],line:18},"2":{loc:{start:{line:23,column:12},end:{line:23,column:87}},type:"if",locations:[{start:{line:23,column:12},end:{line:23,column:87}},{start:{line:23,column:12},end:{line:23,column:87}}],line:23},"3":{loc:{start:{line:31,column:12},end:{line:35,column:13}},type:"if",locations:[{start:{line:31,column:12},end:{line:35,column:13}},{start:{line:31,column:12},end:{line:35,column:13}}],line:31},"4":{loc:{start:{line:36,column:12},end:{line:36,column:83}},type:"if",locations:[{start:{line:36,column:12},end:{line:36,column:83}},{start:{line:36,column:12},end:{line:36,column:83}}],line:36}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0},f:{"0":0,"1":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"74a993a3b9ad56d9c4828ef3053f42c365e39db8"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_1t0i18i0po=function(){return actualCoverage;};}return actualCoverage;}cov_1t0i18i0po();cov_1t0i18i0po().s[0]++;require('takemytask-commons/polyfills/string');cov_1t0i18i0po().s[1]++;require('takemytask-commons/polyfills/json');const{errors:{UnexistenceError}}=(cov_1t0i18i0po().s[2]++,require('takemytask-commons'));const{models:{User,Worker},mongoose:{ObjectId}}=(cov_1t0i18i0po().s[3]++,require('takemytask-data'));cov_1t0i18i0po().s[4]++;module.exports=(userId,id)=>{cov_1t0i18i0po().f[0]++;cov_1t0i18i0po().s[5]++;String.validate.notVoid(userId);cov_1t0i18i0po().s[6]++;return(async()=>{cov_1t0i18i0po().f[1]++;let user;cov_1t0i18i0po().s[7]++;if(!id){cov_1t0i18i0po().b[0][0]++;cov_1t0i18i0po().s[8]++;user=await User.findOne({_id:ObjectId(userId)},{password:0}).lean();cov_1t0i18i0po().s[9]++;if(!user){cov_1t0i18i0po().b[1][0]++;cov_1t0i18i0po().s[10]++;user=await Worker.findOne({_id:ObjectId(userId)},{password:0}).lean();}else{cov_1t0i18i0po().b[1][1]++;}cov_1t0i18i0po().s[11]++;if(!user){cov_1t0i18i0po().b[2][0]++;cov_1t0i18i0po().s[12]++;throw new UnexistenceError(`user with id: ${userId} dont exists`);}else{cov_1t0i18i0po().b[2][1]++;}cov_1t0i18i0po().s[13]++;return user;}else{cov_1t0i18i0po().b[0][1]++;cov_1t0i18i0po().s[14]++;user=await User.findOne({_id:ObjectId(id)},{password:0}).lean();cov_1t0i18i0po().s[15]++;if(!user){cov_1t0i18i0po().b[3][0]++;cov_1t0i18i0po().s[16]++;user=await Worker.findOne({_id:ObjectId(id)},{password:0},{bankAcount:0}).lean();}else{cov_1t0i18i0po().b[3][1]++;}cov_1t0i18i0po().s[17]++;if(!user){cov_1t0i18i0po().b[4][0]++;cov_1t0i18i0po().s[18]++;throw new UnexistenceError(`user with id: ${id} dont exists`);}else{cov_1t0i18i0po().b[4][1]++;}cov_1t0i18i0po().s[19]++;return user;}})();};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJldHJpZXZlLXVzZXIuanMiXSwibmFtZXMiOlsicmVxdWlyZSIsImVycm9ycyIsIlVuZXhpc3RlbmNlRXJyb3IiLCJtb2RlbHMiLCJVc2VyIiwiV29ya2VyIiwibW9uZ29vc2UiLCJPYmplY3RJZCIsIm1vZHVsZSIsImV4cG9ydHMiLCJ1c2VySWQiLCJpZCIsIlN0cmluZyIsInZhbGlkYXRlIiwibm90Vm9pZCIsInVzZXIiLCJmaW5kT25lIiwiX2lkIiwicGFzc3dvcmQiLCJsZWFuIiwiYmFua0Fjb3VudCJdLCJtYXBwaW5ncyI6InV2R0FlWTttSEFmWkEsT0FBTyxDQUFDLHFDQUFELENBQVAsQyx3QkFDQUEsT0FBTyxDQUFDLG1DQUFELENBQVAsQ0FDQSxLQUFNLENBQUVDLE1BQU0sQ0FBRSxDQUFFQyxnQkFBRixDQUFWLDJCQUFtQ0YsT0FBTyxDQUFDLG9CQUFELENBQTFDLENBQU4sQ0FDQSxLQUFNLENBQUVHLE1BQU0sQ0FBRSxDQUFFQyxJQUFGLENBQVFDLE1BQVIsQ0FBVixDQUE0QkMsUUFBUSxDQUFFLENBQUNDLFFBQUQsQ0FBdEMsMkJBQXFEUCxPQUFPLENBQUMsaUJBQUQsQ0FBNUQsQ0FBTixDLHdCQUdBUSxNQUFNLENBQUNDLE9BQVAsQ0FBaUIsQ0FBQ0MsTUFBRCxDQUFTQyxFQUFULEdBQWdCLGlEQUU3QkMsTUFBTSxDQUFDQyxRQUFQLENBQWdCQyxPQUFoQixDQUF3QkosTUFBeEIsRUFGNkIsd0JBSTdCLE1BQU8sQ0FBQyxTQUFZLHlCQUVoQixHQUFJSyxDQUFBQSxJQUFKLENBRmdCLHdCQUloQixHQUFHLENBQUNKLEVBQUosQ0FBUSxvREFDSkksSUFBSSxDQUFHLEtBQU1YLENBQUFBLElBQUksQ0FBQ1ksT0FBTCxDQUFhLENBQUVDLEdBQUcsQ0FBRVYsUUFBUSxDQUFDRyxNQUFELENBQWYsQ0FBYixDQUF3QyxDQUFDUSxRQUFRLENBQUUsQ0FBWCxDQUF4QyxFQUF3REMsSUFBeEQsRUFBYixDQURJLHdCQUdKLEdBQUksQ0FBQ0osSUFBTCxDQUFVLHFEQUVOQSxJQUFJLENBQUcsS0FBTVYsQ0FBQUEsTUFBTSxDQUFDVyxPQUFQLENBQWUsQ0FBRUMsR0FBRyxDQUFFVixRQUFRLENBQUNHLE1BQUQsQ0FBZixDQUFmLENBQTBDLENBQUNRLFFBQVEsQ0FBRSxDQUFYLENBQTFDLEVBQTBEQyxJQUExRCxFQUFiLENBRUgsQ0FKRCxpQ0FISSx5QkFRSixHQUFHLENBQUNKLElBQUosQ0FBVSwwREFBTSxJQUFJYixDQUFBQSxnQkFBSixDQUFzQixpQkFBZ0JRLE1BQU8sY0FBN0MsQ0FBTixDQUFpRSxDQUEzRSxpQ0FSSSx5QkFVSixNQUFPSyxDQUFBQSxJQUFQLENBRUgsQ0FaRCxJQVlLLHFEQUVEQSxJQUFJLENBQUcsS0FBTVgsQ0FBQUEsSUFBSSxDQUFDWSxPQUFMLENBQWEsQ0FBRUMsR0FBRyxDQUFFVixRQUFRLENBQUNJLEVBQUQsQ0FBZixDQUFiLENBQW9DLENBQUNPLFFBQVEsQ0FBRSxDQUFYLENBQXBDLEVBQXFEQyxJQUFyRCxFQUFiLENBRkMseUJBSUQsR0FBSSxDQUFDSixJQUFMLENBQVUscURBRU5BLElBQUksQ0FBRyxLQUFNVixDQUFBQSxNQUFNLENBQUNXLE9BQVAsQ0FBZSxDQUFFQyxHQUFHLENBQUVWLFFBQVEsQ0FBQ0ksRUFBRCxDQUFmLENBQWYsQ0FBc0MsQ0FBQ08sUUFBUSxDQUFFLENBQVgsQ0FBdEMsQ0FBc0QsQ0FBQ0UsVUFBVSxDQUFFLENBQWIsQ0FBdEQsRUFBdUVELElBQXZFLEVBQWIsQ0FFSCxDQUpELGlDQUpDLHlCQVNELEdBQUcsQ0FBQ0osSUFBSixDQUFVLDBEQUFNLElBQUliLENBQUFBLGdCQUFKLENBQXNCLGlCQUFnQlMsRUFBRyxjQUF6QyxDQUFOLENBQTZELENBQXZFLGlDQVRDLHlCQVdELE1BQU9JLENBQUFBLElBQVAsQ0FFSCxDQUVKLENBL0JNLEdBQVAsQ0FnQ0gsQ0FwQ0QiLCJzb3VyY2VzQ29udGVudCI6WyJyZXF1aXJlKCd0YWtlbXl0YXNrLWNvbW1vbnMvcG9seWZpbGxzL3N0cmluZycpXHJcbnJlcXVpcmUoJ3Rha2VteXRhc2stY29tbW9ucy9wb2x5ZmlsbHMvanNvbicpXHJcbmNvbnN0IHsgZXJyb3JzOiB7IFVuZXhpc3RlbmNlRXJyb3IgfSB9ID0gcmVxdWlyZSgndGFrZW15dGFzay1jb21tb25zJylcclxuY29uc3QgeyBtb2RlbHM6IHsgVXNlciwgV29ya2VyIH0sIG1vbmdvb3NlOiB7T2JqZWN0SWR9IH0gPSByZXF1aXJlKCd0YWtlbXl0YXNrLWRhdGEnKVxyXG5cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gKHVzZXJJZCwgaWQpID0+IHtcclxuXHJcbiAgICBTdHJpbmcudmFsaWRhdGUubm90Vm9pZCh1c2VySWQpXHJcblxyXG4gICAgcmV0dXJuIChhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgXHJcbiAgICAgICAgbGV0IHVzZXIgXHJcblxyXG4gICAgICAgIGlmKCFpZCkge1xyXG4gICAgICAgICAgICB1c2VyID0gYXdhaXQgVXNlci5maW5kT25lKHsgX2lkOiBPYmplY3RJZCh1c2VySWQpIH0sIHtwYXNzd29yZDogMCB9KS5sZWFuKClcclxuXHJcbiAgICAgICAgICAgIGlmICghdXNlcil7XHJcblxyXG4gICAgICAgICAgICAgICAgdXNlciA9IGF3YWl0IFdvcmtlci5maW5kT25lKHsgX2lkOiBPYmplY3RJZCh1c2VySWQpIH0sIHtwYXNzd29yZDogMCB9KS5sZWFuKClcclxuXHJcbiAgICAgICAgICAgIH0gXHJcbiAgICAgICAgICAgIGlmKCF1c2VyKSB0aHJvdyBuZXcgVW5leGlzdGVuY2VFcnJvcihgdXNlciB3aXRoIGlkOiAke3VzZXJJZH0gZG9udCBleGlzdHNgKVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHVzZXJcclxuXHJcbiAgICAgICAgfWVsc2V7XHJcblxyXG4gICAgICAgICAgICB1c2VyID0gYXdhaXQgVXNlci5maW5kT25lKHsgX2lkOiBPYmplY3RJZChpZCkgfSwge3Bhc3N3b3JkOiAwIH0gKS5sZWFuKClcclxuXHJcbiAgICAgICAgICAgIGlmICghdXNlcil7XHJcblxyXG4gICAgICAgICAgICAgICAgdXNlciA9IGF3YWl0IFdvcmtlci5maW5kT25lKHsgX2lkOiBPYmplY3RJZChpZCkgfSwge3Bhc3N3b3JkOiAwIH0sIHtiYW5rQWNvdW50OiAwfSkubGVhbigpXHJcblxyXG4gICAgICAgICAgICB9IFxyXG4gICAgICAgICAgICBpZighdXNlcikgdGhyb3cgbmV3IFVuZXhpc3RlbmNlRXJyb3IoYHVzZXIgd2l0aCBpZDogJHtpZH0gZG9udCBleGlzdHNgKVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHVzZXJcclxuXHJcbiAgICAgICAgfSAgIFxyXG5cclxuICAgIH0pKClcclxufSJdfQ==