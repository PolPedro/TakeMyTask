function cov_1kuskbxdt0(){var path="C:\\Users\\polpe\\bootcamp\\collab\\skylab-bootcamp-202004\\staff\\pol-pedro\\takemytask\\takemytask-server-logic\\authenticate-user.spec.js";var hash="3c7cf3bc0b8d8323f55c4cb5e53c5b775d30a866";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\polpe\\bootcamp\\collab\\skylab-bootcamp-202004\\staff\\pol-pedro\\takemytask\\takemytask-server-logic\\authenticate-user.spec.js",statementMap:{"0":{start:{line:1,column:0},end:{line:1,column:26}},"1":{start:{line:3,column:51},end:{line:3,column:58}},"2":{start:{line:5,column:21},end:{line:5,column:46}},"3":{start:{line:6,column:19},end:{line:6,column:23}},"4":{start:{line:7,column:19},end:{line:7,column:34}},"5":{start:{line:8,column:0},end:{line:8,column:44}},"6":{start:{line:9,column:47},end:{line:9,column:73}},"7":{start:{line:10,column:15},end:{line:10,column:34}},"8":{start:{line:12,column:0},end:{line:115,column:2}},"9":{start:{line:13,column:4},end:{line:13,column:47}},"10":{start:{line:13,column:17},end:{line:13,column:46}},"11":{start:{line:17,column:4},end:{line:32,column:6}},"12":{start:{line:18,column:8},end:{line:18,column:31}},"13":{start:{line:19,column:8},end:{line:19,column:33}},"14":{start:{line:21,column:8},end:{line:21,column:33}},"15":{start:{line:22,column:8},end:{line:22,column:39}},"16":{start:{line:23,column:8},end:{line:23,column:40}},"17":{start:{line:24,column:8},end:{line:24,column:41}},"18":{start:{line:25,column:8},end:{line:25,column:37}},"19":{start:{line:27,column:21},end:{line:27,column:52}},"20":{start:{line:29,column:21},end:{line:29,column:86}},"21":{start:{line:31,column:8},end:{line:31,column:24}},"22":{start:{line:34,column:4},end:{line:40,column:6}},"23":{start:{line:35,column:8},end:{line:39,column:14}},"24":{start:{line:37,column:16},end:{line:37,column:40}},"25":{start:{line:38,column:16},end:{line:38,column:48}},"26":{start:{line:42,column:4},end:{line:48,column:6}},"27":{start:{line:43,column:8},end:{line:47,column:14}},"28":{start:{line:45,column:16},end:{line:45,column:38}},"29":{start:{line:46,column:16},end:{line:46,column:73}},"30":{start:{line:50,column:4},end:{line:57,column:6}},"31":{start:{line:51,column:7},end:{line:56,column:8}},"32":{start:{line:52,column:11},end:{line:52,column:48}},"33":{start:{line:54,column:12},end:{line:54,column:34}},"34":{start:{line:55,column:12},end:{line:55,column:68}},"35":{start:{line:59,column:4},end:{line:109,column:6}},"36":{start:{line:63,column:8},end:{line:83,column:10}},"37":{start:{line:64,column:12},end:{line:64,column:35}},"38":{start:{line:65,column:12},end:{line:65,column:37}},"39":{start:{line:67,column:12},end:{line:67,column:37}},"40":{start:{line:68,column:12},end:{line:68,column:43}},"41":{start:{line:69,column:12},end:{line:69,column:44}},"42":{start:{line:70,column:12},end:{line:70,column:45}},"43":{start:{line:71,column:12},end:{line:71,column:41}},"44":{start:{line:72,column:12},end:{line:72,column:49}},"45":{start:{line:73,column:12},end:{line:73,column:51}},"46":{start:{line:74,column:12},end:{line:74,column:37}},"47":{start:{line:75,column:12},end:{line:75,column:55}},"48":{start:{line:76,column:12},end:{line:76,column:41}},"49":{start:{line:78,column:25},end:{line:78,column:56}},"50":{start:{line:80,column:27},end:{line:80,column:164}},"51":{start:{line:82,column:12},end:{line:82,column:32}},"52":{start:{line:85,column:8},end:{line:91,column:10}},"53":{start:{line:86,column:12},end:{line:90,column:18}},"54":{start:{line:88,column:20},end:{line:88,column:44}},"55":{start:{line:89,column:20},end:{line:89,column:54}},"56":{start:{line:93,column:8},end:{line:99,column:10}},"57":{start:{line:94,column:12},end:{line:98,column:18}},"58":{start:{line:96,column:20},end:{line:96,column:42}},"59":{start:{line:97,column:20},end:{line:97,column:77}},"60":{start:{line:101,column:8},end:{line:108,column:11}},"61":{start:{line:102,column:12},end:{line:107,column:13}},"62":{start:{line:103,column:16},end:{line:103,column:53}},"63":{start:{line:105,column:17},end:{line:105,column:39}},"64":{start:{line:106,column:17},end:{line:106,column:73}},"65":{start:{line:112,column:4},end:{line:112,column:59}},"66":{start:{line:112,column:20},end:{line:112,column:37}},"67":{start:{line:114,column:4},end:{line:114,column:30}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:12,column:38},end:{line:12,column:39}},loc:{start:{line:12,column:44},end:{line:115,column:1}},line:12},"1":{name:"(anonymous_1)",decl:{start:{line:13,column:11},end:{line:13,column:12}},loc:{start:{line:13,column:17},end:{line:13,column:46}},line:13},"2":{name:"(anonymous_2)",decl:{start:{line:17,column:15},end:{line:17,column:16}},loc:{start:{line:17,column:27},end:{line:32,column:5}},line:17},"3":{name:"(anonymous_3)",decl:{start:{line:34,column:57},end:{line:34,column:58}},loc:{start:{line:34,column:69},end:{line:40,column:5}},line:34},"4":{name:"(anonymous_4)",decl:{start:{line:36,column:18},end:{line:36,column:19}},loc:{start:{line:36,column:31},end:{line:39,column:13}},line:36},"5":{name:"(anonymous_5)",decl:{start:{line:42,column:40},end:{line:42,column:41}},loc:{start:{line:42,column:52},end:{line:48,column:5}},line:42},"6":{name:"(anonymous_6)",decl:{start:{line:44,column:19},end:{line:44,column:20}},loc:{start:{line:44,column:30},end:{line:47,column:13}},line:44},"7":{name:"(anonymous_7)",decl:{start:{line:50,column:39},end:{line:50,column:40}},loc:{start:{line:50,column:51},end:{line:57,column:5}},line:50},"8":{name:"(anonymous_8)",decl:{start:{line:59,column:44},end:{line:59,column:45}},loc:{start:{line:59,column:50},end:{line:109,column:5}},line:59},"9":{name:"(anonymous_9)",decl:{start:{line:63,column:19},end:{line:63,column:20}},loc:{start:{line:63,column:31},end:{line:83,column:9}},line:63},"10":{name:"(anonymous_10)",decl:{start:{line:85,column:63},end:{line:85,column:64}},loc:{start:{line:85,column:75},end:{line:91,column:9}},line:85},"11":{name:"(anonymous_11)",decl:{start:{line:87,column:22},end:{line:87,column:23}},loc:{start:{line:87,column:35},end:{line:90,column:17}},line:87},"12":{name:"(anonymous_12)",decl:{start:{line:93,column:44},end:{line:93,column:45}},loc:{start:{line:93,column:56},end:{line:99,column:9}},line:93},"13":{name:"(anonymous_13)",decl:{start:{line:95,column:23},end:{line:95,column:24}},loc:{start:{line:95,column:34},end:{line:98,column:17}},line:95},"14":{name:"(anonymous_14)",decl:{start:{line:101,column:43},end:{line:101,column:44}},loc:{start:{line:101,column:55},end:{line:108,column:10}},line:101},"15":{name:"(anonymous_15)",decl:{start:{line:112,column:14},end:{line:112,column:15}},loc:{start:{line:112,column:20},end:{line:112,column:37}},line:112}},branchMap:{},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0},b:{},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"3c7cf3bc0b8d8323f55c4cb5e53c5b775d30a866"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_1kuskbxdt0=function(){return actualCoverage;};}return actualCoverage;}cov_1kuskbxdt0();cov_1kuskbxdt0().s[0]++;require('dotenv').config();const{env:{TEST_MONGODB_URL:MONGODB_URL}}=(cov_1kuskbxdt0().s[1]++,process);const authenticate=(cov_1kuskbxdt0().s[2]++,require('./authenticate'));const{random}=(cov_1kuskbxdt0().s[3]++,Math);const{expect}=(cov_1kuskbxdt0().s[4]++,require('chai'));cov_1kuskbxdt0().s[5]++;require('takemytask-commons/polyfills/json');const{mongoose,models:{User,Worker}}=(cov_1kuskbxdt0().s[6]++,require('takemytask-data'));const bcrypt=(cov_1kuskbxdt0().s[7]++,require('bcryptjs'));cov_1kuskbxdt0().s[8]++;describe('logic - authenticate user',()=>{cov_1kuskbxdt0().f[0]++;cov_1kuskbxdt0().s[9]++;before(()=>{cov_1kuskbxdt0().f[1]++;cov_1kuskbxdt0().s[10]++;return mongoose.connect(MONGODB_URL);});let name,surname,email,password,adress;cov_1kuskbxdt0().s[11]++;beforeEach(async()=>{cov_1kuskbxdt0().f[2]++;cov_1kuskbxdt0().s[12]++;await User.deleteMany();cov_1kuskbxdt0().s[13]++;await Worker.deleteMany();cov_1kuskbxdt0().s[14]++;name=`name-${random()}`;cov_1kuskbxdt0().s[15]++;surname=`surname-${random()}`;cov_1kuskbxdt0().s[16]++;email=`e-${random()}@mail.com`;cov_1kuskbxdt0().s[17]++;password=`password-${random()}`;cov_1kuskbxdt0().s[18]++;adress=`street-${random()}`;const hash=(cov_1kuskbxdt0().s[19]++,await bcrypt.hash(password,10));const user=(cov_1kuskbxdt0().s[20]++,await User.create({name,surname,email,password:hash,adress}));cov_1kuskbxdt0().s[21]++;userId=user.id;});cov_1kuskbxdt0().s[22]++;it('should succeed on correct credentials for user',async()=>{cov_1kuskbxdt0().f[3]++;cov_1kuskbxdt0().s[23]++;await authenticate(email,password).then(_userId=>{cov_1kuskbxdt0().f[4]++;cov_1kuskbxdt0().s[24]++;expect(_userId).to.exist;cov_1kuskbxdt0().s[25]++;expect(_userId).to.equal(userId);});});cov_1kuskbxdt0().s[26]++;it('should fail on wrong password',async()=>{cov_1kuskbxdt0().f[5]++;cov_1kuskbxdt0().s[27]++;await authenticate(email,'password').catch(error=>{cov_1kuskbxdt0().f[6]++;cov_1kuskbxdt0().s[28]++;expect(error).to.exist;cov_1kuskbxdt0().s[29]++;expect(error.message).to.equal(`Wrong email or password`);});});cov_1kuskbxdt0().s[30]++;it('should fail on invalid email',async()=>{cov_1kuskbxdt0().f[7]++;cov_1kuskbxdt0().s[31]++;try{cov_1kuskbxdt0().s[32]++;await authenticate('email',password);}catch(error){cov_1kuskbxdt0().s[33]++;expect(error).to.exist;cov_1kuskbxdt0().s[34]++;expect(error.message).to.equal(`email is not an e-mail`);}});cov_1kuskbxdt0().s[35]++;describe('logic - authenticate worker',()=>{cov_1kuskbxdt0().f[8]++;let name,surname,email,password,adress,bankAcount,description,pricingHour,jobCategories,workingDistance,userId,workerId;cov_1kuskbxdt0().s[36]++;beforeEach(async()=>{cov_1kuskbxdt0().f[9]++;cov_1kuskbxdt0().s[37]++;await User.deleteMany();cov_1kuskbxdt0().s[38]++;await Worker.deleteMany();cov_1kuskbxdt0().s[39]++;name=`name-${random()}`;cov_1kuskbxdt0().s[40]++;surname=`surname-${random()}`;cov_1kuskbxdt0().s[41]++;email=`e-${random()}@mail.com`;cov_1kuskbxdt0().s[42]++;password=`password-${random()}`;cov_1kuskbxdt0().s[43]++;adress=`street-${random()}`;cov_1kuskbxdt0().s[44]++;bankAcount=`bankAcount-${random()}`;cov_1kuskbxdt0().s[45]++;description=`description-${random()}`;cov_1kuskbxdt0().s[46]++;pricingHour=random()*10;cov_1kuskbxdt0().s[47]++;jobCategories=`jobCategories-${random()}`;cov_1kuskbxdt0().s[48]++;workingDistance=random()*10;const hash=(cov_1kuskbxdt0().s[49]++,await bcrypt.hash(password,10));const worker=(cov_1kuskbxdt0().s[50]++,await Worker.create({name,surname,email,password:hash,adress,bankAcount,description,pricingHour,jobCategories,workingDistance}));cov_1kuskbxdt0().s[51]++;workerId=worker.id;});cov_1kuskbxdt0().s[52]++;it('should succeed on correct credentials for worker',async()=>{cov_1kuskbxdt0().f[10]++;cov_1kuskbxdt0().s[53]++;await authenticate(email,password).then(_userId=>{cov_1kuskbxdt0().f[11]++;cov_1kuskbxdt0().s[54]++;expect(_userId).to.exist;cov_1kuskbxdt0().s[55]++;expect(_userId).to.equal(workerId);});});cov_1kuskbxdt0().s[56]++;it('should fail on wrong password',async()=>{cov_1kuskbxdt0().f[12]++;cov_1kuskbxdt0().s[57]++;await authenticate(email,'password','user').catch(error=>{cov_1kuskbxdt0().f[13]++;cov_1kuskbxdt0().s[58]++;expect(error).to.exist;cov_1kuskbxdt0().s[59]++;expect(error.message).to.equal(`Wrong email or password`);});});cov_1kuskbxdt0().s[60]++;it('should fail on invalid email',async()=>{cov_1kuskbxdt0().f[14]++;cov_1kuskbxdt0().s[61]++;try{cov_1kuskbxdt0().s[62]++;await authenticate('email',password);}catch(error){cov_1kuskbxdt0().s[63]++;expect(error).to.exist;cov_1kuskbxdt0().s[64]++;expect(error.message).to.equal(`email is not an e-mail`);}});});cov_1kuskbxdt0().s[65]++;afterEach(()=>{cov_1kuskbxdt0().f[15]++;cov_1kuskbxdt0().s[66]++;return User.deleteMany();},Worker.deleteMany());cov_1kuskbxdt0().s[67]++;after(mongoose.disconnect);});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF1dGhlbnRpY2F0ZS11c2VyLnNwZWMuanMiXSwibmFtZXMiOlsicmVxdWlyZSIsImNvbmZpZyIsImVudiIsIlRFU1RfTU9OR09EQl9VUkwiLCJNT05HT0RCX1VSTCIsInByb2Nlc3MiLCJhdXRoZW50aWNhdGUiLCJyYW5kb20iLCJNYXRoIiwiZXhwZWN0IiwibW9uZ29vc2UiLCJtb2RlbHMiLCJVc2VyIiwiV29ya2VyIiwiYmNyeXB0IiwiZGVzY3JpYmUiLCJiZWZvcmUiLCJjb25uZWN0IiwibmFtZSIsInN1cm5hbWUiLCJlbWFpbCIsInBhc3N3b3JkIiwiYWRyZXNzIiwiYmVmb3JlRWFjaCIsImRlbGV0ZU1hbnkiLCJoYXNoIiwidXNlciIsImNyZWF0ZSIsInVzZXJJZCIsImlkIiwiaXQiLCJ0aGVuIiwiX3VzZXJJZCIsInRvIiwiZXhpc3QiLCJlcXVhbCIsImNhdGNoIiwiZXJyb3IiLCJtZXNzYWdlIiwiYmFua0Fjb3VudCIsImRlc2NyaXB0aW9uIiwicHJpY2luZ0hvdXIiLCJqb2JDYXRlZ29yaWVzIiwid29ya2luZ0Rpc3RhbmNlIiwid29ya2VySWQiLCJ3b3JrZXIiLCJhZnRlckVhY2giLCJhZnRlciIsImRpc2Nvbm5lY3QiXSwibWFwcGluZ3MiOiJ5NE9BZVk7bUhBZlpBLE9BQU8sQ0FBQyxRQUFELENBQVAsQ0FBa0JDLE1BQWxCLEdBRUEsS0FBTSxDQUFFQyxHQUFHLENBQUUsQ0FBRUMsZ0JBQWdCLENBQUVDLFdBQXBCLENBQVAsMkJBQTZDQyxPQUE3QyxDQUFOLENBRUEsS0FBTUMsQ0FBQUEsWUFBWSwwQkFBR04sT0FBTyxDQUFDLGdCQUFELENBQVYsQ0FBbEIsQ0FDQSxLQUFNLENBQUVPLE1BQUYsMkJBQWFDLElBQWIsQ0FBTixDQUNBLEtBQU0sQ0FBRUMsTUFBRiwyQkFBYVQsT0FBTyxDQUFDLE1BQUQsQ0FBcEIsQ0FBTixDLHdCQUNBQSxPQUFPLENBQUMsbUNBQUQsQ0FBUCxDQUNBLEtBQU0sQ0FBRVUsUUFBRixDQUFZQyxNQUFNLENBQUUs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R0FBSSwwQkFDQSxLQUFNeEIsQ0FBQUEsWUFBWSxDQUFDLE9BQUQsQ0FBVWUsUUFBVixDQUFsQixDQUNILENBQUMsTUFBT2dCLEtBQVAsQ0FBYywwQkFDWDVCLE1BQU0sQ0FBQzRCLEtBQUQsQ0FBTixDQUFjSixFQUFkLENBQWlCQyxLQUFqQixDQURXLHlCQUVYekIsTUFBTSxDQUFDNEIsS0FBSyxDQUFDQyxPQUFQLENBQU4sQ0FBc0JMLEVBQXRCLENBQXlCRSxLQUF6QixDQUFnQyx3QkFBaEMsRUFDSixDQUNILENBUEEsQ0FBRixDQVFILENBbERPLENBQVIsQ0EvQ3dDLHlCQW9HeENXLFNBQVMsQ0FBQyxJQUFNLHlEQUFBbEMsQ0FBQUEsSUFBSSxDQUFDWSxVQUFMLEdBQWlCLENBQXhCLENBQTBCWCxNQUFNLENBQUNXLFVBQVAsRUFBMUIsQ0FBVCxDQXBHd0MseUJBc0d4Q3VCLEtBQUssQ0FBQ3JDLFFBQVEsQ0FBQ3NDLFVBQVYsQ0FBTCxDQUNILENBdkdPLENBQVIiLCJzb3VyY2VzQ29udGVudCI6WyJyZXF1aXJlKCdkb3RlbnYnKS5jb25maWcoKVxyXG5cclxuY29uc3QgeyBlbnY6IHsgVEVTVF9NT05HT0RCX1VSTDogTU9OR09EQl9VUkwgfSB9ID0gcHJvY2Vzc1xyXG5cclxuY29uc3QgYXV0aGVudGljYXRlID0gcmVxdWlyZSgnLi9hdXRoZW50aWNhdGUnKVxyXG5jb25zdCB7IHJhbmRvbSB9ID0gTWF0aFxyXG5jb25zdCB7IGV4cGVjdCB9ID0gcmVxdWlyZSgnY2hhaScpXHJcbnJlcXVpcmUoJ3Rha2VteXRhc2stY29tbW9ucy9wb2x5ZmlsbHMvanNvbicpXHJcbmNvbnN0IHsgbW9uZ29vc2UsIG1vZGVsczogeyBVc2VyICwgV29ya2VyfSB9ID0gcmVxdWlyZSgndGFrZW15dGFzay1kYXRhJylcclxuY29uc3QgYmNyeXB0ID0gcmVxdWlyZSgnYmNyeXB0anMnKVxyXG5cclxuZGVzY3JpYmUoJ2xvZ2ljIC0gYXV0aGVudGljYXRlIHVzZXInLCAoKSA9PiB7XHJcbiAgICBiZWZvcmUoKCkgPT4gbW9uZ29vc2UuY29ubmVjdChNT05HT0RCX1VSTCkpXHJcblxyXG4gICAgbGV0IG5hbWUsIHN1cm5hbWUsIGVtYWlsLCBwYXNzd29yZCwgYWRyZXNzXHJcblxyXG4gICAgYmVmb3JlRWFjaChhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgYXdhaXQgVXNlci5kZWxldGVNYW55KClcclxuICAgICAgICBhd2FpdCBXb3JrZXIuZGVsZXRlTWFueSgpXHJcblxyXG4gICAgICAgIG5hbWUgPSBgbmFtZS0ke3JhbmRvbSgpfWBcclxuICAgICAgICBzdXJuYW1lID0gYHN1cm5hbWUtJHtyYW5kb20oKX1gXHJcbiAgICAgICAgZW1haWwgPSBgZS0ke3JhbmRvbSgpfUBtYWlsLmNvbWBcclxuICAgICAgICBwYXNzd29yZCA9IGBwYXNzd29yZC0ke3JhbmRvbSgpfWBcclxuICAgICAgICBhZHJlc3MgPSBgc3RyZWV0LSR7cmFuZG9tKCl9YFxyXG5cclxuICAgICAgICBjb25zdCBoYXNoID0gYXdhaXQgYmNyeXB0Lmhhc2gocGFzc3dvcmQsIDEwKVxyXG5cclxuICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlci5jcmVhdGUoe25hbWUsIHN1cm5hbWUsIGVtYWlsLCBwYXNzd29yZDogaGFzaCwgYWRyZXNzfSlcclxuXHJcbiAgICAgICAgdXNlcklkID0gdXNlci5pZFxyXG4gICAgfSlcclxuXHJcbiAgICBpdCgnc2hvdWxkIHN1Y2NlZWQgb24gY29ycmVjdCBjcmVkZW50aWFscyBmb3IgdXNlcicsIGFzeW5jICgpID0+IHtcclxuICAgICAgICBhd2FpdCBhdXRoZW50aWNhdGUoZW1haWwsIHBhc3N3b3JkKVxyXG4gICAgICAgICAgICAudGhlbigoX3VzZXJJZCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgZXhwZWN0KF91c2VySWQpLnRvLmV4aXN0XHJcbiAgICAgICAgICAgICAgICBleHBlY3QoX3VzZXJJZCkudG8uZXF1YWwodXNlcklkKVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgfSlcclxuXHJcbiAgICBpdCgnc2hvdWxkIGZhaWwgb24gd3JvbmcgcGFzc3dvcmQnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgYXdhaXQgYXV0aGVudGljYXRlKGVtYWlsLCAncGFzc3dvcmQnKVxyXG4gICAgICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBleHBlY3QoZXJyb3IpLnRvLmV4aXN0XHJcbiAgICAgICAgICAgICAgICBleHBlY3QoZXJyb3IubWVzc2FnZSkudG8uZXF1YWwoYFdyb25nIGVtYWlsIG9yIHBhc3N3b3JkYClcclxuICAgICAgICAgICAgfSlcclxuICAgIH0pXHJcblxyXG4gICAgaXQoJ3Nob3VsZCBmYWlsIG9uIGludmFsaWQgZW1haWwnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICB0cnkgeyAgICBcclxuICAgICAgICAgICBhd2FpdCBhdXRoZW50aWNhdGUoJ2VtYWlsJywgcGFzc3dvcmQpXHJcbiAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBleHBlY3QoZXJyb3IpLnRvLmV4aXN0XHJcbiAgICAgICAgICAgIGV4cGVjdChlcnJvci5tZXNzYWdlKS50by5lcXVhbChgZW1haWwgaXMgbm90IGFuIGUtbWFpbGApXHJcbiAgICAgICB9IFxyXG4gICAgfSlcclxuXHJcbiAgICBkZXNjcmliZSgnbG9naWMgLSBhdXRoZW50aWNhdGUgd29ya2VyJywgKCkgPT4ge1xyXG4gICAgXHJcbiAgICAgICAgbGV0IG5hbWUsIHN1cm5hbWUsIGVtYWlsLCBwYXNzd29yZCwgYWRyZXNzLCBiYW5rQWNvdW50LCBkZXNjcmlwdGlvbiwgcHJpY2luZ0hvdXIsIGpvYkNhdGVnb3JpZXMsIHdvcmtpbmdEaXN0YW5jZSwgdXNlcklkLCB3b3JrZXJJZFxyXG4gICAgXHJcbiAgICAgICAgYmVmb3JlRWFjaChhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIGF3YWl0IFVzZXIuZGVsZXRlTWFueSgpXHJcbiAgICAgICAgICAgIGF3YWl0IFdvcmtlci5kZWxldGVNYW55KClcclxuICAgIFxyXG4gICAgICAgICAgICBuYW1lID0gYG5hbWUtJHtyYW5kb20oKX1gXHJcbiAgICAgICAgICAgIHN1cm5hbWUgPSBgc3VybmFtZS0ke3JhbmRvbSgpfWBcclxuICAgICAgICAgICAgZW1haWwgPSBgZS0ke3JhbmRvbSgpfUBtYWlsLmNvbWBcclxuICAgICAgICAgICAgcGFzc3dvcmQgPSBgcGFzc3dvcmQtJHtyYW5kb20oKX1gXHJcbiAgICAgICAgICAgIGFkcmVzcyA9IGBzdHJlZXQtJHtyYW5kb20oKX1gXHJcbiAgICAgICAgICAgIGJhbmtBY291bnQgPSBgYmFua0Fjb3VudC0ke3JhbmRvbSgpfWBcclxuICAgICAgICAgICAgZGVzY3JpcHRpb24gPSBgZGVzY3JpcHRpb24tJHtyYW5kb20oKX1gXHJcbiAgICAgICAgICAgIHByaWNpbmdIb3VyID0gcmFuZG9tKCkqMTBcclxuICAgICAgICAgICAgam9iQ2F0ZWdvcmllcyA9IGBqb2JDYXRlZ29yaWVzLSR7cmFuZG9tKCl9YFxyXG4gICAgICAgICAgICB3b3JraW5nRGlzdGFuY2UgPSByYW5kb20oKSoxMFxyXG4gICAgXHJcbiAgICAgICAgICAgIGNvbnN0IGhhc2ggPSBhd2FpdCBiY3J5cHQuaGFzaChwYXNzd29yZCwgMTApXHJcbiAgICBcclxuICAgICAgICAgICAgY29uc3Qgd29ya2VyID0gYXdhaXQgV29ya2VyLmNyZWF0ZSh7bmFtZSwgc3VybmFtZSwgZW1haWwsIHBhc3N3b3JkOiBoYXNoLCBhZHJlc3MsIGJhbmtBY291bnQsIGRlc2NyaXB0aW9uLCBwcmljaW5nSG91ciwgam9iQ2F0ZWdvcmllcywgd29ya2luZ0Rpc3RhbmNlfSlcclxuICAgIFxyXG4gICAgICAgICAgICB3b3JrZXJJZCA9IHdvcmtlci5pZCBcclxuICAgICAgICB9KVxyXG4gICAgXHJcbiAgICAgICAgaXQoJ3Nob3VsZCBzdWNjZWVkIG9uIGNvcnJlY3QgY3JlZGVudGlhbHMgZm9yIHdvcmtlcicsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgYXdhaXQgYXV0aGVudGljYXRlKGVtYWlsLCBwYXNzd29yZClcclxuICAgICAgICAgICAgICAgIC50aGVuKChfdXNlcklkKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZXhwZWN0KF91c2VySWQpLnRvLmV4aXN0XHJcbiAgICAgICAgICAgICAgICAgICAgZXhwZWN0KF91c2VySWQpLnRvLmVxdWFsKHdvcmtlcklkKVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICB9KVxyXG4gICAgXHJcbiAgICAgICAgaXQoJ3Nob3VsZCBmYWlsIG9uIHdyb25nIHBhc3N3b3JkJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBhd2FpdCBhdXRoZW50aWNhdGUoZW1haWwsICdwYXNzd29yZCcsICd1c2VyJylcclxuICAgICAgICAgICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBleHBlY3QoZXJyb3IpLnRvLmV4aXN0XHJcbiAgICAgICAgICAgICAgICAgICAgZXhwZWN0KGVycm9yLm1lc3NhZ2UpLnRvLmVxdWFsKGBXcm9uZyBlbWFpbCBvciBwYXNzd29yZGApXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgZmFpbCBvbiBpbnZhbGlkIGVtYWlsJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICB0cnkgeyAgICBcclxuICAgICAgICAgICAgICAgIGF3YWl0IGF1dGhlbnRpY2F0ZSgnZW1haWwnLCBwYXNzd29yZClcclxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICBleHBlY3QoZXJyb3IpLnRvLmV4aXN0XHJcbiAgICAgICAgICAgICAgICAgZXhwZWN0KGVycm9yLm1lc3NhZ2UpLnRvLmVxdWFsKGBlbWFpbCBpcyBub3QgYW4gZS1tYWlsYClcclxuICAgICAgICAgICAgfSBcclxuICAgICAgICAgfSlcclxuICAgIH0pXHJcbiAgICBcclxuXHJcbiAgICBhZnRlckVhY2goKCkgPT4gVXNlci5kZWxldGVNYW55KCksIFdvcmtlci5kZWxldGVNYW55KCkpXHJcblxyXG4gICAgYWZ0ZXIobW9uZ29vc2UuZGlzY29ubmVjdClcclxufSkiXX0=