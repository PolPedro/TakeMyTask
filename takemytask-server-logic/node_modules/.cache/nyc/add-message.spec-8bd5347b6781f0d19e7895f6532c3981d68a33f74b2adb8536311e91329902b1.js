function cov_aroaqi8os(){var path="C:\\Users\\polpe\\bootcamp\\collab\\skylab-bootcamp-202004\\staff\\pol-pedro\\takemytask\\takemytask-server-logic\\add-message.spec.js";var hash="c94c78dc031d0c5fac813ac33609410014d224f8";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\polpe\\bootcamp\\collab\\skylab-bootcamp-202004\\staff\\pol-pedro\\takemytask\\takemytask-server-logic\\add-message.spec.js",statementMap:{"0":{start:{line:1,column:0},end:{line:1,column:26}},"1":{start:{line:3,column:96},end:{line:3,column:103}},"2":{start:{line:5,column:19},end:{line:5,column:43}},"3":{start:{line:6,column:19},end:{line:6,column:23}},"4":{start:{line:7,column:19},end:{line:7,column:34}},"5":{start:{line:8,column:0},end:{line:8,column:44}},"6":{start:{line:9,column:35},end:{line:9,column:64}},"7":{start:{line:10,column:84},end:{line:10,column:110}},"8":{start:{line:11,column:0},end:{line:11,column:43}},"9":{start:{line:13,column:0},end:{line:131,column:2}},"10":{start:{line:14,column:4},end:{line:14,column:47}},"11":{start:{line:14,column:17},end:{line:14,column:46}},"12":{start:{line:18,column:4},end:{line:67,column:6}},"13":{start:{line:19,column:8},end:{line:19,column:31}},"14":{start:{line:20,column:8},end:{line:20,column:33}},"15":{start:{line:21,column:8},end:{line:21,column:31}},"16":{start:{line:23,column:8},end:{line:23,column:33}},"17":{start:{line:24,column:8},end:{line:24,column:39}},"18":{start:{line:25,column:8},end:{line:25,column:40}},"19":{start:{line:26,column:8},end:{line:26,column:41}},"20":{start:{line:27,column:8},end:{line:27,column:37}},"21":{start:{line:29,column:8},end:{line:29,column:34}},"22":{start:{line:30,column:8},end:{line:30,column:40}},"23":{start:{line:31,column:8},end:{line:31,column:41}},"24":{start:{line:32,column:8},end:{line:32,column:42}},"25":{start:{line:33,column:8},end:{line:33,column:38}},"26":{start:{line:34,column:8},end:{line:34,column:45}},"27":{start:{line:35,column:8},end:{line:35,column:49}},"28":{start:{line:36,column:8},end:{line:36,column:47}},"29":{start:{line:37,column:8},end:{line:37,column:33}},"30":{start:{line:38,column:8},end:{line:38,column:51}},"31":{start:{line:39,column:8},end:{line:39,column:37}},"32":{start:{line:41,column:23},end:{line:41,column:202}},"33":{start:{line:43,column:8},end:{line:43,column:39}},"34":{start:{line:45,column:21},end:{line:49,column:10}},"35":{start:{line:51,column:8},end:{line:51,column:39}},"36":{start:{line:53,column:8},end:{line:53,column:42}},"37":{start:{line:55,column:8},end:{line:61,column:11}},"38":{start:{line:63,column:8},end:{line:63,column:25}},"39":{start:{line:65,column:8},end:{line:65,column:36}},"40":{start:{line:68,column:4},end:{line:109,column:6}},"41":{start:{line:69,column:8},end:{line:73,column:10}},"42":{start:{line:70,column:25},end:{line:70,column:84}},"43":{start:{line:72,column:12},end:{line:72,column:40}},"44":{start:{line:75,column:8},end:{line:86,column:10}},"45":{start:{line:77,column:12},end:{line:77,column:56}},"46":{start:{line:79,column:28},end:{line:79,column:45}},"47":{start:{line:81,column:27},end:{line:81,column:34}},"48":{start:{line:83,column:12},end:{line:83,column:33}},"49":{start:{line:84,column:12},end:{line:84,column:82}},"50":{start:{line:85,column:12},end:{line:85,column:65}},"51":{start:{line:88,column:8},end:{line:97,column:10}},"52":{start:{line:89,column:12},end:{line:96,column:13}},"53":{start:{line:91,column:16},end:{line:91,column:52}},"54":{start:{line:94,column:16},end:{line:94,column:40}},"55":{start:{line:95,column:16},end:{line:95,column:68}},"56":{start:{line:99,column:8},end:{line:108,column:10}},"57":{start:{line:101,column:27},end:{line:106,column:18}},"58":{start:{line:104,column:20},end:{line:104,column:42}},"59":{start:{line:105,column:20},end:{line:105,column:103}},"60":{start:{line:111,column:4},end:{line:126,column:6}},"61":{start:{line:113,column:8},end:{line:115,column:10}},"62":{start:{line:114,column:12},end:{line:114,column:47}},"63":{start:{line:116,column:8},end:{line:125,column:10}},"64":{start:{line:118,column:27},end:{line:123,column:18}},"65":{start:{line:121,column:20},end:{line:121,column:42}},"66":{start:{line:122,column:20},end:{line:122,column:88}},"67":{start:{line:128,column:4},end:{line:128,column:78}},"68":{start:{line:128,column:20},end:{line:128,column:39}},"69":{start:{line:130,column:4},end:{line:130,column:30}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:13,column:32},end:{line:13,column:33}},loc:{start:{line:13,column:38},end:{line:131,column:1}},line:13},"1":{name:"(anonymous_1)",decl:{start:{line:14,column:11},end:{line:14,column:12}},loc:{start:{line:14,column:17},end:{line:14,column:46}},line:14},"2":{name:"(anonymous_2)",decl:{start:{line:18,column:15},end:{line:18,column:16}},loc:{start:{line:18,column:27},end:{line:67,column:5}},line:18},"3":{name:"(anonymous_3)",decl:{start:{line:68,column:28},end:{line:68,column:29}},loc:{start:{line:68,column:34},end:{line:109,column:5}},line:68},"4":{name:"(anonymous_4)",decl:{start:{line:69,column:19},end:{line:69,column:20}},loc:{start:{line:69,column:31},end:{line:73,column:9}},line:69},"5":{name:"(anonymous_5)",decl:{start:{line:75,column:47},end:{line:75,column:48}},loc:{start:{line:75,column:59},end:{line:86,column:9}},line:75},"6":{name:"(anonymous_6)",decl:{start:{line:88,column:46},end:{line:88,column:47}},loc:{start:{line:88,column:58},end:{line:97,column:9}},line:88},"7":{name:"(anonymous_7)",decl:{start:{line:99,column:49},end:{line:99,column:50}},loc:{start:{line:99,column:61},end:{line:108,column:9}},line:99},"8":{name:"(anonymous_8)",decl:{start:{line:103,column:23},end:{line:103,column:24}},loc:{start:{line:103,column:32},end:{line:106,column:17}},line:103},"9":{name:"(anonymous_9)",decl:{start:{line:111,column:33},end:{line:111,column:34}},loc:{start:{line:111,column:39},end:{line:126,column:5}},line:111},"10":{name:"(anonymous_10)",decl:{start:{line:113,column:19},end:{line:113,column:20}},loc:{start:{line:113,column:30},end:{line:115,column:9}},line:113},"11":{name:"(anonymous_11)",decl:{start:{line:116,column:50},end:{line:116,column:51}},loc:{start:{line:116,column:62},end:{line:125,column:9}},line:116},"12":{name:"(anonymous_12)",decl:{start:{line:120,column:23},end:{line:120,column:24}},loc:{start:{line:120,column:32},end:{line:123,column:17}},line:120},"13":{name:"(anonymous_13)",decl:{start:{line:128,column:14},end:{line:128,column:15}},loc:{start:{line:128,column:20},end:{line:128,column:39}},line:128}},branchMap:{},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0},b:{},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"c94c78dc031d0c5fac813ac33609410014d224f8"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_aroaqi8os=function(){return actualCoverage;};}return actualCoverage;}cov_aroaqi8os();cov_aroaqi8os().s[0]++;require('dotenv').config();const{env:{TEST_MONGODB_URL:MONGODB_URL,TEST_SECRET:SECRET,TEST_API_URL:API_URL}}=(cov_aroaqi8os().s[1]++,process);const addMessage=(cov_aroaqi8os().s[2]++,require('./add-message'));const{random}=(cov_aroaqi8os().s[3]++,Math);const{expect}=(cov_aroaqi8os().s[4]++,require('chai'));cov_aroaqi8os().s[5]++;require('takemytask-commons/polyfills/json');const{utils:{jwtPromised}}=(cov_aroaqi8os().s[6]++,require('takemytask-commons'));const{mongoose,models:{User,Worker,Chat,Comments},mongoose:{ObjectId}}=(cov_aroaqi8os().s[7]++,require('takemytask-data'));cov_aroaqi8os().s[8]++;require('takemytask-commons/ponyfills/xhr');cov_aroaqi8os().s[9]++;describe('logic - add message',()=>{cov_aroaqi8os().f[0]++;cov_aroaqi8os().s[10]++;before(()=>{cov_aroaqi8os().f[1]++;cov_aroaqi8os().s[11]++;return mongoose.connect(MONGODB_URL);});let name,surname,email,password,adress,bankAcount,description,pricingHour,jobCategories,workingDistance,workerId,coment,userId,chatId,newMessage;cov_aroaqi8os().s[12]++;beforeEach(async()=>{cov_aroaqi8os().f[2]++;cov_aroaqi8os().s[13]++;await User.deleteMany();cov_aroaqi8os().s[14]++;await Worker.deleteMany();cov_aroaqi8os().s[15]++;await Chat.deleteMany();cov_aroaqi8os().s[16]++;name=`name-${random()}`;cov_aroaqi8os().s[17]++;surname=`surname-${random()}`;cov_aroaqi8os().s[18]++;email=`e-${random()}@mail.com`;cov_aroaqi8os().s[19]++;password=`password-${random()}`;cov_aroaqi8os().s[20]++;adress=`street-${random()}`;cov_aroaqi8os().s[21]++;nameW=`name-${random()}`;cov_aroaqi8os().s[22]++;surnameW=`surname-${random()}`;cov_aroaqi8os().s[23]++;emailW=`e-${random()}@mail.com`;cov_aroaqi8os().s[24]++;passwordW=`password-${random()}`;cov_aroaqi8os().s[25]++;adressW=`street-${random()}`;cov_aroaqi8os().s[26]++;bankAcount=`bankAcount-${random()}`;cov_aroaqi8os().s[27]++;presentation=`presentation-${random()}`;cov_aroaqi8os().s[28]++;description=`description-${random()}`;cov_aroaqi8os().s[29]++;pricingHour=random()*10;cov_aroaqi8os().s[30]++;jobCategories=`jobCategories-${random()}`;cov_aroaqi8os().s[31]++;workingDistance=random()*10;const worker=(cov_aroaqi8os().s[32]++,await Worker.create({name:nameW,surname:surnameW,email:emailW,password,adress,adressW,bankAcount,description,presentation,pricingHour,jobCategories,workingDistance}));cov_aroaqi8os().s[33]++;workerId=worker.id.toString();const chat=(cov_aroaqi8os().s[34]++,await Chat.create({user:ObjectId(userId),worker:ObjectId(workerId),date:new Date()}));cov_aroaqi8os().s[35]++;message='hello'+worker.name;cov_aroaqi8os().s[36]++;newMessage=`message-${random()}`;cov_aroaqi8os().s[37]++;chat.messages.unshift(new Comments({userId:ObjectId(userId),name:name,surname:surname,text:message,date:new Date()}));cov_aroaqi8os().s[38]++;await chat.save();cov_aroaqi8os().s[39]++;chatId=chat._id.toString();});cov_aroaqi8os().s[40]++;describe('user exists',()=>{cov_aroaqi8os().f[3]++;cov_aroaqi8os().s[41]++;beforeEach(async()=>{cov_aroaqi8os().f[4]++;const user=(cov_aroaqi8os().s[42]++,await User.create({name,surname,email,password,adress}));cov_aroaqi8os().s[43]++;userId=user._id.toString();});cov_aroaqi8os().s[44]++;it('should succeed on adding message',async()=>{cov_aroaqi8os().f[5]++;cov_aroaqi8os().s[45]++;await addMessage(userId,chatId,newMessage);const results=(cov_aroaqi8os().s[46]++,await Chat.find());const[chat]=(cov_aroaqi8os().s[47]++,results);cov_aroaqi8os().s[48]++;expect(chat).to.exist;cov_aroaqi8os().s[49]++;expect(chat.messages[0].userId.toString()).to.equal(userId.toString());cov_aroaqi8os().s[50]++;expect(chat.messages[0].text).to.be.equal(newMessage);});cov_aroaqi8os().s[51]++;it('should succeed on adding coment',async()=>{cov_aroaqi8os().f[6]++;cov_aroaqi8os().s[52]++;try{cov_aroaqi8os().s[53]++;await addMessage(userId,chatId,"");}catch({message}){cov_aroaqi8os().s[54]++;expect(message).to.exist;cov_aroaqi8os().s[55]++;expect(message).to.equal("string is empty or blank");}});cov_aroaqi8os().s[56]++;it('sould fail when chat id dont exist',async()=>{cov_aroaqi8os().f[7]++;const result=(cov_aroaqi8os().s[57]++,await addMessage(userId,'5ee0ed9a603a0a4f3c650fe1',newMessage).then().catch(error=>{cov_aroaqi8os().f[8]++;cov_aroaqi8os().s[58]++;expect(error).to.exist;cov_aroaqi8os().s[59]++;expect(error.message).to.equal(`chat with id 5ee0ed9a603a0a4f3c650fe1 dont exists`);}));});});cov_aroaqi8os().s[60]++;describe('User dont exists',()=>{cov_aroaqi8os().f[9]++;let fakeId;cov_aroaqi8os().s[61]++;beforeEach(async()=>{cov_aroaqi8os().f[10]++;cov_aroaqi8os().s[62]++;fakeId='5ee0ed9a603a0a4f3c650fe1';});cov_aroaqi8os().s[63]++;it('sould fail when user id dont exitst',async()=>{cov_aroaqi8os().f[11]++;const result=(cov_aroaqi8os().s[64]++,await addMessage(fakeId,chatId,newMessage).then().catch(error=>{cov_aroaqi8os().f[12]++;cov_aroaqi8os().s[65]++;expect(error).to.exist;cov_aroaqi8os().s[66]++;expect(error.message).to.equal(`user with id ${fakeId} dont exists`);}));});});cov_aroaqi8os().s[67]++;afterEach(()=>{cov_aroaqi8os().f[13]++;cov_aroaqi8os().s[68]++;return Worker.deleteMany();},User.deleteMany(),Chat.deleteMany());cov_aroaqi8os().s[69]++;after(mongoose.disconnect);});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFkZC1tZXNzYWdlLnNwZWMuanMiXSwibmFtZXMiOlsicmVxdWlyZSIsImNvbmZpZyIsImVudiIsIlRFU1RfTU9OR09EQl9VUkwiLCJNT05HT0RCX1VSTCIsIlRFU1RfU0VDUkVUIiwiU0VDUkVUIiwiVEVTVF9BUElfVVJMIiwiQVBJX1VSTCIsInByb2Nlc3MiLCJhZGRNZXNzYWdlIiwicmFuZG9tIiwiTWF0aCIsImV4cGVjdCIsInV0aWxzIiwiand0UHJvbWlzZWQiLCJtb25nb29zZSIsIm1vZGVscyIsIlVzZXIiLCJXb3JrZXIiLCJDaGF0IiwiQ29tbWVudHMiLCJPYmplY3RJZCIsImRlc2NyaWJlIiwiYmVmb3JlIiwiY29ubmVjdCIsIm5hbWUiLCJzdXJuYW1lIiwiZW1haWwiLCJwYXNzd29yZCIsImFkcmVzcyIsImJhbmtBY291bnQiLCJkZXNjcmlwdGlvbiIsInByaWNpbmdIb3VyIiwiam9iQ2F0ZWdvcmllcyIsIndvcmtpbmdEaXN0YW5jZSIsIndvcmtlcklkIiwiY29tZW50IiwidXNlcklkIiwiY2hhdElkIiwibmV3TWVzc2FnZSIsImJlZm9yZUVhY2giLCJkZWxldGVNYW55IiwibmFtZVciLCJzdXJuYW1lVyIsImVtYWlsVyIsInBhc3N3b3JkVyIsImFkcmVzc1ciLCJwcmVzZW50YXRpb24iLCJ3b3JrZXIiLCJjcmVhdGUiLCJpZCIsInRvU3RyaW5nIiwiY2hhdCIsInVzZXIiLCJkYXRlIiwiRGF0ZSIsIm1lc3NhZ2UiLCJtZXNzYWdlcyIsInVuc2hpZnQiLCJ0ZXh0Iiwic2F2ZSIsIl9pZCIsIml0IiwicmVzdWx0cyIsImZpbmQiLCJ0byIsImV4aXN0IiwiZXF1YWwiLCJiZSIsInJlc3VsdCIsInRoZW4iLCJjYXRjaCIsImVycm9yIiwiZmFrZUlkIiwiYWZ0ZXJFYWNoIiwiYWZ0ZXIiLCJkaXNjb25uZWN0Il0sIm1hcHBpbmdzIjoid3RPQWVZO2dIQWZaQSxPQUFPLENBQUMsUUFBRCxDQUFQLENBQWtCQyxNQUFsQixHQUVBLEtBQU0sQ0FBRUMs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LHlCQUVsRCxLQUFNTyxDQUFBQSxNQUFNLDBCQUFHLEtBQU01RCxDQUFBQSxVQUFVLENBQUNnRSxNQUFELENBQVNuQyxNQUFULENBQWlCQyxVQUFqQixDQUFWLENBQ2hCK0IsSUFEZ0IsR0FFaEJDLEtBRmdCLENBRVZDLEtBQUssRUFBSSxpREFDWjVELE1BQU0sQ0FBQzRELEtBQUQsQ0FBTixDQUFjUCxFQUFkLENBQWlCQyxLQUFqQixDQURZLHdCQUVadEQsTUFBTSxDQUFDNEQsS0FBSyxDQUFDaEIsT0FBUCxDQUFOLENBQXNCUyxFQUF0QixDQUF5QkUsS0FBekIsQ0FBZ0MsZ0JBQWVNLE1BQU8sY0FBdEQsRUFDSCxDQUxnQixDQUFULENBQVosQ0FPSCxDQVRDLENBQUYsQ0FVSCxDQWZPLENBQVIsQ0FsR2tDLHdCQW1IbENDLFNBQVMsQ0FBQyxJQUFNLHVEQUFBeEQsQ0FBQUEsTUFBTSxDQUFDdUIsVUFBUCxHQUFtQixDQUExQixDQUE0QnhCLElBQUksQ0FBQ3dCLFVBQUwsRUFBNUIsQ0FBK0N0QixJQUFJLENBQUNzQixVQUFMLEVBQS9DLENBQVQsQ0FuSGtDLHdCQXFIbENrQyxLQUFLLENBQUM1RCxRQUFRLENBQUM2RCxVQUFWLENBQUwsQ0FDSCxDQXRITyxDQUFSIiwic291cmNlc0NvbnRlbnQiOlsicmVxdWlyZSgnZG90ZW52JykuY29uZmlnKClcclxuXHJcbmNvbnN0IHsgZW52OiB7IFRFU1RfTU9OR09EQl9VUkw6IE1PTkdPREJfVVJMLCBURVNUX1NFQ1JFVDogU0VDUkVULCBURVNUX0FQSV9VUkw6IEFQSV9VUkwgIH0gfSA9IHByb2Nlc3NcclxuXHJcbmNvbnN0IGFkZE1lc3NhZ2UgPSByZXF1aXJlKCcuL2FkZC1tZXNzYWdlJylcclxuY29uc3QgeyByYW5kb20gfSA9IE1hdGhcclxuY29uc3QgeyBleHBlY3QgfSA9IHJlcXVpcmUoJ2NoYWknKVxyXG5yZXF1aXJlKCd0YWtlbXl0YXNrLWNvbW1vbnMvcG9seWZpbGxzL2pzb24nKVxyXG5jb25zdCB7IHV0aWxzOiB7IGp3dFByb21pc2VkIH0gfSA9IHJlcXVpcmUoJ3Rha2VteXRhc2stY29tbW9ucycpXHJcbmNvbnN0IHsgbW9uZ29vc2UsIG1vZGVsczoge1VzZXIsIFdvcmtlciwgQ2hhdCwgQ29tbWVudHMgfSwgbW9uZ29vc2U6IHtPYmplY3RJZH0gfSA9IHJlcXVpcmUoJ3Rha2VteXRhc2stZGF0YScpXHJcbnJlcXVpcmUoJ3Rha2VteXRhc2stY29tbW9ucy9wb255ZmlsbHMveGhyJylcclxuXHJcbmRlc2NyaWJlKCdsb2dpYyAtIGFkZCBtZXNzYWdlJywgKCkgPT4ge1xyXG4gICAgYmVmb3JlKCgpID0+IG1vbmdvb3NlLmNvbm5lY3QoTU9OR09EQl9VUkwpKVxyXG5cclxuICAgIGxldCBuYW1lLCBzdXJuYW1lLCBlbWFpbCwgcGFzc3dvcmQsIGFkcmVzcywgYmFua0Fjb3VudCwgZGVzY3JpcHRpb24sIHByaWNpbmdIb3VyLCBqb2JDYXRlZ29yaWVzLCB3b3JraW5nRGlzdGFuY2UsIHdvcmtlcklkLCBjb21lbnQsIHVzZXJJZCwgY2hhdElkLCBuZXdNZXNzYWdlXHJcblxyXG4gICAgYmVmb3JlRWFjaChhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgYXdhaXQgVXNlci5kZWxldGVNYW55KClcclxuICAgICAgICBhd2FpdCBXb3JrZXIuZGVsZXRlTWFueSgpXHJcbiAgICAgICAgYXdhaXQgQ2hhdC5kZWxldGVNYW55KClcclxuXHJcbiAgICAgICAgbmFtZSA9IGBuYW1lLSR7cmFuZG9tKCl9YFxyXG4gICAgICAgIHN1cm5hbWUgPSBgc3VybmFtZS0ke3JhbmRvbSgpfWBcclxuICAgICAgICBlbWFpbCA9IGBlLSR7cmFuZG9tKCl9QG1haWwuY29tYFxyXG4gICAgICAgIHBhc3N3b3JkID0gYHBhc3N3b3JkLSR7cmFuZG9tKCl9YFxyXG4gICAgICAgIGFkcmVzcyA9IGBzdHJlZXQtJHtyYW5kb20oKX1gXHJcbiAgICBcclxuICAgICAgICBuYW1lVyA9IGBuYW1lLSR7cmFuZG9tKCl9YFxyXG4gICAgICAgIHN1cm5hbWVXID0gYHN1cm5hbWUtJHtyYW5kb20oKX1gXHJcbiAgICAgICAgZW1haWxXID0gYGUtJHtyYW5kb20oKX1AbWFpbC5jb21gXHJcbiAgICAgICAgcGFzc3dvcmRXID0gYHBhc3N3b3JkLSR7cmFuZG9tKCl9YFxyXG4gICAgICAgIGFkcmVzc1cgPSBgc3RyZWV0LSR7cmFuZG9tKCl9YFxyXG4gICAgICAgIGJhbmtBY291bnQgPSBgYmFua0Fjb3VudC0ke3JhbmRvbSgpfWBcclxuICAgICAgICBwcmVzZW50YXRpb24gPSBgcHJlc2VudGF0aW9uLSR7cmFuZG9tKCl9YFxyXG4gICAgICAgIGRlc2NyaXB0aW9uID0gYGRlc2NyaXB0aW9uLSR7cmFuZG9tKCl9YFxyXG4gICAgICAgIHByaWNpbmdIb3VyID0gcmFuZG9tKCkqMTBcclxuICAgICAgICBqb2JDYXRlZ29yaWVzID0gYGpvYkNhdGVnb3JpZXMtJHtyYW5kb20oKX1gXHJcbiAgICAgICAgd29ya2luZ0Rpc3RhbmNlID0gcmFuZG9tKCkqMTBcclxuXHJcbiAgICAgICAgY29uc3Qgd29ya2VyID0gYXdhaXQgV29ya2VyLmNyZWF0ZSh7bmFtZTogbmFtZVcsIHN1cm5hbWU6IHN1cm5hbWVXLCBlbWFpbDogZW1haWxXLCBwYXNzd29yZCwgYWRyZXNzLCBhZHJlc3NXLCBiYW5rQWNvdW50LCBkZXNjcmlwdGlvbiwgcHJlc2VudGF0aW9uLCBwcmljaW5nSG91ciwgam9iQ2F0ZWdvcmllcywgd29ya2luZ0Rpc3RhbmNlfSlcclxuXHJcbiAgICAgICAgd29ya2VySWQgPSB3b3JrZXIuaWQudG9TdHJpbmcoKVxyXG5cclxuICAgICAgICBjb25zdCBjaGF0ID0gYXdhaXQgQ2hhdC5jcmVhdGUoe1xyXG4gICAgICAgICAgICB1c2VyOiBPYmplY3RJZCh1c2VySWQpLCBcclxuICAgICAgICAgICAgd29ya2VyOiBPYmplY3RJZCh3b3JrZXJJZCksIFxyXG4gICAgICAgICAgICBkYXRlOiBuZXcgRGF0ZVxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIG1lc3NhZ2UgPSAnaGVsbG8nICsgd29ya2VyLm5hbWVcclxuXHJcbiAgICAgICAgbmV3TWVzc2FnZSA9IGBtZXNzYWdlLSR7cmFuZG9tKCl9YFxyXG5cclxuICAgICAgICBjaGF0Lm1lc3NhZ2VzLnVuc2hpZnQoIG5ldyBDb21tZW50cyAoe1xyXG4gICAgICAgICAgICB1c2VySWQ6IE9iamVjdElkKHVzZXJJZCksXHJcbiAgICAgICAgICAgIG5hbWU6IG5hbWUsXHJcbiAgICAgICAgICAgIHN1cm5hbWU6IHN1cm5hbWUsXHJcbiAgICAgICAgICAgIHRleHQ6IG1lc3NhZ2UsXHJcbiAgICAgICAgICAgIGRhdGU6IG5ldyBEYXRlXHJcbiAgICAgICAgfSkpXHJcblxyXG4gICAgICAgIGF3YWl0IGNoYXQuc2F2ZSgpXHJcblxyXG4gICAgICAgIGNoYXRJZCA9IGNoYXQuX2lkLnRvU3RyaW5nKClcclxuXHJcbiAgICB9KVxyXG4gICAgZGVzY3JpYmUoJ3VzZXIgZXhpc3RzJywgKCkgPT4ge1xyXG4gICAgICAgIGJlZm9yZUVhY2goYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlci5jcmVhdGUoe25hbWUsIHN1cm5hbWUsIGVtYWlsLCBwYXNzd29yZCwgYWRyZXNzfSlcclxuXHJcbiAgICAgICAgICAgIHVzZXJJZCA9IHVzZXIuX2lkLnRvU3RyaW5nKClcclxuICAgICAgICB9KVxyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIHN1Y2NlZWQgb24gYWRkaW5nIG1lc3NhZ2UnLCBhc3luYyAoKSA9PiB7XHJcblxyXG4gICAgICAgICAgICBhd2FpdCBhZGRNZXNzYWdlKHVzZXJJZCwgY2hhdElkLCBuZXdNZXNzYWdlKVxyXG5cclxuICAgICAgICAgICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IENoYXQuZmluZCgpXHJcblxyXG4gICAgICAgICAgICBjb25zdCBbY2hhdF0gPSByZXN1bHRzXHJcblxyXG4gICAgICAgICAgICBleHBlY3QoY2hhdCkudG8uZXhpc3RcclxuICAgICAgICAgICAgZXhwZWN0KGNoYXQubWVzc2FnZXNbMF0udXNlcklkLnRvU3RyaW5nKCkpLnRvLmVxdWFsKHVzZXJJZC50b1N0cmluZygpKVxyXG4gICAgICAgICAgICBleHBlY3QoY2hhdC5tZXNzYWdlc1swXS50ZXh0KS50by5iZS5lcXVhbChuZXdNZXNzYWdlKVxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgc3VjY2VlZCBvbiBhZGRpbmcgY29tZW50JywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICB0cnl7XHJcblxyXG4gICAgICAgICAgICAgICAgYXdhaXQgYWRkTWVzc2FnZSh1c2VySWQsIGNoYXRJZCwgXCJcIilcclxuXHJcbiAgICAgICAgICAgIH1jYXRjaCh7bWVzc2FnZX0pe1xyXG4gICAgICAgICAgICAgICAgZXhwZWN0KG1lc3NhZ2UpLnRvLmV4aXN0XHJcbiAgICAgICAgICAgICAgICBleHBlY3QobWVzc2FnZSkudG8uZXF1YWwoXCJzdHJpbmcgaXMgZW1wdHkgb3IgYmxhbmtcIilcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIGl0KCdzb3VsZCBmYWlsIHdoZW4gY2hhdCBpZCBkb250IGV4aXN0JywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBhZGRNZXNzYWdlKHVzZXJJZCwgJzVlZTBlZDlhNjAzYTBhNGYzYzY1MGZlMScsIG5ld01lc3NhZ2UpXHJcbiAgICAgICAgICAgICAgICAudGhlbigpXHJcbiAgICAgICAgICAgICAgICAuY2F0Y2goZXJyb3IgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGV4cGVjdChlcnJvcikudG8uZXhpc3RcclxuICAgICAgICAgICAgICAgICAgICBleHBlY3QoZXJyb3IubWVzc2FnZSkudG8uZXF1YWwoYGNoYXQgd2l0aCBpZCA1ZWUwZWQ5YTYwM2EwYTRmM2M2NTBmZTEgZG9udCBleGlzdHNgKVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgfSlcclxuICAgIH0pXHJcblxyXG4gICAgZGVzY3JpYmUoJ1VzZXIgZG9udCBleGlzdHMnLCAoKSA9PiB7XHJcbiAgICAgICAgbGV0IGZha2VJZFxyXG4gICAgICAgIGJlZm9yZUVhY2goYXN5bmMoKSA9PiB7XHJcbiAgICAgICAgICAgIGZha2VJZCA9ICc1ZWUwZWQ5YTYwM2EwYTRmM2M2NTBmZTEnXHJcbiAgICAgICAgfSlcclxuICAgICAgICBpdCgnc291bGQgZmFpbCB3aGVuIHVzZXIgaWQgZG9udCBleGl0c3QnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGFkZE1lc3NhZ2UoZmFrZUlkLCBjaGF0SWQsIG5ld01lc3NhZ2UpXHJcbiAgICAgICAgICAgICAgICAudGhlbigpXHJcbiAgICAgICAgICAgICAgICAuY2F0Y2goZXJyb3IgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGV4cGVjdChlcnJvcikudG8uZXhpc3RcclxuICAgICAgICAgICAgICAgICAgICBleHBlY3QoZXJyb3IubWVzc2FnZSkudG8uZXF1YWwoYHVzZXIgd2l0aCBpZCAke2Zha2VJZH0gZG9udCBleGlzdHNgKVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgfSlcclxuICAgIH0pXHJcblxyXG4gICAgYWZ0ZXJFYWNoKCgpID0+IFdvcmtlci5kZWxldGVNYW55KCksIFVzZXIuZGVsZXRlTWFueSgpLCBDaGF0LmRlbGV0ZU1hbnkoKSlcclxuXHJcbiAgICBhZnRlcihtb25nb29zZS5kaXNjb25uZWN0KVxyXG59KSJdfQ==