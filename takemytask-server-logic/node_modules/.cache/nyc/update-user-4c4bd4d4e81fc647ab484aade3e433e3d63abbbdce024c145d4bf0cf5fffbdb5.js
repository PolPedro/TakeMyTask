function cov_1h62rz4if2(){var path="C:\\Users\\polpe\\bootcamp\\collab\\skylab-bootcamp-202004\\staff\\pol-pedro\\takemytask\\takemytask-server-logic\\update-user.js";var hash="774156ec34b7c8fd3a179be2830a0cb420ee2b3b";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\polpe\\bootcamp\\collab\\skylab-bootcamp-202004\\staff\\pol-pedro\\takemytask\\takemytask-server-logic\\update-user.js",statementMap:{"0":{start:{line:1,column:0},end:{line:1,column:46}},"1":{start:{line:2,column:0},end:{line:2,column:44}},"2":{start:{line:3,column:41},end:{line:3,column:70}},"3":{start:{line:4,column:59},end:{line:4,column:85}},"4":{start:{line:18,column:0},end:{line:51,column:1}},"5":{start:{line:20,column:4},end:{line:20,column:35}},"6":{start:{line:22,column:19},end:{line:22,column:24}},"7":{start:{line:24,column:4},end:{line:50,column:8}},"8":{start:{line:27,column:8},end:{line:27,column:76}},"9":{start:{line:29,column:8},end:{line:29,column:89}},"10":{start:{line:29,column:19},end:{line:29,column:89}},"11":{start:{line:31,column:8},end:{line:31,column:93}},"12":{start:{line:31,column:19},end:{line:31,column:93}},"13":{start:{line:35,column:8},end:{line:46,column:9}},"14":{start:{line:37,column:12},end:{line:42,column:13}},"15":{start:{line:38,column:16},end:{line:41,column:17}},"16":{start:{line:39,column:20},end:{line:39,column:35}},"17":{start:{line:40,column:20},end:{line:40,column:25}},"18":{start:{line:43,column:12},end:{line:43,column:96}},"19":{start:{line:43,column:36},end:{line:43,column:96}},"20":{start:{line:45,column:12},end:{line:45,column:29}},"21":{start:{line:48,column:8},end:{line:48,column:25}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:18,column:17},end:{line:18,column:18}},loc:{start:{line:18,column:35},end:{line:51,column:1}},line:18},"1":{name:"(anonymous_1)",decl:{start:{line:24,column:12},end:{line:24,column:13}},loc:{start:{line:24,column:24},end:{line:50,column:5}},line:24}},branchMap:{"0":{loc:{start:{line:29,column:8},end:{line:29,column:89}},type:"if",locations:[{start:{line:29,column:8},end:{line:29,column:89}},{start:{line:29,column:8},end:{line:29,column:89}}],line:29},"1":{loc:{start:{line:31,column:8},end:{line:31,column:93}},type:"if",locations:[{start:{line:31,column:8},end:{line:31,column:93}},{start:{line:31,column:8},end:{line:31,column:93}}],line:31},"2":{loc:{start:{line:38,column:16},end:{line:41,column:17}},type:"if",locations:[{start:{line:38,column:16},end:{line:41,column:17}},{start:{line:38,column:16},end:{line:41,column:17}}],line:38},"3":{loc:{start:{line:43,column:12},end:{line:43,column:96}},type:"if",locations:[{start:{line:43,column:12},end:{line:43,column:96}},{start:{line:43,column:12},end:{line:43,column:96}}],line:43}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0},f:{"0":0,"1":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"774156ec34b7c8fd3a179be2830a0cb420ee2b3b"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_1h62rz4if2=function(){return actualCoverage;};}return actualCoverage;}cov_1h62rz4if2();cov_1h62rz4if2().s[0]++;require('takemytask-commons/polyfills/string');cov_1h62rz4if2().s[1]++;require('takemytask-commons/polyfills/json');const{errors:{UnexistenceError}}=(cov_1h62rz4if2().s[2]++,require('takemytask-commons'));const{models:{User,Worker},mongoose:{ObjectId}}=(cov_1h62rz4if2().s[3]++,require('takemytask-data'));/**
 * Updates the user or worker params sended
 *
 * @param {string} userId worker name
 * @param {object} body worker surname 
 * 
 * @returns {undefined}
 *
 * @throws {UnexistenceError} if user or worker dont existsd
 */cov_1h62rz4if2().s[4]++;module.exports=(userId,body)=>{cov_1h62rz4if2().f[0]++;cov_1h62rz4if2().s[5]++;String.validate.notVoid(userId);let valParam=(cov_1h62rz4if2().s[6]++,false);cov_1h62rz4if2().s[7]++;return(async()=>{cov_1h62rz4if2().f[1]++;let user;cov_1h62rz4if2().s[8]++;user=await User.findOne({_id:ObjectId(userId)},{password:0});cov_1h62rz4if2().s[9]++;if(!user){cov_1h62rz4if2().b[0][0]++;cov_1h62rz4if2().s[10]++;user=await Worker.findOne({_id:ObjectId(userId)},{password:0});}else{cov_1h62rz4if2().b[0][1]++;}cov_1h62rz4if2().s[11]++;if(!user){cov_1h62rz4if2().b[1][0]++;cov_1h62rz4if2().s[12]++;throw new UnexistenceError(`user or worker with id ${userId} dont exists`);}else{cov_1h62rz4if2().b[1][1]++;}// await User.deleteOne({_id: ObjectId(userId)})
cov_1h62rz4if2().s[13]++;for(var i in body){cov_1h62rz4if2().s[14]++;for(var g in user){cov_1h62rz4if2().s[15]++;if(i===g){cov_1h62rz4if2().b[2][0]++;cov_1h62rz4if2().s[16]++;valParam=true;cov_1h62rz4if2().s[17]++;break;}else{cov_1h62rz4if2().b[2][1]++;}}cov_1h62rz4if2().s[18]++;if(valParam===false){cov_1h62rz4if2().b[3][0]++;cov_1h62rz4if2().s[19]++;throw new UnexistenceError(`${i} is not a prameter of user`);}else{cov_1h62rz4if2().b[3][1]++;}cov_1h62rz4if2().s[20]++;user[i]=body[i];}cov_1h62rz4if2().s[21]++;await user.save();})();};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVwZGF0ZS11c2VyLmpzIl0sIm5hbWVzIjpbInJlcXVpcmUiLCJlcnJvcnMiLCJVbmV4aXN0ZW5jZUVycm9yIiwibW9kZWxzIiwiVXNlciIsIldvcmtlciIsIm1vbmdvb3NlIiwiT2JqZWN0SWQiLCJtb2R1bGUiLCJleHBvcnRzIiwidXNlcklkIiwiYm9keSIsIlN0cmluZyIsInZhbGlkYXRlIiwibm90Vm9pZCIsInZhbFBhcmFtIiwidXNlciIsImZpbmRPbmUiLCJfaWQiLCJwYXNzd29yZCIsImkiLCJnIiwic2F2ZSJdLCJtYXBwaW5ncyI6InVxR0FlWTttSEFmWkEsT0FBTyxDQUFDLHFDQUFELENBQVAsQyx3QkFDQUEsT0FBTyxDQUFDLG1DQUFELENBQVAsQ0FDQSxLQUFNLENBQUVDLE1BQU0sQ0FBRSxDQUFFQyxnQkFBRixDQUFWLDJCQUFtQ0YsT0FBTyxDQUFDLG9CQUFELENBQTFDLENBQU4sQ0FDQSxLQUFNLENBQUVHLE1BQU0sQ0FBRSxDQUFFQyxJQUFGLENBQVFDLE1BQVIsQ0FBVixDQUE0QkMsUUFBUSxDQUFFLENBQUNDLFFBQUQsQ0FBdEMsMkJBQXFEUCxPQUFPLENBQUMsaUJBQUQsQ0FBNUQsQ0FBTixDQUVBOzs7Ozs7Ozs7MkJBWUFRLE1BQU0sQ0FBQ0MsT0FBUCxDQUFpQixDQUFDQyxNQUFELENBQVNDLElBQVQsR0FBa0IsaURBRS9CQyxNQUFNLENBQUNDLFFBQVAsQ0FBZ0JDLE9BQWhCLENBQXdCSixNQUF4QixFQUVBLEdBQUlLLENBQUFBLFFBQVEsMEJBQUcsS0FBSCxDQUFaLENBSitCLHdCQU0vQixNQUFPLENBQUMsU0FBWSx5QkFDaEIsR0FBSUMsQ0FBQUEsSUFBSixDQURnQix3QkFHaEJBLElBQUksQ0FBRyxLQUFNWixDQUFBQSxJQUFJLENBQUNhLE9BQUwsQ0FBYSxDQUFFQyxHQUFHLENBQUVYLFFBQVEsQ0FBQ0csTUFBRCxDQUFmLENBQWIsQ0FBd0MsQ0FBQ1MsUUFBUSxDQUFFLENBQVgsQ0FBeEMsQ0FBYixDQUhnQix3QkFLaEIsR0FBSSxDQUFDSCxJQUFMLENBQVcscURBQUFBLElBQUksQ0FBRyxLQUFNWCxDQUFBQSxNQUFNLENBQUNZLE9BQVAsQ0FBZSxDQUFFQyxHQUFHLENBQUVYLFFBQVEsQ0FBQ0csTUFBRCxDQUFmLENBQWYsQ0FBMEMsQ0FBQ1MsUUFBUSxDQUFFLENBQVgsQ0FBMUMsQ0FBYixDQUFzRSxDQUFqRixpQ0FMZ0IseUJBT2hCLEdBQUksQ0FBQ0gsSUFBTCxDQUFXLDBEQUFNLElBQUlkLENBQUFBLGdCQUFKLENBQXNCLDBCQUF5QlEsTUFBTyxjQUF0RCxDQUFOLENBQTBFLENBQXJGLGlDQUVBO0FBVGdCLHlCQVdoQixJQUFJLEdBQUlVLENBQUFBLENBQVIsR0FBYVQsQ0FBQUEsSUFBYixDQUFrQiwwQkFFZCxJQUFLLEdBQUlVLENBQUFBLENBQVQsR0FBY0wsQ0FBQUEsSUFBZCxDQUFtQiwwQkFDZixHQUFHSSxDQUFDLEdBQUtDLENBQVQsQ0FBVyxxREFDUE4sUUFBUSxDQUFHLElBQVgsQ0FETyx5QkFFUCxNQUNILENBSEQsaUNBSUgsQ0FQYSx5QkFRZCxHQUFJQSxRQUFRLEdBQUssS0FBakIsQ0FBd0IsMERBQU0sSUFBSWIsQ0FBQUEsZ0JBQUosQ0FBc0IsR0FBRWtCLENBQUUsNEJBQTFCLENBQU4sQ0FBNEQsQ0FBcEYsaUNBUmMseUJBVWRKLElBQUksQ0FBQ0ksQ0FBRCxDQUFKLENBQVVULElBQUksQ0FBQ1MsQ0FBRCxDQUFkLENBQ0gsQ0F0QmUseUJBd0JoQixLQUFNSixDQUFBQSxJQUFJLENBQUNNLElBQUwsRUFBTixDQUVILENBMUJNLEdBQVAsQ0EyQkgsQ0FqQ0QiLCJzb3VyY2VzQ29udGVudCI6WyJyZXF1aXJlKCd0YWtlbXl0YXNrLWNvbW1vbnMvcG9seWZpbGxzL3N0cmluZycpXHJcbnJlcXVpcmUoJ3Rha2VteXRhc2stY29tbW9ucy9wb2x5ZmlsbHMvanNvbicpXHJcbmNvbnN0IHsgZXJyb3JzOiB7IFVuZXhpc3RlbmNlRXJyb3IgfSB9ID0gcmVxdWlyZSgndGFrZW15dGFzay1jb21tb25zJylcclxuY29uc3QgeyBtb2RlbHM6IHsgVXNlciwgV29ya2VyIH0sIG1vbmdvb3NlOiB7T2JqZWN0SWR9IH0gPSByZXF1aXJlKCd0YWtlbXl0YXNrLWRhdGEnKVxyXG5cclxuLyoqXHJcbiAqIFVwZGF0ZXMgdGhlIHVzZXIgb3Igd29ya2VyIHBhcmFtcyBzZW5kZWRcclxuICpcclxuICogQHBhcmFtIHtzdHJpbmd9IHVzZXJJZCB3b3JrZXIgbmFtZVxyXG4gKiBAcGFyYW0ge29iamVjdH0gYm9keSB3b3JrZXIgc3VybmFtZSBcclxuICogXHJcbiAqIEByZXR1cm5zIHt1bmRlZmluZWR9XHJcbiAqXHJcbiAqIEB0aHJvd3Mge1VuZXhpc3RlbmNlRXJyb3J9IGlmIHVzZXIgb3Igd29ya2VyIGRvbnQgZXhpc3RzZFxyXG4gKi9cclxuXHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9ICh1c2VySWQsIGJvZHkpID0+IHtcclxuXHJcbiAgICBTdHJpbmcudmFsaWRhdGUubm90Vm9pZCh1c2VySWQpXHJcblxyXG4gICAgbGV0IHZhbFBhcmFtID0gZmFsc2VcclxuXHJcbiAgICByZXR1cm4gKGFzeW5jICgpID0+IHtcclxuICAgICAgICBsZXQgdXNlclxyXG4gICAgICAgIFxyXG4gICAgICAgIHVzZXIgPSBhd2FpdCBVc2VyLmZpbmRPbmUoeyBfaWQ6IE9iamVjdElkKHVzZXJJZCkgfSwge3Bhc3N3b3JkOiAwIH0pXHJcblxyXG4gICAgICAgIGlmICghdXNlcikgdXNlciA9IGF3YWl0IFdvcmtlci5maW5kT25lKHsgX2lkOiBPYmplY3RJZCh1c2VySWQpIH0sIHtwYXNzd29yZDogMCB9KVxyXG5cclxuICAgICAgICBpZiAoIXVzZXIpIHRocm93IG5ldyBVbmV4aXN0ZW5jZUVycm9yKGB1c2VyIG9yIHdvcmtlciB3aXRoIGlkICR7dXNlcklkfSBkb250IGV4aXN0c2ApXHJcblxyXG4gICAgICAgIC8vIGF3YWl0IFVzZXIuZGVsZXRlT25lKHtfaWQ6IE9iamVjdElkKHVzZXJJZCl9KVxyXG5cclxuICAgICAgICBmb3IodmFyIGkgaW4gYm9keSl7XHJcblxyXG4gICAgICAgICAgICBmb3IgKHZhciBnIGluIHVzZXIpe1xyXG4gICAgICAgICAgICAgICAgaWYoaSA9PT0gZyl7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFsUGFyYW0gPSB0cnVlXHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWsgXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHZhbFBhcmFtID09PSBmYWxzZSkgdGhyb3cgbmV3IFVuZXhpc3RlbmNlRXJyb3IoYCR7aX0gaXMgbm90IGEgcHJhbWV0ZXIgb2YgdXNlcmApXHJcblxyXG4gICAgICAgICAgICB1c2VyW2ldID0gYm9keVtpXVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgYXdhaXQgdXNlci5zYXZlKClcclxuXHJcbiAgICB9KSgpXHJcbn0iXX0=