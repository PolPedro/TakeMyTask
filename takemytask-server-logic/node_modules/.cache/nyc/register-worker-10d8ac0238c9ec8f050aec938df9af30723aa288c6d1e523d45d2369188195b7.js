function cov_9wghk32m3(){var path="C:\\Users\\polpe\\bootcamp\\collab\\skylab-bootcamp-202004\\staff\\pol-pedro\\takemytask\\takemytask-server-logic\\register-worker.js";var hash="4e90d8299fca4be1007df75e55a79d2797417de6";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\polpe\\bootcamp\\collab\\skylab-bootcamp-202004\\staff\\pol-pedro\\takemytask\\takemytask-server-logic\\register-worker.js",statementMap:{"0":{start:{line:1,column:0},end:{line:1,column:46}},"1":{start:{line:2,column:0},end:{line:2,column:44}},"2":{start:{line:3,column:0},end:{line:3,column:46}},"3":{start:{line:4,column:0},end:{line:4,column:46}},"4":{start:{line:5,column:57},end:{line:5,column:86}},"5":{start:{line:6,column:37},end:{line:6,column:63}},"6":{start:{line:7,column:15},end:{line:7,column:34}},"7":{start:{line:9,column:0},end:{line:35,column:1}},"8":{start:{line:10,column:4},end:{line:10,column:33}},"9":{start:{line:11,column:4},end:{line:11,column:36}},"10":{start:{line:12,column:4},end:{line:12,column:34}},"11":{start:{line:13,column:4},end:{line:13,column:25}},"12":{start:{line:14,column:4},end:{line:14,column:37}},"13":{start:{line:15,column:4},end:{line:15,column:39}},"14":{start:{line:16,column:4},end:{line:16,column:40}},"15":{start:{line:17,column:4},end:{line:17,column:41}},"16":{start:{line:18,column:4},end:{line:18,column:40}},"17":{start:{line:19,column:4},end:{line:19,column:34}},"18":{start:{line:20,column:4},end:{line:20,column:44}},"19":{start:{line:22,column:4},end:{line:34,column:8}},"20":{start:{line:23,column:21},end:{line:23,column:50}},"21":{start:{line:25,column:8},end:{line:25,column:86}},"22":{start:{line:25,column:18},end:{line:25,column:86}},"23":{start:{line:27,column:23},end:{line:27,column:54}},"24":{start:{line:29,column:8},end:{line:29,column:90}},"25":{start:{line:29,column:20},end:{line:29,column:90}},"26":{start:{line:31,column:21},end:{line:31,column:52}},"27":{start:{line:33,column:8},end:{line:33,column:161}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:9,column:17},end:{line:9,column:18}},loc:{start:{line:9,column:145},end:{line:35,column:1}},line:9},"1":{name:"(anonymous_1)",decl:{start:{line:22,column:12},end:{line:22,column:13}},loc:{start:{line:22,column:24},end:{line:34,column:5}},line:22}},branchMap:{"0":{loc:{start:{line:25,column:8},end:{line:25,column:86}},type:"if",locations:[{start:{line:25,column:8},end:{line:25,column:86}},{start:{line:25,column:8},end:{line:25,column:86}}],line:25},"1":{loc:{start:{line:29,column:8},end:{line:29,column:90}},type:"if",locations:[{start:{line:29,column:8},end:{line:29,column:90}},{start:{line:29,column:8},end:{line:29,column:90}}],line:29}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0},f:{"0":0,"1":0},b:{"0":[0,0],"1":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"4e90d8299fca4be1007df75e55a79d2797417de6"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_9wghk32m3=function(){return actualCoverage;};}return actualCoverage;}cov_9wghk32m3();cov_9wghk32m3().s[0]++;require('takemytask-commons/polyfills/string');cov_9wghk32m3().s[1]++;require('takemytask-commons/polyfills/json');cov_9wghk32m3().s[2]++;require('takemytask-commons/polyfills/number');cov_9wghk32m3().s[3]++;require('takemytask-commons/polyfills/object');const{utils:{Email},errors:{DuplicityError}}=(cov_9wghk32m3().s[4]++,require('takemytask-commons'));const{models:{Worker,User}}=(cov_9wghk32m3().s[5]++,require('takemytask-data'));const bcrypt=(cov_9wghk32m3().s[6]++,require('bcryptjs'));cov_9wghk32m3().s[7]++;module.exports=(name,surname,email,password,adress,bankAcount,description,presentation,pricingHour,jobCategories,workingDistance)=>{cov_9wghk32m3().f[0]++;cov_9wghk32m3().s[8]++;String.validate.notVoid(name);cov_9wghk32m3().s[9]++;String.validate.notVoid(surname);cov_9wghk32m3().s[10]++;String.validate.notVoid(email);cov_9wghk32m3().s[11]++;Email.validate(email);cov_9wghk32m3().s[12]++;String.validate.notVoid(password);cov_9wghk32m3().s[13]++;String.validate.notVoid(bankAcount);cov_9wghk32m3().s[14]++;String.validate.notVoid(description);cov_9wghk32m3().s[15]++;String.validate.notVoid(presentation);cov_9wghk32m3().s[16]++;Number.validate.integer(pricingHour);cov_9wghk32m3().s[17]++;Object.validate(jobCategories);cov_9wghk32m3().s[18]++;Number.validate.integer(workingDistance);cov_9wghk32m3().s[19]++;return(async()=>{cov_9wghk32m3().f[1]++;const user=(cov_9wghk32m3().s[20]++,await User.findOne({email}));cov_9wghk32m3().s[21]++;if(user){cov_9wghk32m3().b[0][0]++;cov_9wghk32m3().s[22]++;throw new DuplicityError(`user with e-mail ${email} already exists`);}else{cov_9wghk32m3().b[0][1]++;}const worker=(cov_9wghk32m3().s[23]++,await Worker.findOne({email}));cov_9wghk32m3().s[24]++;if(worker){cov_9wghk32m3().b[1][0]++;cov_9wghk32m3().s[25]++;throw new DuplicityError(`worker with e-mail ${email} already exists`);}else{cov_9wghk32m3().b[1][1]++;}const hash=(cov_9wghk32m3().s[26]++,await bcrypt.hash(password,10));cov_9wghk32m3().s[27]++;await Worker.create({name,surname,email,password:hash,adress,bankAcount,description,presentation,pricingHour,jobCategories,workingDistance});})();};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlZ2lzdGVyLXdvcmtlci5qcyJdLCJuYW1lcyI6WyJyZXF1aXJlIiwidXRpbHMiLCJFbWFpbCIsImVycm9ycyIsIkR1cGxpY2l0eUVycm9yIiwibW9kZWxzIiwiV29ya2VyIiwiVXNlciIsImJjcnlwdCIsIm1vZHVsZSIsImV4cG9ydHMiLCJuYW1lIiwic3VybmFtZSIsImVtYWlsIiwicGFzc3dvcmQiLCJhZHJlc3MiLCJiYW5rQWNvdW50IiwiZGVzY3JpcHRpb24iLCJwcmVzZW50YXRpb24iLCJwcmljaW5nSG91ciIsImpvYkNhdGVnb3JpZXMiLCJ3b3JraW5nRGlzdGFuY2UiLCJTdHJpbmciLCJ2YWxpZGF0ZSIsIm5vdFZvaWQiLCJOdW1iZXIiLCJpbnRlZ2VyIiwiT2JqZWN0IiwidXNlciIsImZpbmRPbmUiLCJ3b3JrZXIiLCJoYXNoIiwiY3JlYXRlIl0sIm1hcHBpbmdzIjoiZ29HQWVZO2dIQWZaQSxPQUFPLENBQUMscUNBQUQsQ0FBUCxDLHVCQUNBQSxPQUFPLENBQUMsbUNBQUQsQ0FBUCxDLHVCQUNBQSxPQUFPLENBQUMscUNBQUQsQ0FBUCxDLHVCQUNBQSxPQUFPLENBQUMscUNBQUQsQ0FBUCxDQUNBLEtBQU0sQ0FBRUMsS0FBSyxDQUFFLENBQUVDLEtBQUYsQ0FBVCxDQUFvQkMsTUFBTSxDQUFFLENBQUVDLGNBQUYsQ0FBNUIsMEJBQW1ESixPQUFPLENBQUMsb0JBQUQsQ0FBMUQsQ0FBTixDQUNBLEtBQU0sQ0FBRUssTUFBTSxDQUFFLENBQUVDLE1BQUYsQ0FBVUMsSUFBVixDQUFWLDBCQUErQlAsT0FBTyxDQUFDLGlCQUFELENBQXRDLENBQU4sQ0FDQSxLQUFNUSxDQUFBQSxNQUFNLHlCQUFHUixPQUFPLENBQUMsVUFBRCxDQUFWLENBQVosQyx1QkFFQVMsTUFBTSxDQUFDQyxPQUFQLENBQWlCLENBQUNDLElBQUQsQ0FBT0MsT0FBUCxDQUFnQkMsS0FBaEIsQ0FBdUJDLFFBQXZCLENBQWlDQyxNQUFqQyxDQUF5Q0MsVUFBekMsQ0FBcURDLFdBQXJELENBQWtFQyxZQUFsRSxDQUFnRkMsV0FBaEYsQ0FBNkZDLGFBQTdGLENBQTRHQyxlQUE1RyxHQUFnSSwrQ0FDN0lDLE1BQU0sQ0FBQ0MsUUFBUCxDQUFnQkMsT0FBaEIsQ0FBd0JiLElBQXhCLEVBRDZJLHVCQUU3SVcsTUFBTSxDQUFDQyxRQUFQLENBQWdCQyxPQUFoQixDQUF3QlosT0FBeEIsRUFGNkksd0JBRzdJVSxNQUFNLENBQUNDLFFBQVAsQ0FBZ0JDLE9BQWhCLENBQXdCWCxLQUF4QixFQUg2SSx3QkFJN0lYLEtBQUssQ0FBQ3FCLFFBQU4sQ0FBZVYsS0FBZixFQUo2SSx3QkFLN0lTLE1BQU0sQ0FBQ0MsUUFBUCxDQUFnQkMsT0FBaEIsQ0FBd0JWLFFBQXhCLEVBTDZJLHdCQU03SVEsTUFBTSxDQUFDQyxRQUFQLENBQWdCQyxPQUFoQixDQUF3QlIsVUFBeEIsRUFONkksd0JBTzdJTSxNQUFNLENBQUNDLFFBQVAsQ0FBZ0JDLE9BQWhCLENBQXdCUCxXQUF4QixFQVA2SSx3QkFRN0lLLE1BQU0sQ0FBQ0MsUUFBUCxDQUFnQkMsT0FBaEIsQ0FBd0JOLFlBQXhCLEVBUjZJLHdCQVM3SU8sTUFBTSxDQUFDRixRQUFQLENBQWdCRyxPQUFoQixDQUF3QlAsV0FBeEIsRUFUNkksd0JBVTdJUSxNQUFNLENBQUNKLFFBQVAsQ0FBZ0JILGFBQWhCLEVBVjZJLHdCQVc3SUssTUFBTSxDQUFDRixRQUFQLENBQWdCRyxPQUFoQixDQUF3QkwsZUFBeEIsRUFYNkksd0JBYTdJLE1BQU8sQ0FBQyxTQUFZLHdCQUNoQixLQUFNTyxDQUFBQSxJQUFJLDBCQUFHLEtBQU1yQixDQUFBQSxJQUFJLENBQUNzQixPQUFMLENBQWMsQ0FBQ2hCLEtBQUQsQ0FBZCxDQUFULENBQVYsQ0FEZ0Isd0JBR2hCLEdBQUllLElBQUosQ0FBVSx3REFBTSxJQUFJeEIsQ0FBQUEsY0FBSixDQUFvQixvQkFBbUJTLEtBQU0saUJBQTdDLENBQU4sQ0FBb0UsQ0FBOUUsZ0NBRUEsS0FBTWlCLENBQUFBLE1BQU0sMEJBQUcsS0FBTXhCLENBQUFBLE1BQU0sQ0FBQ3VCLE9BQVAsQ0FBZSxDQUFFaEIsS0FBRixDQUFmLENBQVQsQ0FBWixDQUxnQix3QkFPaEIsR0FBSWlCLE1BQUosQ0FBWSx3REFBTSxJQUFJMUIsQ0FBQUEsY0FBSixDQUFvQixzQkFBcUJTLEtBQU0saUJBQS9DLENBQU4sQ0FBc0UsQ0FBbEYsZ0NBRUEsS0FBTWtCLENBQUFBLElBQUksMEJBQUcsS0FBTXZCLENBQUFBLE1BQU0sQ0FBQ3VCLElBQVAsQ0FBWWpCLFFBQVosQ0FBc0IsRUFBdEIsQ0FBVCxDQUFWLENBVGdCLHdCQVdoQixLQUFNUixDQUFBQSxNQUFNLENBQUMwQixNQUFQLENBQWMsQ0FBRXJCLElBQUYsQ0FBUUMsT0FBUixDQUFpQkMsS0FBakIsQ0FBd0JDLFFBQVEsQ0FBRWlCLElBQWxDLENBQXdDaEIsTUFBeEMsQ0FBZ0RDLFVBQWhELENBQTREQyxXQUE1RCxDQUF5RUMsWUFBekUsQ0FBdUZDLFdBQXZGLENBQW9HQyxhQUFwRyxDQUFtSEMsZUFBbkgsQ0FBZCxDQUFOLENBQ0gsQ0FaTSxHQUFQLENBYUgsQ0ExQkQiLCJzb3VyY2VzQ29udGVudCI6WyJyZXF1aXJlKCd0YWtlbXl0YXNrLWNvbW1vbnMvcG9seWZpbGxzL3N0cmluZycpXHJcbnJlcXVpcmUoJ3Rha2VteXRhc2stY29tbW9ucy9wb2x5ZmlsbHMvanNvbicpXHJcbnJlcXVpcmUoJ3Rha2VteXRhc2stY29tbW9ucy9wb2x5ZmlsbHMvbnVtYmVyJylcclxucmVxdWlyZSgndGFrZW15dGFzay1jb21tb25zL3BvbHlmaWxscy9vYmplY3QnKVxyXG5jb25zdCB7IHV0aWxzOiB7IEVtYWlsIH0sIGVycm9yczogeyBEdXBsaWNpdHlFcnJvciB9IH0gPSByZXF1aXJlKCd0YWtlbXl0YXNrLWNvbW1vbnMnKVxyXG5jb25zdCB7IG1vZGVsczogeyBXb3JrZXIsIFVzZXIgfSB9ID0gcmVxdWlyZSgndGFrZW15dGFzay1kYXRhJylcclxuY29uc3QgYmNyeXB0ID0gcmVxdWlyZSgnYmNyeXB0anMnKVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSAobmFtZSwgc3VybmFtZSwgZW1haWwsIHBhc3N3b3JkLCBhZHJlc3MsIGJhbmtBY291bnQsIGRlc2NyaXB0aW9uLCBwcmVzZW50YXRpb24sIHByaWNpbmdIb3VyLCBqb2JDYXRlZ29yaWVzLCB3b3JraW5nRGlzdGFuY2UpID0+IHtcclxuICAgIFN0cmluZy52YWxpZGF0ZS5ub3RWb2lkKG5hbWUpXHJcbiAgICBTdHJpbmcudmFsaWRhdGUubm90Vm9pZChzdXJuYW1lKVxyXG4gICAgU3RyaW5nLnZhbGlkYXRlLm5vdFZvaWQoZW1haWwpXHJcbiAgICBFbWFpbC52YWxpZGF0ZShlbWFpbClcclxuICAgIFN0cmluZy52YWxpZGF0ZS5ub3RWb2lkKHBhc3N3b3JkKVxyXG4gICAgU3RyaW5nLnZhbGlkYXRlLm5vdFZvaWQoYmFua0Fjb3VudClcclxuICAgIFN0cmluZy52YWxpZGF0ZS5ub3RWb2lkKGRlc2NyaXB0aW9uKVxyXG4gICAgU3RyaW5nLnZhbGlkYXRlLm5vdFZvaWQocHJlc2VudGF0aW9uKVxyXG4gICAgTnVtYmVyLnZhbGlkYXRlLmludGVnZXIocHJpY2luZ0hvdXIpXHJcbiAgICBPYmplY3QudmFsaWRhdGUoam9iQ2F0ZWdvcmllcylcclxuICAgIE51bWJlci52YWxpZGF0ZS5pbnRlZ2VyKHdvcmtpbmdEaXN0YW5jZSlcclxuXHJcbiAgICByZXR1cm4gKGFzeW5jICgpID0+IHtcclxuICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlci5maW5kT25lKCB7ZW1haWx9IClcclxuXHJcbiAgICAgICAgaWYgKHVzZXIpIHRocm93IG5ldyBEdXBsaWNpdHlFcnJvcihgdXNlciB3aXRoIGUtbWFpbCAke2VtYWlsfSBhbHJlYWR5IGV4aXN0c2ApXHJcblxyXG4gICAgICAgIGNvbnN0IHdvcmtlciA9IGF3YWl0IFdvcmtlci5maW5kT25lKHsgZW1haWwgfSlcclxuXHJcbiAgICAgICAgaWYgKHdvcmtlcikgdGhyb3cgbmV3IER1cGxpY2l0eUVycm9yKGB3b3JrZXIgd2l0aCBlLW1haWwgJHtlbWFpbH0gYWxyZWFkeSBleGlzdHNgKVxyXG5cclxuICAgICAgICBjb25zdCBoYXNoID0gYXdhaXQgYmNyeXB0Lmhhc2gocGFzc3dvcmQsIDEwKVxyXG5cclxuICAgICAgICBhd2FpdCBXb3JrZXIuY3JlYXRlKHsgbmFtZSwgc3VybmFtZSwgZW1haWwsIHBhc3N3b3JkOiBoYXNoLCBhZHJlc3MsIGJhbmtBY291bnQsIGRlc2NyaXB0aW9uLCBwcmVzZW50YXRpb24sIHByaWNpbmdIb3VyLCBqb2JDYXRlZ29yaWVzLCB3b3JraW5nRGlzdGFuY2UgfSlcclxuICAgIH0pKClcclxufSJdfQ==