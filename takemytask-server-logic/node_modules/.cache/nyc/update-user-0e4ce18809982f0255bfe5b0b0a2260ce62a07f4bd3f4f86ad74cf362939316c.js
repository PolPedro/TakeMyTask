function cov_1h62rz4if2(){var path="C:\\Users\\polpe\\bootcamp\\collab\\skylab-bootcamp-202004\\staff\\pol-pedro\\takemytask\\takemytask-server-logic\\update-user.js";var hash="2b930dfb847cb02a0485060b722305f587ef3a9e";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\polpe\\bootcamp\\collab\\skylab-bootcamp-202004\\staff\\pol-pedro\\takemytask\\takemytask-server-logic\\update-user.js",statementMap:{"0":{start:{line:1,column:0},end:{line:1,column:46}},"1":{start:{line:2,column:0},end:{line:2,column:44}},"2":{start:{line:3,column:41},end:{line:3,column:70}},"3":{start:{line:4,column:59},end:{line:4,column:85}},"4":{start:{line:7,column:0},end:{line:40,column:1}},"5":{start:{line:9,column:4},end:{line:9,column:35}},"6":{start:{line:11,column:19},end:{line:11,column:24}},"7":{start:{line:13,column:4},end:{line:39,column:8}},"8":{start:{line:16,column:8},end:{line:16,column:76}},"9":{start:{line:18,column:8},end:{line:18,column:89}},"10":{start:{line:18,column:19},end:{line:18,column:89}},"11":{start:{line:20,column:8},end:{line:20,column:93}},"12":{start:{line:20,column:19},end:{line:20,column:93}},"13":{start:{line:24,column:8},end:{line:35,column:9}},"14":{start:{line:26,column:12},end:{line:31,column:13}},"15":{start:{line:27,column:16},end:{line:30,column:17}},"16":{start:{line:28,column:20},end:{line:28,column:35}},"17":{start:{line:29,column:20},end:{line:29,column:25}},"18":{start:{line:32,column:12},end:{line:32,column:96}},"19":{start:{line:32,column:36},end:{line:32,column:96}},"20":{start:{line:34,column:12},end:{line:34,column:29}},"21":{start:{line:37,column:8},end:{line:37,column:25}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:7,column:17},end:{line:7,column:18}},loc:{start:{line:7,column:35},end:{line:40,column:1}},line:7},"1":{name:"(anonymous_1)",decl:{start:{line:13,column:12},end:{line:13,column:13}},loc:{start:{line:13,column:24},end:{line:39,column:5}},line:13}},branchMap:{"0":{loc:{start:{line:18,column:8},end:{line:18,column:89}},type:"if",locations:[{start:{line:18,column:8},end:{line:18,column:89}},{start:{line:18,column:8},end:{line:18,column:89}}],line:18},"1":{loc:{start:{line:20,column:8},end:{line:20,column:93}},type:"if",locations:[{start:{line:20,column:8},end:{line:20,column:93}},{start:{line:20,column:8},end:{line:20,column:93}}],line:20},"2":{loc:{start:{line:27,column:16},end:{line:30,column:17}},type:"if",locations:[{start:{line:27,column:16},end:{line:30,column:17}},{start:{line:27,column:16},end:{line:30,column:17}}],line:27},"3":{loc:{start:{line:32,column:12},end:{line:32,column:96}},type:"if",locations:[{start:{line:32,column:12},end:{line:32,column:96}},{start:{line:32,column:12},end:{line:32,column:96}}],line:32}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0},f:{"0":0,"1":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"2b930dfb847cb02a0485060b722305f587ef3a9e"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_1h62rz4if2=function(){return actualCoverage;};}return actualCoverage;}cov_1h62rz4if2();cov_1h62rz4if2().s[0]++;require('takemytask-commons/polyfills/string');cov_1h62rz4if2().s[1]++;require('takemytask-commons/polyfills/json');const{errors:{UnexistenceError}}=(cov_1h62rz4if2().s[2]++,require('takemytask-commons'));const{models:{User,Worker},mongoose:{ObjectId}}=(cov_1h62rz4if2().s[3]++,require('takemytask-data'));cov_1h62rz4if2().s[4]++;module.exports=(userId,body)=>{cov_1h62rz4if2().f[0]++;cov_1h62rz4if2().s[5]++;String.validate.notVoid(userId);let valParam=(cov_1h62rz4if2().s[6]++,false);cov_1h62rz4if2().s[7]++;return(async()=>{cov_1h62rz4if2().f[1]++;let user;cov_1h62rz4if2().s[8]++;user=await User.findOne({_id:ObjectId(userId)},{password:0});cov_1h62rz4if2().s[9]++;if(!user){cov_1h62rz4if2().b[0][0]++;cov_1h62rz4if2().s[10]++;user=await Worker.findOne({_id:ObjectId(userId)},{password:0});}else{cov_1h62rz4if2().b[0][1]++;}cov_1h62rz4if2().s[11]++;if(!user){cov_1h62rz4if2().b[1][0]++;cov_1h62rz4if2().s[12]++;throw new UnexistenceError(`user or worker with id ${userId} dont exists`);}else{cov_1h62rz4if2().b[1][1]++;}// await User.deleteOne({_id: ObjectId(userId)})
cov_1h62rz4if2().s[13]++;for(var i in body){cov_1h62rz4if2().s[14]++;for(var g in user){cov_1h62rz4if2().s[15]++;if(i===g){cov_1h62rz4if2().b[2][0]++;cov_1h62rz4if2().s[16]++;valParam=true;cov_1h62rz4if2().s[17]++;break;}else{cov_1h62rz4if2().b[2][1]++;}}cov_1h62rz4if2().s[18]++;if(valParam===false){cov_1h62rz4if2().b[3][0]++;cov_1h62rz4if2().s[19]++;throw new UnexistenceError(`${i} is not a prameter of user`);}else{cov_1h62rz4if2().b[3][1]++;}cov_1h62rz4if2().s[20]++;user[i]=body[i];}cov_1h62rz4if2().s[21]++;await user.save();})();};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVwZGF0ZS11c2VyLmpzIl0sIm5hbWVzIjpbInJlcXVpcmUiLCJlcnJvcnMiLCJVbmV4aXN0ZW5jZUVycm9yIiwibW9kZWxzIiwiVXNlciIsIldvcmtlciIsIm1vbmdvb3NlIiwiT2JqZWN0SWQiLCJtb2R1bGUiLCJleHBvcnRzIiwidXNlcklkIiwiYm9keSIsIlN0cmluZyIsInZhbGlkYXRlIiwibm90Vm9pZCIsInZhbFBhcmFtIiwidXNlciIsImZpbmRPbmUiLCJfaWQiLCJwYXNzd29yZCIsImkiLCJnIiwic2F2ZSJdLCJtYXBwaW5ncyI6ImdxR0FlWTttSEFmWkEsT0FBTyxDQUFDLHFDQUFELENBQVAsQyx3QkFDQUEsT0FBTyxDQUFDLG1DQUFELENBQVAsQ0FDQSxLQUFNLENBQUVDLE1BQU0sQ0FBRSxDQUFFQyxnQkFBRixDQUFWLDJCQUFtQ0YsT0FBTyxDQUFDLG9CQUFELENBQTFDLENBQU4sQ0FDQSxLQUFNLENBQUVHLE1BQU0sQ0FBRSxDQUFFQyxJQUFGLENBQVFDLE1BQVIsQ0FBVixDQUE0QkMsUUFBUSxDQUFFLENBQUNDLFFBQUQsQ0FBdEMsMkJBQXFEUCxPQUFPLENBQUMsaUJBQUQsQ0FBNUQsQ0FBTixDLHdCQUdBUSxNQUFNLENBQUNDLE9BQVAsQ0FBaUIsQ0FBQ0MsTUFBRCxDQUFTQyxJQUFULEdBQWtCLGlEQUUvQkMsTUFBTSxDQUFDQyxRQUFQLENBQWdCQyxPQUFoQixDQUF3QkosTUFBeEIsRUFFQSxHQUFJSyxDQUFBQSxRQUFRLDBCQUFHLEtBQUgsQ0FBWixDQUorQix3QkFNL0IsTUFBTyxDQUFDLFNBQVkseUJBQ2hCLEdBQUlDLENBQUFBLElBQUosQ0FEZ0Isd0JBR2hCQSxJQUFJLENBQUcsS0FBTVosQ0FBQUEsSUFBSSxDQUFDYSxPQUFMLENBQWEsQ0FBRUMsR0FBRyxDQUFFWCxRQUFRLENBQUNHLE1BQUQsQ0FBZixDQUFiLENBQXdDLENBQUNTLFFBQVEsQ0FBRSxDQUFYLENBQXhDLENBQWIsQ0FIZ0Isd0JBS2hCLEdBQUksQ0FBQ0gsSUFBTCxDQUFXLHFEQUFBQSxJQUFJLENBQUcsS0FBTVgsQ0FBQUEsTUFBTSxDQUFDWSxPQUFQLENBQWUsQ0FBRUMsR0FBRyxDQUFFWCxRQUFRLENBQUNHLE1BQUQsQ0FBZixDQUFmLENBQTBDLENBQUNTLFFBQVEsQ0FBRSxDQUFYLENBQTFDLENBQWIsQ0FBc0UsQ0FBakYsaUNBTGdCLHlCQU9oQixHQUFJLENBQUNILElBQUwsQ0FBVywwREFBTSxJQUFJZCxDQUFBQSxnQkFBSixDQUFzQiwwQkFBeUJRLE1BQU8sY0FBdEQsQ0FBTixDQUEwRSxDQUFyRixpQ0FFQTtBQVRnQix5QkFXaEIsSUFBSSxHQUFJVSxDQUFBQSxDQUFSLEdBQWFULENBQUFBLElBQWIsQ0FBa0IsMEJBRWQsSUFBSyxHQUFJVSxDQUFBQSxDQUFULEdBQWNMLENBQUFBLElBQWQsQ0FBbUIsMEJBQ2YsR0FBR0ksQ0FBQyxHQUFLQyxDQUFULENBQVcscURBQ1BOLFFBQVEsQ0FBRyxJQUFYLENBRE8seUJBRVAsTUFDSCxDQUhELGlDQUlILENBUGEseUJBUWQsR0FBSUEsUUFBUSxHQUFLLEtBQWpCLENBQXdCLDBEQUFNLElBQUliLENBQUFBLGdCQUFKLENBQXNCLEdBQUVrQixDQUFFLDRCQUExQixDQUFOLENBQTRELENBQXBGLGlDQVJjLHlCQVVkSixJQUFJLENBQUNJLENBQUQsQ0FBSixDQUFVVCxJQUFJLENBQUNTLENBQUQsQ0FBZCxDQUNILENBdEJlLHlCQXdCaEIsS0FBTUosQ0FBQUEsSUFBSSxDQUFDTSxJQUFMLEVBQU4sQ0FFSCxDQTFCTSxHQUFQLENBMkJILENBakNEIiwic291cmNlc0NvbnRlbnQiOlsicmVxdWlyZSgndGFrZW15dGFzay1jb21tb25zL3BvbHlmaWxscy9zdHJpbmcnKVxyXG5yZXF1aXJlKCd0YWtlbXl0YXNrLWNvbW1vbnMvcG9seWZpbGxzL2pzb24nKVxyXG5jb25zdCB7IGVycm9yczogeyBVbmV4aXN0ZW5jZUVycm9yIH0gfSA9IHJlcXVpcmUoJ3Rha2VteXRhc2stY29tbW9ucycpXHJcbmNvbnN0IHsgbW9kZWxzOiB7IFVzZXIsIFdvcmtlciB9LCBtb25nb29zZToge09iamVjdElkfSB9ID0gcmVxdWlyZSgndGFrZW15dGFzay1kYXRhJylcclxuXHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9ICh1c2VySWQsIGJvZHkpID0+IHtcclxuXHJcbiAgICBTdHJpbmcudmFsaWRhdGUubm90Vm9pZCh1c2VySWQpXHJcblxyXG4gICAgbGV0IHZhbFBhcmFtID0gZmFsc2VcclxuXHJcbiAgICByZXR1cm4gKGFzeW5jICgpID0+IHtcclxuICAgICAgICBsZXQgdXNlclxyXG4gICAgICAgIFxyXG4gICAgICAgIHVzZXIgPSBhd2FpdCBVc2VyLmZpbmRPbmUoeyBfaWQ6IE9iamVjdElkKHVzZXJJZCkgfSwge3Bhc3N3b3JkOiAwIH0pXHJcblxyXG4gICAgICAgIGlmICghdXNlcikgdXNlciA9IGF3YWl0IFdvcmtlci5maW5kT25lKHsgX2lkOiBPYmplY3RJZCh1c2VySWQpIH0sIHtwYXNzd29yZDogMCB9KVxyXG5cclxuICAgICAgICBpZiAoIXVzZXIpIHRocm93IG5ldyBVbmV4aXN0ZW5jZUVycm9yKGB1c2VyIG9yIHdvcmtlciB3aXRoIGlkICR7dXNlcklkfSBkb250IGV4aXN0c2ApXHJcblxyXG4gICAgICAgIC8vIGF3YWl0IFVzZXIuZGVsZXRlT25lKHtfaWQ6IE9iamVjdElkKHVzZXJJZCl9KVxyXG5cclxuICAgICAgICBmb3IodmFyIGkgaW4gYm9keSl7XHJcblxyXG4gICAgICAgICAgICBmb3IgKHZhciBnIGluIHVzZXIpe1xyXG4gICAgICAgICAgICAgICAgaWYoaSA9PT0gZyl7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFsUGFyYW0gPSB0cnVlXHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWsgXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHZhbFBhcmFtID09PSBmYWxzZSkgdGhyb3cgbmV3IFVuZXhpc3RlbmNlRXJyb3IoYCR7aX0gaXMgbm90IGEgcHJhbWV0ZXIgb2YgdXNlcmApXHJcblxyXG4gICAgICAgICAgICB1c2VyW2ldID0gYm9keVtpXVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgYXdhaXQgdXNlci5zYXZlKClcclxuXHJcbiAgICB9KSgpXHJcbn0iXX0=